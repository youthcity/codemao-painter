{"version":3,"sources":["webpack:///webpack/bootstrap 63dec729326dd8ba24ac","webpack:///./src/main.tsx","webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///./src/components/Painter.tsx","webpack:///./src/css/painter.css?710e","webpack:///./src/css/painter.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/js/color/colors.js","webpack:///./src/js/color/colorPicker.data.js","webpack:///./src/js/color/colorPicker.js","webpack:///./src/js/color/jsColor.js","webpack:///./src/fabric_canvas.ts","webpack:///./src/js/override/static-canvas.js","webpack:///./src/js/override/canvas.js","webpack:///./src/js/override/canvas-events.js","webpack:///./src/js/override/base-brush.js","webpack:///./src/js/override/pencil-brush.js","webpack:///./src/js/layer.js","webpack:///./src/js/layer-manager.js","webpack:///./src/js/cursor-render.js","webpack:///./src/js/eraser-brush.js","webpack:///./src/js/trim-canvas.js","webpack:///./src/js/point-brush.js","webpack:///./src/js/line-brush.js","webpack:///./src/js/rect-brush.js","webpack:///./src/js/round-brush.js","webpack:///./src/def/Brush.ts","webpack:///./src/def/Shape.ts","webpack:///./src/components/panels/PaintingPanel.tsx","webpack:///./src/css/painter-tools-painting.css?31e5","webpack:///./src/css/painter-tools-painting.css","webpack:///./src/config.ts","webpack:///./src/components/buttons/ColorButton.tsx","webpack:///./src/css/ControlButton.css?3277","webpack:///./src/css/ControlButton.css","webpack:///./src/actions/ColorButtonActions.ts","webpack:///./src/actions/Actions.ts","webpack:///./src/painter_dispatcher.ts","webpack:///./~/flux/index.js","webpack:///./~/flux/lib/Dispatcher.js","webpack:///./~/process/browser.js","webpack:///./~/fbjs/lib/invariant.js","webpack:///./src/painterStore.ts","webpack:///./~/eventemitter3/index.js","webpack:///./src/actions/PaintingActions.ts","webpack:///./src/components/panels/ObjectPanel.tsx","webpack:///./src/css/ObjectPanel.css?bcdd","webpack:///./src/css/ObjectPanel.css"],"names":[],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 63dec729326dd8ba24ac\n **/","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\nimport {Painter} from \"./components/Painter\";\nimport {fabric_canvas} from \"./fabric_canvas\";\n\nexport function init() {\n  ReactDOM.render(\n    <Painter compiler=\"TypeScript\" framework=\"React\"/>,\n    document.getElementById(\"painter\")\n  );\n}\n\nexport let codemao_fabric = {\n  Painter: Painter,\n  fabric_canvas: fabric_canvas,\n  init: init\n};\n\nconst global = (window as any);\n\nglobal.codemao_fabric = codemao_fabric;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.tsx\n **/","module.exports = React;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"React\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = ReactDOM;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ReactDOM\"\n ** module id = 3\n ** module chunks = 0\n **/","import * as React from 'react';\nimport '../css/painter.css';\n\nimport '../js/color/colors.js';\nimport '../js/color/colorPicker.data.js';\nimport '../js/color/colorPicker.js';\nimport '../js/color/jsColor.js';\n\nimport { config } from '../config';\nimport { fabric_canvas } from '../fabric_canvas';\nimport { PaintingPanel } from './panels/PaintingPanel';\nimport { BackgroundPanel } from './panels/BackgroundPanel';\nimport { LayerPanel } from './panels/LayerPanel';\nimport { ObjectPanel } from './panels/ObjectPanel';\nimport { ControlButton } from './buttons/ControlButton';\nimport { painterStore } from '../painterStore';\nimport { PainterStates } from '../PainterStates';\nimport { colorButtonActions } from \"../actions/ColorButtonActions\";\nimport ComponentSpec = __React.ComponentSpec;\n\nexport interface PainterProps {\n  compiler: string;\n  framework: string;\n}\n\n// class Painter extends React.Component<PainterProps, { panel_type: number }>\nconst global: any = window;\nlet Painter = React.createClass <PainterProps, PainterStates>(({\n  getInitialState() {\n    return painterStore.states;\n  },\n  componentDidMount() {\n    fabric_canvas.init(this.canvas_element, this.canvas_wrapper_element);\n    painterStore.add_change_listener(this.onChange);\n  },\n  componentWillUnmount() {\n    painterStore.remove_change_listener(this.onChange);\n  },\n  onChange() {\n    this.setState(painterStore.states);\n    console.log(this.state);\n  },\n  /**\n   * Select tool panel\n   * @param event\n   */\n  selectPanel(event: any) {\n    this.setState({panel_type: event.target.value});\n  },\n  render() {\n    //  todo: will use these buttons soon\n    // let control_buttons = config.control_buttons.map((value) => {\n    //   return <ControlButton key={ value.title } control_button={ value } />;\n    // });\n    let panel_element: JSX.Element;\n    switch (this.state.panel_type) {\n      //  todo: will use these panels soon\n      // case 'background':\n      //   panel_element = <BackgroundPanel className=\"painter-tools-background\"/>;\n      //   break;\n      // case 'layer':\n      //   panel_element = <LayerPanel className=\"painter-tools-layer\"/>;\n      //   break;\n      default:\n      case 'painting':\n        panel_element = <PaintingPanel className=\"painter-tools-painting\" current_color={this.state.current_color}/>;\n    }\n    return <div className=\"painter\">\n      <div className=\"painter-tools\">\n        <div className=\"painter-tools-tabs\">\n          <button value=\"painting\" className=\"tab-button tabs-painting\" onClick={this.selectPanel}>\n            \n            <svg width=\"16px\" height=\"7px\" viewBox=\"49 48 16 7\" version=\"1.1\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n              <polygon id=\"rect-tab-painting\" stroke=\"none\" fill=\"#F2524C\" fill-rule=\"evenodd\"\n                       transform=\"translate(57.000000, 51.500000) scale(1, -1) translate(-57.000000, -51.500000) \"\n                       points=\"57 48 65 55 49 55\"/>\n            </svg>\n          </button>\n        </div>\n        <div className=\"painter-tools-container\">\n          {panel_element}\n        </div>\n        <div className=\"painter-tools-buttons\">\n          <div className=\"tools-costume\">\n            <input title=\"\" className=\"painter-title\" placeholder=\"\"/>\n            <div className=\"costume-buttons\">\n              <div className=\"save-button\">\n                <img src=\"//o44j7l4g3.qnssl.com/program/painter/save.png\" alt=\"\"/>\n              </div>\n              <div className=\"cancel-button\">\n                <img src=\"//o44j7l4g3.qnssl.com/program/painter/cancel.png\" alt=\"\"/>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"right-panel\">\n        <div className=\"paint-panel\">\n          <div className=\"painter-canvas-wrapper\"\n               ref={(canvas_wrapper) => this.canvas_wrapper_element = canvas_wrapper}>\n            <canvas ref={(canvas) => this.canvas_element = canvas} className=\"painter-canvas\"/>\n            <div className=\"stage-size\"></div>\n          </div>\n          <ObjectPanel/>\n        </div>\n        <div className=\"painter-control-wrapper\">\n          <div className=\"control-panel\">\n          </div>\n        </div>\n      </div>\n    </div>;\n    // return <h1>Hello from {this.props.compiler} and {this.props.framework}!</h1>;\n  }\n} as ComponentSpec<PainterProps, PainterStates>));\n\n//  todo: will use these buttons soon\n// <button value=\"background\" className=\"tab-button tabs-background\" onClick={this.selectPanel}>\n//             \n//             <svg width=\"16px\" height=\"7px\" viewBox=\"49 48 16 7\" version=\"1.1\"\n//                  xmlns=\"http://www.w3.org/2000/svg\">\n//               <polygon id=\"rect-tab-background\" stroke=\"none\" fill=\"#EEB000\" fill-rule=\"evenodd\"\n//                        transform=\"translate(57.000000, 51.500000) scale(1, -1) translate(-57.000000, -51.500000) \"\n//                        points=\"57 48 65 55 49 55\"/>\n//             </svg>\n//           </button>\n//           <button value=\"layer\" className=\"tab-button tabs-layers\" onClick={this.selectPanel}>\n//             \n//             <svg width=\"16px\" height=\"7px\" viewBox=\"49 48 16 7\" version=\"1.1\"\n//                  xmlns=\"http://www.w3.org/2000/svg\">\n//               <polygon id=\"rect-tab-layers\" stroke=\"none\" fill=\"#44BFD2\" fill-rule=\"evenodd\"\n//                        transform=\"translate(57.000000, 51.500000) scale(1, -1) translate(-57.000000, -51.500000) \"\n//                        points=\"57 48 65 55 49 55\"/>\n//             </svg>\n//           </button>\n\nexport { Painter };\n\nglobal.Painter = Painter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Painter.tsx\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./painter.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./painter.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./painter.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/css/painter.css\n ** module id = 5\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".painter {\\n  width: 100%;\\n  height: 100%;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  position: fixed;\\n  left: 0;\\n  top: 0;\\n\\n  background-color: #fdb336;\\n}\\n\\n.right-panel {\\n  width: 75%;\\n  /*height: calc(100% - 4rem);*/\\n  height: 100%;\\n\\n  display: -webkit-box;\\n\\n  display: -ms-flexbox;\\n\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: row;\\n          flex-direction: row;\\n  -webkit-box-flex: 1;\\n      -ms-flex-positive: 1;\\n          flex-grow: 1;\\n\\n  padding: 32px 0 32px 5%;\\n  padding: 2rem 0 2rem 5%;\\n\\n  background-color: rgb(248, 248, 248);\\n}\\n\\n.paint-panel {\\n  height: calc(100% - 2rem);\\n  width: 70%;\\n\\n  display: -webkit-box;\\n\\n  display: -ms-flexbox;\\n\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: column;\\n          flex-direction: column;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-pack: end;\\n      -ms-flex-pack: end;\\n          justify-content: flex-end;\\n\\n  -webkit-box-flex: 1;\\n\\n      -ms-flex-positive: 1;\\n\\n          flex-grow: 1;\\n  -ms-flex-negative: 1;\\n      flex-shrink: 1;\\n\\n  background-color: #F8F8F8;\\n}\\n\\n.painter-control-wrapper {\\n  width: 10%;\\n  max-width: 96px;\\n  max-width: 6rem;\\n  height: 100%;\\n\\n  -ms-flex-negative: 0;\\n\\n      flex-shrink: 0;\\n}\\n\\n.painter-tools {\\n  width: 20%;\\n  height: 100%;\\n  background: #ECE7DD;\\n\\n  display: -webkit-box;\\n\\n  display: -ms-flexbox;\\n\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: column;\\n          flex-direction: column;\\n}\\n\\n.painter-tools-tabs {\\n  width: 100%;\\n  height: 6%;\\n\\n  display: -webkit-box;\\n\\n  display: -ms-flexbox;\\n\\n  display: flex;\\n  -webkit-box-align: start;\\n      -ms-flex-align: start;\\n          align-items: flex-start;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n}\\n\\n.painter-tools-container {\\n  width: 100%;\\n  height: calc(94% - 6rem);\\n}\\n\\n.painter-tools-buttons {\\n  width: 100%;\\n  height: 96px;\\n  height: 6rem;\\n}\\n\\n.painter-tools .tab-button {\\n  height: calc(85% - 0.3rem);\\n  -webkit-box-flex: 1;\\n      -ms-flex-positive: 1;\\n          flex-grow: 1;\\n\\n  position: relative;\\n\\n  display: -webkit-box;\\n\\n  display: -ms-flexbox;\\n\\n  display: flex;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  font-family: STHeitiTC-Light, serif;\\n  font-size: 18px;\\n  color: #FFFFFF;\\n\\n  margin-top: 4.8px;\\n  margin-top: 0.3rem;\\n\\n  cursor: pointer;\\n}\\n\\n.painter-tools .tab-button svg {\\n  display: none;\\n  width: 100%;\\n  position: absolute;\\n  top: calc(100% - 0.1rem);\\n  left: 0;\\n}\\n\\n.painter-tools .tab-button.active {\\n  height: 85%;\\n  margin-top: 0;\\n}\\n\\n.painter-tools .tab-button.active svg {\\n  display: block;\\n}\\n\\n.painter-tools .tabs-painting {\\n  background: #F2524C;\\n}\\n\\n.painter-tools .tabs-background {\\n  background: #EEB000;\\n}\\n\\n.painter-tools .tabs-layers {\\n  background: #44BFD2;\\n}\\n\\n.painter-canvas-wrapper {\\n  position: relative;\\n  width: calc(100% - 8px);\\n  height: calc(100% - 8px);\\n  background-image: url(\\\"//o44j7l4g3.qnssl.com/program/painter/grid.png\\\");\\n\\n  border: 4px solid rgba(198, 177, 155, 0.60);\\n  border-radius: 4px;\\n}\\n\\n.stage-size {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  margin-left: -155px;\\n  margin-top: -225px;\\n  width: 310px;\\n  height: 450px;\\n  background-image: url('//o44j7l4g3.qnssl.com/program/painter/stage-size.png');\\n  opacity: 0.5;\\n  pointer-events: none;\\n}\\n\\n.control-panel {\\n  width: 100%;\\n  height: 100%;\\n\\n  display: -webkit-box;\\n\\n  display: -ms-flexbox;\\n\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: column;\\n          flex-direction: column;\\n  -webkit-box-pack: start;\\n      -ms-flex-pack: start;\\n          justify-content: flex-start;\\n  -webkit-box-align: start;\\n      -ms-flex-align: start;\\n          align-items: flex-start;\\n\\n  background-color: #F8F8F8;\\n}\\n\\n/*.control-buttons-container {*/\\n/*width: 100%;*/\\n/*height: 100%;*/\\n/*}*/\\n\\n.tools-costume {\\n  width: 100%;\\n  height: 100%;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: column;\\n          flex-direction: column;\\n\\n  background: #E1D6BE;\\n}\\n\\n.tools-costume input {\\n  width: auto;\\n  height: auto;\\n}\\n\\n.painter-title {\\n  margin: 8px;\\n  margin: 0.5rem;\\n  padding: 8px;\\n  padding: 0.5rem;\\n  background: #ECE2CA;\\n  border: 1px solid #DDD0C3;\\n  border-radius: 4px;\\n  font-family: STHeitiSC-Light, serif;\\n  font-size: 14px;\\n  color: #6D4C41;\\n}\\n\\n.painter-title:focus {\\n  outline: none;\\n}\\n\\n.costume-buttons {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-pack: justify;\\n      -ms-flex-pack: justify;\\n          justify-content: space-between;\\n\\n  margin: 0 8px;\\n  margin: 0 0.5rem;\\n\\n  cursor: pointer;\\n}\\n\\n.costume-buttons img {\\n  max-width: 100%;\\n  max-height: 100%;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/postcss-loader!./src/css/painter.css\n ** module id = 6\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/css-loader/lib/css-base.js\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 8\n ** module chunks = 0\n **/",";(function (window, undefined) {\n  \"use strict\"\n\n  var _valueRanges = {\n      rgb: { r: [0, 255], g: [0, 255], b: [0, 255] },\n      hsv: { h: [0, 360], s: [0, 100], v: [0, 100] },\n      hsl: { h: [0, 360], s: [0, 100], l: [0, 100] },\n      cmy: { c: [0, 100], m: [0, 100], y: [0, 100] },\n      cmyk: { c: [0, 100], m: [0, 100], y: [0, 100], k: [0, 100] },\n      Lab: { L: [0, 100], a: [-128, 127], b: [-128, 127] },\n      XYZ: { X: [0, 100], Y: [0, 100], Z: [0, 100] },\n      alpha: { alpha: [0, 1] },\n      HEX: { HEX: [0, 16777215] } // maybe we don't need this\n    },\n    valueRangesOrder = ['rgb', 'hsv', 'hsl', 'cmy', 'cmyk', 'Lab', 'XYZ', 'alpha', 'HEX'],\n\n    _instance = {},\n    _colors = {},\n\n  // http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html for more\n    XYZMatrix = { // Observer = 2 (CIE 1931), Illuminant = D65\n      X: [0.4124564, 0.3575761, 0.1804375],\n      Y: [0.2126729, 0.7151522, 0.0721750],\n      Z: [0.0193339, 0.1191920, 0.9503041],\n      R: [3.2404542, -1.5371385, -0.4985314],\n      G: [-0.9692660, 1.8760108, 0.0415560],\n      B: [0.0556434, -0.2040259, 1.0572252]\n    },\n    grey = { r: 0.298954, g: 0.586434, b: 0.114612 }, // CIE-XYZ 1931\n    luminance = { r: 0.2126, g: 0.7152, b: 0.0722 }, // W3C 2.0\n\n    _math = window.Math,\n    _parseint = window.parseInt,\n\n    Colors = window.Colors = function (options) {\n      this.colors = { RND: {} };\n      this.options = {\n        color: 'rgba(204, 82, 37, 0.8)', // init value(s)...\n        XYZMatrix: XYZMatrix,\n        // XYZReference: {},\n        grey: grey,\n        luminance: luminance,\n        valueRanges: _valueRanges\n        // customBG: '#808080'\n        // convertCallback: undefined,\n        // allMixDetails: false\n      };\n      initInstance(this, options || {});\n    },\n    initInstance = function (THIS, options) {\n      var matrix,\n        importColor,\n        _options = THIS.options,\n        customBG;\n\n      focusInstance(THIS);\n      for (var option in options) {\n        if (options[option] !== undefined) _options[option] = options[option];\n      }\n      matrix = _options.XYZMatrix;\n      if (!options.XYZReference) _options.XYZReference = {\n        X: matrix.X[0] + matrix.X[1] + matrix.X[2],\n        Y: matrix.Y[0] + matrix.Y[1] + matrix.Y[2],\n        Z: matrix.Z[0] + matrix.Z[1] + matrix.Z[2]\n      };\n      customBG = _options.customBG;\n      _options.customBG = (typeof customBG === 'string') ? ColorConverter.txt2color(customBG).rgb : customBG;\n      _colors = setColor(THIS.colors, _options.color, undefined, true); // THIS.colors = _colors =\n    },\n    focusInstance = function (THIS) {\n      if (_instance !== THIS) {\n        _instance = THIS;\n        _colors = THIS.colors;\n      }\n    };\n\n  Colors.prototype.setColor = function (newCol, type, alpha) {\n    focusInstance(this);\n    if (newCol) {\n      return setColor(this.colors, newCol, type, undefined, alpha);\n    } else {\n      if (alpha !== undefined) {\n        this.colors.alpha = limitValue(alpha, 0, 1);\n      }\n      return convertColors(type);\n    }\n  };\n\n  Colors.prototype.getColor = function (type) {\n    var result = this.colors, n = 0;\n\n    if (type) {\n      type = type.split('.');\n      while (result[type[n]]) {\n        result = result[type[n++]];\n      }\n      if (type.length !== n) {\n        result = undefined;\n      }\n    }\n    return result;\n  };\n\n  Colors.prototype.setCustomBackground = function (col) { // wild gues,... check again...\n    focusInstance(this); // needed???\n    this.options.customBG = (typeof col === 'string') ? ColorConverter.txt2color(col).rgb : col;\n    // return setColor(this.colors, this.options.customBG, 'rgb', true); // !!!!RGB\n    return setColor(this.colors, undefined, 'rgb'); // just recalculate existing\n  };\n\n  Colors.prototype.saveAsBackground = function () { // alpha\n    focusInstance(this); // needed???\n    // return setColor(this.colors, this.colors.RND.rgb, 'rgb', true);\n    return setColor(this.colors, undefined, 'rgb', true);\n  };\n\n  Colors.prototype.convertColor = function (color, type) {\n    var convert = ColorConverter,\n      ranges = _valueRanges,\n      types = type.split('2'),\n      fromType = types[0],\n      toType = types[1],\n      test = /(?:RG|HS|CM|LA)/,\n      normalizeFrom = test.test(fromType),\n      normalizeTo = test.test(toType),\n      exceptions = { LAB: 'Lab' },\n      normalize = function (color, type, reverse) {\n        var result = {},\n          Lab = type === 'Lab' ? 1 : 0;\n\n        for (var n in color) { // faster (but bigger) way: if/else outside 2 for loops\n          result[n] = reverse ?\n            _math.round(color[n] * (Lab || ranges[type][n][1])) :\n          color[n] / (Lab || ranges[type][n][1]);\n        }\n\n        return result;\n      };\n\n    fromType = ranges[fromType] ? fromType : exceptions[fromType] || fromType.toLowerCase();\n    toType = ranges[toType] ? toType : exceptions[toType] || toType.toLowerCase();\n\n    if (normalizeFrom && type !== 'RGB2HEX') { // from ABC to abc\n      color = normalize(color, fromType);\n    }\n    color = fromType === toType ? color : ( // same type; returns same/normalized version\n      convert[fromType + '2' + toType] ? convert[fromType + '2' + toType](color, true) : // existing converter\n        toType === 'HEX' ? convert.RGB2HEX(type === 'RGB2HEX' ? color : normalize(fromType === 'rgb' ? color :\n          convert[fromType + '2rgb'](color, true), 'rgb', true)) :\n          convert['rgb2' + toType](convert[fromType + '2rgb'](color, true), true) // not in ColorConverter\n    );\n    if (normalizeTo) { // from abc to ABC\n      color = normalize(color, toType, true);\n    }\n\n    return color;\n  };\n\n  // ------------------------------------------------------ //\n  // ---------- Color calculation related stuff  ---------- //\n  // -------------------------------------------------------//\n\n  function setColor(colors, color, type, save, alpha) { // color only full range\n    if (typeof color === 'string') {\n      var color = ColorConverter.txt2color(color); // new object\n      type = color.type;\n      _colors[type] = color[type];\n      alpha = alpha !== undefined ? alpha : color.alpha;\n    } else if (color) {\n      for (var n in color) {\n        colors[type][n] = type === 'Lab' ?\n          limitValue(color[n], _valueRanges[type][n][0], _valueRanges[type][n][1]) :\n          limitValue(color[n] / _valueRanges[type][n][1], 0, 1);\n      }\n    }\n    if (alpha !== undefined) {\n      colors.alpha = limitValue(+alpha, 0, 1);\n    }\n    return convertColors(type, save ? colors : undefined);\n  }\n\n  function saveAsBackground(RGB, rgb, alpha) {\n    var grey = _instance.options.grey,\n      color = {};\n\n    color.RGB = { r: RGB.r, g: RGB.g, b: RGB.b };\n    color.rgb = { r: rgb.r, g: rgb.g, b: rgb.b };\n    color.alpha = alpha;\n    // color.RGBLuminance = getLuminance(RGB);\n    color.equivalentGrey = _math.round(grey.r * RGB.r + grey.g * RGB.g + grey.b * RGB.b);\n\n    color.rgbaMixBlack = mixColors(rgb, { r: 0, g: 0, b: 0 }, alpha, 1);\n    color.rgbaMixWhite = mixColors(rgb, { r: 1, g: 1, b: 1 }, alpha, 1);\n    color.rgbaMixBlack.luminance = getLuminance(color.rgbaMixBlack, true);\n    color.rgbaMixWhite.luminance = getLuminance(color.rgbaMixWhite, true);\n\n    if (_instance.options.customBG) {\n      color.rgbaMixCustom = mixColors(rgb, _instance.options.customBG, alpha, 1);\n      color.rgbaMixCustom.luminance = getLuminance(color.rgbaMixCustom, true);\n      _instance.options.customBG.luminance = getLuminance(_instance.options.customBG, true);\n    }\n\n    return color;\n  }\n\n  function convertColors(type, colorObj) {\n    // console.time('convertColors');\n    var _Math = _math,\n      colors = colorObj || _colors,\n      convert = ColorConverter,\n      options = _instance.options,\n      ranges = _valueRanges,\n      keys = valueRangesOrder,\n      RND = colors.RND,\n    // type = colorType, // || _mode.type,\n      modes, mode = '', from = '', // value = '',\n      exceptions = { hsl: 'hsv', cmyk: 'cmy', rgb: type },\n      RGB = RND.rgb, SAVE, SMART;\n\n    if (type !== 'alpha') {\n      for (var i = 0; i < keys.length; i++) {\n        let typ = keys[i];\n        if (!ranges[typ][typ]) { // no alpha|HEX\n          if (type !== typ && typ !== 'XYZ') {\n            from = exceptions[typ] || 'rgb';\n            colors[typ] = convert[from + '2' + typ](colors[from]);\n          }\n\n          if (!RND[typ]) RND[typ] = {};\n          modes = colors[typ];\n          for (mode in modes) {\n            RND[typ][mode] = _Math.round(modes[mode] * (typ === 'Lab' ? 1 : ranges[typ][mode][1]));\n          }\n        }\n      }\n      if (type !== 'Lab') {\n        delete colors._rgb;\n      }\n\n      RGB = RND.rgb;\n      colors.HEX = convert.RGB2HEX(RGB);\n      colors.equivalentGrey =\n        options.grey.r * colors.rgb.r +\n        options.grey.g * colors.rgb.g +\n        options.grey.b * colors.rgb.b;\n      colors.webSave = SAVE = getClosestWebColor(RGB, 51);\n      // colors.webSave.HEX = convert.RGB2HEX(colors.webSave);\n      colors.webSmart = SMART = getClosestWebColor(RGB, 17);\n      // colors.webSmart.HEX = convert.RGB2HEX(colors.webSmart);\n      colors.saveColor =\n        RGB.r === SAVE.r && RGB.g === SAVE.g && RGB.b === SAVE.b ? 'web save' :\n          RGB.r === SMART.r && RGB.g === SMART.g && RGB.b === SMART.b ? 'web smart' : '';\n      colors.hueRGB = convert.hue2RGB(colors.hsv.h);\n\n      if (colorObj) {\n        colors.background = saveAsBackground(RGB, colors.rgb, colors.alpha);\n      }\n    } // else RGB = RND.rgb;\n\n    var rgb = colors.rgb, // for better minification...\n      alpha = colors.alpha,\n      luminance = 'luminance',\n      background = colors.background,\n      rgbaMixBlack, rgbaMixWhite, rgbaMixCustom,\n      rgbaMixBG, rgbaMixBGMixBlack, rgbaMixBGMixWhite, rgbaMixBGMixCustom,\n      _mixColors = mixColors,\n      _getLuminance = getLuminance,\n      _getWCAG2Ratio = getWCAG2Ratio,\n      _getHueDelta = getHueDelta;\n\n    rgbaMixBlack = _mixColors(rgb, { r: 0, g: 0, b: 0 }, alpha, 1);\n    rgbaMixBlack[luminance] = _getLuminance(rgbaMixBlack, true);\n    colors.rgbaMixBlack = rgbaMixBlack;\n\n    rgbaMixWhite = _mixColors(rgb, { r: 1, g: 1, b: 1 }, alpha, 1);\n    rgbaMixWhite[luminance] = _getLuminance(rgbaMixWhite, true);\n    colors.rgbaMixWhite = rgbaMixWhite;\n\n    if (options.allMixDetails) {\n      rgbaMixBlack.WCAG2Ratio = _getWCAG2Ratio(rgbaMixBlack[luminance], 0);\n      rgbaMixWhite.WCAG2Ratio = _getWCAG2Ratio(rgbaMixWhite[luminance], 1);\n\n      if (options.customBG) {\n        rgbaMixCustom = _mixColors(rgb, options.customBG, alpha, 1);\n        rgbaMixCustom[luminance] = _getLuminance(rgbaMixCustom, true);\n        rgbaMixCustom.WCAG2Ratio = _getWCAG2Ratio(rgbaMixCustom[luminance], options.customBG[luminance]);\n        colors.rgbaMixCustom = rgbaMixCustom;\n      }\n\n      rgbaMixBG = _mixColors(rgb, background.rgb, alpha, background.alpha);\n      rgbaMixBG[luminance] = _getLuminance(rgbaMixBG, true); // ?? do we need this?\n      colors.rgbaMixBG = rgbaMixBG;\n\n      rgbaMixBGMixBlack = _mixColors(rgb, background.rgbaMixBlack, alpha, 1);\n      rgbaMixBGMixBlack[luminance] = _getLuminance(rgbaMixBGMixBlack, true);\n      rgbaMixBGMixBlack.WCAG2Ratio = _getWCAG2Ratio(rgbaMixBGMixBlack[luminance],\n        background.rgbaMixBlack[luminance]);\n      /* ------ */\n      rgbaMixBGMixBlack.luminanceDelta = _Math.abs(\n        rgbaMixBGMixBlack[luminance] - background.rgbaMixBlack[luminance]);\n      rgbaMixBGMixBlack.hueDelta = _getHueDelta(background.rgbaMixBlack, rgbaMixBGMixBlack, true);\n      /* ------ */\n      colors.rgbaMixBGMixBlack = rgbaMixBGMixBlack;\n\n      rgbaMixBGMixWhite = _mixColors(rgb, background.rgbaMixWhite, alpha, 1);\n      rgbaMixBGMixWhite[luminance] = _getLuminance(rgbaMixBGMixWhite, true);\n      rgbaMixBGMixWhite.WCAG2Ratio = _getWCAG2Ratio(rgbaMixBGMixWhite[luminance],\n        background.rgbaMixWhite[luminance]);\n      /* ------ */\n      rgbaMixBGMixWhite.luminanceDelta = _Math.abs(\n        rgbaMixBGMixWhite[luminance] - background.rgbaMixWhite[luminance]);\n      rgbaMixBGMixWhite.hueDelta = _getHueDelta(background.rgbaMixWhite, rgbaMixBGMixWhite, true);\n      /* ------ */\n      colors.rgbaMixBGMixWhite = rgbaMixBGMixWhite;\n    }\n\n    if (options.customBG) {\n      rgbaMixBGMixCustom = _mixColors(rgb, background.rgbaMixCustom, alpha, 1);\n      rgbaMixBGMixCustom[luminance] = _getLuminance(rgbaMixBGMixCustom, true);\n      rgbaMixBGMixCustom.WCAG2Ratio = _getWCAG2Ratio(rgbaMixBGMixCustom[luminance],\n        background.rgbaMixCustom[luminance]);\n      colors.rgbaMixBGMixCustom = rgbaMixBGMixCustom;\n      /* ------ */\n      rgbaMixBGMixCustom.luminanceDelta = _Math.abs(\n        rgbaMixBGMixCustom[luminance] - background.rgbaMixCustom[luminance]);\n      rgbaMixBGMixCustom.hueDelta = _getHueDelta(background.rgbaMixCustom, rgbaMixBGMixCustom, true);\n      /* ------ */\n    }\n\n    colors.RGBLuminance = _getLuminance(RGB);\n    colors.HUELuminance = _getLuminance(colors.hueRGB);\n\n    // renderVars.readyToRender = true;\n    if (options.convertCallback) {\n      options.convertCallback(colors, type); //, convert); //, _mode);\n    }\n\n    // console.timeEnd('convertColors')\n    // if (colorObj)\n    return colors;\n  }\n\n\n  // ------------------------------------------------------ //\n  // ------------------ color conversion ------------------ //\n  // -------------------------------------------------------//\n\n  var ColorConverter = {\n    txt2color: function (txt) {\n      var color = {},\n        parts = txt.replace(/(?:#|\\)|%)/g, '').split('('),\n        values = (parts[1] || '').split(/,\\s*/),\n        type = parts[1] ? parts[0].substr(0, 3) : 'rgb',\n        m = '';\n\n      color.type = type;\n      color[type] = {};\n      if (parts[1]) {\n        for (var n = 3; n--;) {\n          m = type[n] || type.charAt(n); // IE7\n          color[type][m] = +values[n] / _valueRanges[type][m][1];\n        }\n      } else {\n        color.rgb = ColorConverter.HEX2rgb(parts[0]);\n      }\n      // color.color = color[type];\n      color.alpha = values[3] ? +values[3] : 1;\n\n      return color;\n    },\n\n    RGB2HEX: function (RGB) {\n      return (\n        (RGB.r < 16 ? '0' : '') + RGB.r.toString(16) +\n        (RGB.g < 16 ? '0' : '') + RGB.g.toString(16) +\n        (RGB.b < 16 ? '0' : '') + RGB.b.toString(16)\n      ).toUpperCase();\n    },\n\n    HEX2rgb: function (HEX) {\n      var _parseInt = _parseint;\n\n      HEX = HEX.split(''); // IE7\n      return {\n        r: _parseInt(HEX[0] + HEX[HEX[3] ? 1 : 0], 16) / 255,\n        g: _parseInt(HEX[HEX[3] ? 2 : 1] + (HEX[3] || HEX[1]), 16) / 255,\n        b: _parseInt((HEX[4] || HEX[2]) + (HEX[5] || HEX[2]), 16) / 255\n      };\n    },\n\n    hue2RGB: function (hue) {\n      var _Math = _math,\n        h = hue * 6,\n        mod = ~~h % 6, // Math.floor(h) -> faster in most browsers\n        i = h === 6 ? 0 : (h - mod);\n\n      return {\n        r: _Math.round([1, 1 - i, 0, 0, i, 1][mod] * 255),\n        g: _Math.round([i, 1, 1, 1 - i, 0, 0][mod] * 255),\n        b: _Math.round([0, 0, i, 1, 1, 1 - i][mod] * 255)\n      };\n    },\n\n    // ------------------------ HSV ------------------------ //\n\n    rgb2hsv: function (rgb) { // faster\n      var _Math = _math,\n        r = rgb.r,\n        g = rgb.g,\n        b = rgb.b,\n        k = 0, chroma, min, s;\n\n      if (g < b) {\n        g = b + (b = g, 0);\n        k = -1;\n      }\n      min = b;\n      if (r < g) {\n        r = g + (g = r, 0);\n        k = -2 / 6 - k;\n        min = _Math.min(g, b); // g < b ? g : b; ???\n      }\n      chroma = r - min;\n      s = r ? (chroma / r) : 0;\n      return {\n        h: s < 1e-15 ? ((_colors && _colors.hsl && _colors.hsl.h) || 0) :\n          chroma ? _Math.abs(k + (g - b) / (6 * chroma)) : 0,\n        s: r ? (chroma / r) : ((_colors && _colors.hsv && _colors.hsv.s) || 0), // ??_colors.hsv.s || 0\n        v: r\n      };\n    },\n\n    hsv2rgb: function (hsv) {\n      var h = hsv.h * 6,\n        s = hsv.s,\n        v = hsv.v,\n        i = ~~h, // Math.floor(h) -> faster in most browsers\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6;\n\n      return {\n        r: [v, q, p, p, t, v][mod],\n        g: [t, v, v, q, p, p][mod],\n        b: [p, p, t, v, v, q][mod]\n      };\n    },\n\n    // ------------------------ HSL ------------------------ //\n\n    hsv2hsl: function (hsv) {\n      var l = (2 - hsv.s) * hsv.v,\n        s = hsv.s * hsv.v;\n\n      s = !hsv.s ? 0 : l < 1 ? (l ? s / l : 0) : s / (2 - l);\n\n      return {\n        h: hsv.h,\n        s: !hsv.v && !s ? ((_colors && _colors.hsl && _colors.hsl.s) || 0) : s, // ???\n        l: l / 2\n      };\n    },\n\n    rgb2hsl: function (rgb, dependent) { // not used in Color\n      var hsv = ColorConverter.rgb2hsv(rgb);\n\n      return ColorConverter.hsv2hsl(dependent ? hsv : (_colors.hsv = hsv));\n    },\n\n    hsl2rgb: function (hsl) {\n      var h = hsl.h * 6,\n        s = hsl.s,\n        l = hsl.l,\n        v = l < 0.5 ? l * (1 + s) : (l + s) - (s * l),\n        m = l + l - v,\n        sv = v ? ((v - m) / v) : 0,\n        sextant = ~~h, // Math.floor(h) -> faster in most browsers\n        fract = h - sextant,\n        vsf = v * sv * fract,\n        t = m + vsf,\n        q = v - vsf,\n        mod = sextant % 6;\n\n      return {\n        r: [v, q, m, m, t, v][mod],\n        g: [t, v, v, q, m, m][mod],\n        b: [m, m, t, v, v, q][mod]\n      };\n    },\n\n    // ------------------------ CMYK ------------------------ //\n    // Quote from Wikipedia:\n    // \"Since RGB and CMYK spaces are both device-dependent spaces, there is no\n    // simple or general conversion formula that converts between them.\n    // Conversions are generally done through color management systems, using\n    // color profiles that describe the spaces being converted. Nevertheless, the\n    // conversions cannot be exact, since these spaces have very different gamuts.\"\n    // Translation: the following are just simple RGB to CMY(K) and visa versa conversion functions.\n\n    rgb2cmy: function (rgb) {\n      return {\n        c: 1 - rgb.r,\n        m: 1 - rgb.g,\n        y: 1 - rgb.b\n      };\n    },\n\n    cmy2cmyk: function (cmy) {\n      var _Math = _math,\n        k = _Math.min(_Math.min(cmy.c, cmy.m), cmy.y),\n        t = 1 - k || 1e-20;\n\n      return { // regular\n        c: (cmy.c - k) / t,\n        m: (cmy.m - k) / t,\n        y: (cmy.y - k) / t,\n        k: k\n      };\n    },\n\n    cmyk2cmy: function (cmyk) {\n      var k = cmyk.k;\n\n      return { // regular\n        c: cmyk.c * (1 - k) + k,\n        m: cmyk.m * (1 - k) + k,\n        y: cmyk.y * (1 - k) + k\n      };\n    },\n\n    cmy2rgb: function (cmy) {\n      return {\n        r: 1 - cmy.c,\n        g: 1 - cmy.m,\n        b: 1 - cmy.y\n      };\n    },\n\n    rgb2cmyk: function (rgb, dependent) {\n      var cmy = ColorConverter.rgb2cmy(rgb); // doppelt??\n\n      return ColorConverter.cmy2cmyk(dependent ? cmy : (_colors.cmy = cmy));\n    },\n\n    cmyk2rgb: function (cmyk, dependent) {\n      var cmy = ColorConverter.cmyk2cmy(cmyk); // doppelt??\n\n      return ColorConverter.cmy2rgb(dependent ? cmy : (_colors.cmy = cmy));\n    },\n\n    // ------------------------ LAB ------------------------ //\n\n    XYZ2rgb: function (XYZ, skip) {\n      var _Math = _math,\n        M = _instance.options.XYZMatrix,\n        X = XYZ.X,\n        Y = XYZ.Y,\n        Z = XYZ.Z,\n        r = X * M.R[0] + Y * M.R[1] + Z * M.R[2],\n        g = X * M.G[0] + Y * M.G[1] + Z * M.G[2],\n        b = X * M.B[0] + Y * M.B[1] + Z * M.B[2],\n        N = 1 / 2.4;\n\n      M = 0.0031308;\n\n      r = (r > M ? 1.055 * _Math.pow(r, N) - 0.055 : 12.92 * r);\n      g = (g > M ? 1.055 * _Math.pow(g, N) - 0.055 : 12.92 * g);\n      b = (b > M ? 1.055 * _Math.pow(b, N) - 0.055 : 12.92 * b);\n\n      if (!skip) { // out of gammut\n        _colors._rgb = { r: r, g: g, b: b };\n      }\n\n      return {\n        r: limitValue(r, 0, 1),\n        g: limitValue(g, 0, 1),\n        b: limitValue(b, 0, 1)\n      };\n    },\n\n    rgb2XYZ: function (rgb) {\n      var _Math = _math,\n        M = _instance.options.XYZMatrix,\n        r = rgb.r,\n        g = rgb.g,\n        b = rgb.b,\n        N = 0.04045;\n\n      r = (r > N ? _Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92);\n      g = (g > N ? _Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92);\n      b = (b > N ? _Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92);\n\n      return {\n        X: r * M.X[0] + g * M.X[1] + b * M.X[2],\n        Y: r * M.Y[0] + g * M.Y[1] + b * M.Y[2],\n        Z: r * M.Z[0] + g * M.Z[1] + b * M.Z[2]\n      };\n    },\n\n    XYZ2Lab: function (XYZ) {\n      var _Math = _math,\n        R = _instance.options.XYZReference,\n        X = XYZ.X / R.X,\n        Y = XYZ.Y / R.Y,\n        Z = XYZ.Z / R.Z,\n        N = 16 / 116, M = 1 / 3, K = 0.008856, L = 7.787037;\n\n      X = X > K ? _Math.pow(X, M) : (L * X) + N;\n      Y = Y > K ? _Math.pow(Y, M) : (L * Y) + N;\n      Z = Z > K ? _Math.pow(Z, M) : (L * Z) + N;\n\n      return {\n        L: (116 * Y) - 16,\n        a: 500 * (X - Y),\n        b: 200 * (Y - Z)\n      };\n    },\n\n    Lab2XYZ: function (Lab) {\n      var _Math = _math,\n        R = _instance.options.XYZReference,\n        Y = (Lab.L + 16) / 116,\n        X = Lab.a / 500 + Y,\n        Z = Y - Lab.b / 200,\n        X3 = _Math.pow(X, 3),\n        Y3 = _Math.pow(Y, 3),\n        Z3 = _Math.pow(Z, 3),\n        N = 16 / 116, K = 0.008856, L = 7.787037;\n\n      return {\n        X: (X3 > K ? X3 : (X - N) / L) * R.X,\n        Y: (Y3 > K ? Y3 : (Y - N) / L) * R.Y,\n        Z: (Z3 > K ? Z3 : (Z - N) / L) * R.Z\n      };\n    },\n\n    rgb2Lab: function (rgb, dependent) {\n      var XYZ = ColorConverter.rgb2XYZ(rgb);\n\n      return ColorConverter.XYZ2Lab(dependent ? XYZ : (_colors.XYZ = XYZ));\n    },\n\n    Lab2rgb: function (Lab, dependent) {\n      var XYZ = ColorConverter.Lab2XYZ(Lab);\n\n      return ColorConverter.XYZ2rgb(dependent ? XYZ : (_colors.XYZ = XYZ), dependent);\n    }\n  };\n\n  // ------------------------------------------------------ //\n  // ------------------ helper functions ------------------ //\n  // -------------------------------------------------------//\n\n  function getClosestWebColor(RGB, val) {\n    var out = {},\n      tmp = 0,\n      half = val / 2;\n\n    for (var n in RGB) {\n      tmp = RGB[n] % val; // 51 = 'web save', 17 = 'web smart'\n      out[n] = RGB[n] + (tmp > half ? val - tmp : -tmp);\n    }\n    return out;\n  }\n\n  function getHueDelta(rgb1, rgb2, nominal) {\n    var _Math = _math;\n\n    return (_Math.max(rgb1.r - rgb2.r, rgb2.r - rgb1.r) +\n      _Math.max(rgb1.g - rgb2.g, rgb2.g - rgb1.g) +\n      _Math.max(rgb1.b - rgb2.b, rgb2.b - rgb1.b)) * (nominal ? 255 : 1) / 765;\n  }\n\n  function getLuminance(rgb, normalized) {\n    var div = normalized ? 1 : 255,\n      RGB = [rgb.r / div, rgb.g / div, rgb.b / div],\n      luminance = _instance.options.luminance;\n\n    for (var i = RGB.length; i--;) {\n      RGB[i] = RGB[i] <= 0.03928 ? RGB[i] / 12.92 : _math.pow(((RGB[i] + 0.055) / 1.055), 2.4);\n    }\n    return ((luminance.r * RGB[0]) + (luminance.g * RGB[1]) + (luminance.b * RGB[2]));\n  }\n\n  function mixColors(topColor, bottomColor, topAlpha, bottomAlpha) {\n    var newColor = {},\n      alphaTop = (topAlpha !== undefined ? topAlpha : 1),\n      alphaBottom = (bottomAlpha !== undefined ? bottomAlpha : 1),\n      alpha = alphaTop + alphaBottom * (1 - alphaTop); // 1 - (1 - alphaTop) * (1 - alphaBottom);\n\n    for (var n in topColor) {\n      newColor[n] = (topColor[n] * alphaTop + bottomColor[n] * alphaBottom * (1 - alphaTop)) / alpha;\n    }\n    newColor.a = alpha;\n    return newColor;\n  }\n\n  function getWCAG2Ratio(lum1, lum2) {\n    var ratio = 1;\n\n    if (lum1 >= lum2) {\n      ratio = (lum1 + 0.05) / (lum2 + 0.05);\n    } else {\n      ratio = (lum2 + 0.05) / (lum1 + 0.05);\n    }\n    return _math.round(ratio * 100) / 100;\n  }\n\n  function limitValue(value, min, max) {\n    // return Math.max(min, Math.min(max, value)); // faster??\n    return (value > max ? max : value < min ? min : value);\n  }\n})(window);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/color/colors.js\n **/",";(function(window, undefined){\n\t\"use strict\"\n\n\t// see colorPicker.html for the following encrypted variables... will only be used in buildView()\n\tvar _html = ('^app alpha-bg-w\">^slds\">^sldl-1\">$^sldl-2\">$^sldl-3\">$^curm\">$^sldr-1\">$^sldr-2\">$^sldr-4\">$^curl\">$^curr\">$$^opacity\">|^opacity-slider\">$$$^memo\">^raster\">$^raster-bg\">$|$|$|$|$|$|$|$|$^memo-store\">$^memo-cursor\">$$^panel\">^hsv\">^hsl-mode \">$^hsv-h- \">H$^hsv-h-~ ~\">-^nsarrow\">$$^hsl-h-@ @\">H$^hsv-s- \">S$^hsv-s-~ ~\">-$^hsl-s-@ @\">S$^hsv-v- \">B$^hsv-v-~ ~\">-$^hsl-l-@ @\">L$$^hsl hide\">^hsv-mode \">$^hsl-h- \">H$^hsl-h-~ ~\">-$^hsv-h-@ @\">H$^hsl-s- \">S$^hsl-s-~ ~\">-$^hsv-s-@ @\">S$^hsl-l- \">L$^hsl-l-~ ~\">-$^hsv-v-@ @\">B$$^rgb\">^rgb-r- \">R$^rgb-r-~ ~\">-$^rgb-r-@ \">&nbsp;$^rgb-g- \">G$^rgb-g-~ ~\">-$^rgb-g-@ \">&nbsp;$^rgb-b- \">B$^rgb-b-~ ~\">-$^rgb-b-@ \">&nbsp;$$^cmyk\">^Lab-mode \">$^cmyk-c- @\">C$^cmyk-c-~ ~\">-$^Lab-L-@ @\">L$^cmyk-m- @\">M$^cmyk-m-~ ~\">-$^Lab-a-@ @\">a$^cmyk-y- @\">Y$^cmyk-y-~ ~\">-$^Lab-b-@ @\">b$^cmyk-k- @\">K$^cmyk-k-~ ~\">-$^Lab-x-@ \">&nbsp;$$^Lab hide\">^cmyk-mode \">$^Lab-L- @\">L$^Lab-L-~ ~\">-$^cmyk-c-@ @\">C$^Lab-a- @\">a$^Lab-a-~ ~\">-$^cmyk-m-@ @\">M$^Lab-b- @\">b$^Lab-b-~ ~\">-$^cmyk-y-@ @\">Y$^Lab-x- @\">&nbsp;$^Lab-x-~ ~\">-$^cmyk-k-@ @\">K$$^alpha\">^alpha- \">A$^alpha-~ ~\">-$^alpha-@ \">W$$^HEX\">^HEX- \">#$^HEX-~ ~\">-$^HEX-@ \">M$$^ctrl\">^raster\">$^cont\">$^cold\">$^col1\">|&nbsp;$$^col2\">|&nbsp;$$^bres\">RESET$^bsav\">SAVE$$$^exit\">$^resize\">$^resizer\">|$$$').\n\t\t\treplace(/\\^/g, '<div class=\"').replace(/\\$/g, '</div>').replace(/~/g, 'disp').replace(//g, 'butt').replace(/@/g, 'labl').replace(/\\|/g, '<div>'),\n\t\t_cssFunc = ('r^1,g^1,b^1,h^1,h?1,h?2,s?1,v?1,h^1,h?1,h?2,s?1,l?1,.no-rgb-r r?2,.no-rgb-r r?3,.no-rgb-r r?4,.no-rgb-g g?2,.no-rgb-g g?3,.no-rgb-g g?4,.no-rgb-b b?2,.no-rgb-b b?3,.no-rgb-b b?4{visibility:hidden}r^2,r^3,g^2,g^3,b^2,b^3{@-image:url(_patches.png)}.slds div{@-image:url(_vertical.png)}h^2,s^1,v^1,h^2,s^1,l^1{@-image:url(_horizontal.png)}s?4,v^3,s?4,l^3{@:#000}s?3,l^4{@:#fff}r?1{@-color:#f00}g?1{@-color:#0f0}b?1{@-color:#00f}r^2{@|-1664px 0}r^3{@|-896px 0}r?1,g?1,b?1,h^3,s^2,v?2-2432r?2-2944r?3-4480r?4-3202g^2h^2{@|-640px 0}g^3{@|-384px 0}g?2-4736g?3-3968g?4-3712b^2{@|-1152px 0}b^3{@|-1408px 0}b?2-3456b?3-4224b?4-2688h^2r^3b?40}h?4,h?4-1664s^1,v^1,s^1,l^1g^3{@|-256px 0}s^3,v?4,s^3,l?4-2176s?2,v^2-1920h^2{@|-768px 0}h^3,s^2,l?2-5184s?2,l^2-5824.S r^2{@|-128px -128.S r?1g?1b?1h^3s^2v?2-1408.S r?2b^3-128.S r?3-896.S r?4-256.S g^2{@|-256px -128.S g?2-1024.S g?3-640.S g?4-512.S b^2{@|-128px 0}.S b?2-384.S b?3-768.S h?4h?4-1536.S s^1v^1s^1l^1{@|-512px 0}.S s^3v?4s^3l?4-1280.S s?2v^2-1152.S h^2{@|-1024px 0}.S h^3s^2l?2-5440.S s?2l^2-5696.XXS s^2,.XXS v?2-5120.XXS s^3,.XXS v?4,.XXS s^3,.XXS l^3,.XXS l?4-5056.XXS s?2,.XXS v^2-4992.XXS s^2,.XXS l?2-5568.XXS s?2,.XXS l^2-5632').\n\t\t\treplace(//g, '{@|0 ').replace(//g, 'px}').replace(//g, ',.S ').replace(/\\|/g, '-position:').replace(/@/g, 'background').replace(//g, '.hsl-').replace(//g, '.hsv-').replace(//g, '.rgb-').replace(/~/g, ' .no-rgb-}').replace(/\\?/g, ' .sldr-').replace(/\\^/g, ' .sldl-'),\n\t\t_cssMain = ('{@#bbb;font-family:monospace, \"Courier New\", Courier, mono;font-size:12line-15font-weight:bold;cursor:default;~412323?top-left-radius:7?top--radius:7?bottom--radius:7?bottom-left-radius:7@#444}.S{~266177px}.XS{~158173px}.XXS{105~154px}.no-alpha{308px}.no-alpha .opacity,.no-alpha .alpha{display:none}.S.no-alpha{162px}.XS.no-alpha{158px}.XXS.no-alpha{90px}, div{border:none;padding:0float:none;margin:0outline:none;box-sizing:content-box} div{|absolute}^s .curm,disp,nsarrow, .exit, -cursor, .resize{image:url(_icons.png)} .do-drag div{cursor:none} .opacity, .raster-bg, .raster{image:url(_bgs.png)} ^s{~287256top:10left:10overflow:hidden;cursor:crosshair}.S ^s{~143128left:9top:9px}.XS ^s{left:7top:7px}.XXS ^s{left:5top:5px}^s div{~256256left:0px}.S ^l-1,.S ^l-2,.S ^l-3,.S ^l-4{~128128px}.XXS ^s,.XXS ^s ^l-1,.XXS ^s ^l-2,.XXS ^s ^l-3,.XXS ^s ^l-4{64px}^s ^r-1,^s ^r-2,^s ^r-3,^s ^r-4{~31left:256cursor:default}.S ^r-1,.S ^r-2,.S ^r-3,.S ^r-4{~15128left:128px}^s .curm{margin:-5~1111|-36px -30px}.light .curm{|-7px -30px}^s .curl,^s .curr{~00margin:-3px -4border:4px solid;cursor:default;left:auto;image:none}^s .curl, ^s .curl-dark,.hue-dark div.curl{:27?@   #fff}.light .curl, ^s .curl-light,.hue-light .curl{?@   #000}.S ^s .curl,.S ^s .curr{?~3px}.S ^s .curl-light,.S ^s .curl{:13px}^s .curr, ^s .curr-dark{:4?@ #fff  }.light .curr, ^s .curr-light{?@ #000  } .opacity{bottom:44left:1010~287|0 -87px}.S .opacity{bottom:27left:9~143|0 -100px}.XS .opacity{left:7bottom:25px}.XXS .opacity{left:5bottom:23px}.opacity div{~100%;16margin-top:-3overflow:hidden}.opacity .opacity-slider{margin:0 -4~08?~4?style:solid;?@#eee } {bottom:10left:10~28831@#fff}.S {15~144left:9bottom:9px}.XS {left:7bottom:7px}.XXS {left:5bottom:5px} div{|relative;float:left;~3131margin-:1px}.S  div{~1515px} .raster, .raster-bg,.S  .raster,.S  .raster-bg{|absolute;top:0:0bottom:0left:0~100%}.S  .raster-bg{|0 -31px} .raster{opacity:0.2;|0 -49px}.alpha-bg-b {@#333}.alpha-bg-b .raster{opacity:1} -cursor{|absolute;:0|-26px -87px} .light -cursor{|3px -87px}.S -cursor{|-34px -95px}.S .light -cursor{|-5px -95px} .panel{|absolute;top:10:10bottom:10~94?~1?style:solid;?@#222 #555 #555 #222;overflow:hidden;@#333}.S .panel{top:9:9bottom:9px}.XS .panel{display:none}.panel div{|relative}hsv,hsl,rgb,cmyk,Lab,alpha,.no-alpha HEX,HEX{~86margin:-1px 0px 1px 4padding:1px 0px 3?top-~1?top-style:solid;?top-@#444;?bottom-~1?bottom-style:solid;?bottom-@#222;float:hsv,hsl{padding-top:2px}.S .hsv,.S .hsl{padding-top:1px}HEX{?bottom-style:none;?top-~0margin-top:-4padding-top:0px}.no-alpha HEX{?bottom-style:none}alpha{?bottom-style:none}.S .rgb-r .hsv,.S .rgb-g .hsv,.S .rgb-b .hsv,.S .rgb-r .hsl,.S .rgb-g .hsl,.S .rgb-b .hsl,.S .hsv-h .rgb,.S .hsv-s .rgb,.S .hsv-v .rgb,.S .hsl-h .rgb,.S .hsl-s .rgb,.S .hsl-l .rgb,.S .cmyk,.S .Lab{display:none}butt,labl{float:left;~1414margin-top:2text-align:center;border:1px solid}butt{?@#555 #222 #222 #555}butt:active{@#444}labl{?@}Lab-mode,cmyk-mode,hsv-mode,hsl-mode{|absolute;:0top:150px}hsv-mode,hsl-mode{top:2px}cmyk-mode{68px}.hsl-h .hsl-h-labl,.hsl-s .hsl-s-labl,.hsl-l .hsl-l-labl,.hsv-h .hsv-h-labl,.hsv-s .hsv-s-labl,.hsv-v .hsv-v-labl{@#f90}cmyk-mode,hsv-mode,.rgb-r .rgb-r-butt,.rgb-g .rgb-g-butt,.rgb-b .rgb-b-butt,.hsv-h .hsv-h-butt,.hsv-s .hsv-s-butt,.hsv-v .hsv-v-butt,.hsl-h .hsl-h-butt,.hsl-s .hsl-s-butt,.hsl-l .hsl-l-butt,rgb-r-labl,rgb-g-labl,rgb-b-labl,alpha-butt,HEX-butt,Lab-x-labl{?@#222 #555 #555 #222;@#444}.no-rgb-r .rgb-r-labl,.no-rgb-g .rgb-g-labl,.no-rgb-b .rgb-b-labl,.mute-alpha .alpha-butt,.no-HEX .HEX-butt,.cmy-only .Lab-x-labl{?@#555 #222 #222 #555;@#333}.Lab-x-disp,.cmy-only .cmyk-k-disp,.cmy-only .cmyk-k-butt{visibility:hidden}HEX-disp{image:none}disp{float:left;~4814margin:2px 2px 0cursor:text;text-align:left;text-indent:3?~1?style:solid;?@#222 #555 #555 #222} .nsarrow{|absolute;top:0left:-13~816display:none;|-87px -23px} .start-change .nsarrow{display:block} .do-change .nsarrow{display:block;|-87px -36px}.do-change .disp{cursor:default}hide{display:none}cont,cold{|absolute;top:-5left:03border:1px solid #333}cold{z-index:1;@#c00}cont{margin-:-1z-index:2}contrast .cont{z-index:1;@#ccc}orange .cold{@#f90}green .cold{@#4d0}ctrl{|absolute;bottom:0left:0~100%;@#fff}.alpha-bg-b .ctrl,bres,bsav{@#333}col1,col2,bres,bsav{?~1?style:solid;?@#555 #222 #222 #555;float:left;~45line-28text-align:center;top:0px}.panel div div{100%}.S .ctrl div{line-25px}.S bres,.S bsav{line-26px} .exit, .resize{:3top:3~1515|0 -52px} .resize{top:auto;bottom:3cursor:nwse-resize;|-15px -52px}.S .exit{|1px -52px}.XS .resize,.XS .exit{~1010:0image:none}.XS .exit{top:0px}.XS .resize{bottom:0px} .resizer, .resizer div{|absolute;border:1px solid #888;top:-1:-1bottom:-1left:-1z-index:2;display:none;cursor:nwse-resize} .resizer div{border:1px dashed #333;opacity:0.3;display:block;@#bbb}').\n\t\t\treplace(//g, 'right').replace(//g, 'left}').replace(//g, '.app').replace(//g, '.panel .').replace(//g, 'px;').replace(/\\|/g, 'position:').replace(/@/g, 'color:').replace(//g, 'background-').replace(//g, 'height:').replace(//g, '.memo').replace(//g, 'transparent').replace(/\\~/g, 'width:').replace(/\\?/g, 'border-').replace(/\\^/g, '.sld'),\n\t\t_horizontalPng = 'iVBORw0KGgoAAAANSUhEUgAABIAAAAABCAYAAACmC9U0AAABT0lEQVR4Xu2S3Y6CMBCFhyqIsjGBO1/B9/F5DC/pK3DHhVkUgc7Zqus2DVlGU/cnQZKTjznttNPJBABA149HyRf1iN//4mIBCg0jV4In+j9xJiuihly1V/Z9X88v//kNeDXVvyO/lK+IPR76B019+1Riab3H1zkmeqerKnL+Bzwxx6PAgZxaSQU8vB62T28pxcQeRQ2sHw6GxCOWHvP78zwHAARBABOfdYtd30rwxXOEPDF+dj2+91r6vV/id3k+/brrXmaGUkqKhX3i+ffSt16HQ/dorTGZTHrs7ev7Tl7XdZhOpzc651nfsm1bRFF0YRiGaJoGs9nsQuN/xafTCXEco65rzOdzHI9HJEmCqqqwXC6x3++RZRnKssRqtUJRFFiv19jtdthutyAi5Hl+Jo9VZg7+7f3yXuvZf5c3KaXYzByb+WIzO5ymKW82G/0BNcFhO/tOuuMAAAAASUVORK5CYII=',\n\t\t_verticalPng = 'iVBORw0KGgoAAAANSUhEUgAAAAEAABfACAYAAABn2KvYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABHtJREFUeNrtnN9SqzAQxpOF1to6zuiVvoI+j6/gva/lA/kKeqUzjtX+QTi7SzSYBg49xdIzfL34+e1usoQQklCnmLwoCjImNwDQA2xRGMqNAYB+gPEH9IdCgIUA6Aem0P1fLoMQAPYNHYDoCKAv8OMHFgKgX2AjDPQDXn4t1l+gt/1fId//yWgE/hUJ+mAn8EyY5wCwXxhrbaHzn8E9iPlv79DdHxXTqciZ4KROnXRVZMF/6U2OPhcEavtAbZH1SM7wRDD7VoHZItCiyEQf4t6+MW9UOxaZybmdCGKqNrB9Eb5SfMg3wTyiagMtigTmWofiSDCOYNTSNz6sLDIoaCU9GWDd0tdhoMMsRm+r8U/EfB0GfjmLXiqzimDd0tdhoLMsI7la45+I+ToM/HIW0kfGVQTrlr7tA91kaUr//fxrKo8jUFB7VAn6AKpHJf+EKwAAAIYD/f7F7/8MVgMo7P+gBqDKr57Lf72V8x8AAMDgYIuvH4EAAAAMDQX6AACAQcI9GGMjDADA4MA/P2KlP8IEAAAYFCz6AACAgaLA8y8AAIN+CMYXoQAADA7u/UPYCAMAMDjI7z9S+SdwDFQX2C9Gh9GMEOWriz8/Pw1lWQZsi/L3R4czzP678Ve+P8f9nCv/C7hwLq99ah8NfKrU15zPB5pVcwtiJt9qGy0IfEE+jQa+Fn0VtI/fkxUPqBlEfRENeF+tqUpbGpi1iu8epwJzvV5XA4GpWC6XGz7F+/u766EgwJ+ckiTJKU3TnI6OjnI6OzvLZf6zMggt3dzckPhIoiTlSGpQ+eEsVegdz0fbCCi4fRs+Po+4yWdeDXiT+6pBSTeHple1pkz3FZ+avpyavoiPxgLN0B7yprY08PlyQTTm0+PWmkH7ynedNKraar4F/lRj1WpTtYh+ozL/cY2sAvZl0gcbZm0gSLBLvkxGoaogiy/HDXemQk2t5pUm8OAhH8/HH6e0mkJ9q9XKKQXfb07xfZnJbZrRxcVFVt6/t7e3Kc1ms5RGo1Eq5VIZuyl9fHw4k/M5xYeoKj64A7eqCt1ZeqWFVSl8NV9OTV3fmvP5qE9VmzSoEcsXpArK1UHen/hZbgL53BZSdyEXalGau/hU8TEW0u3VcoFPy3EDFrTgT+njydeZ0+l0UV7fu7u7iVzziQQmUm4iqRw4n/NxMxw4s/Mp1NSALxf4NEtQ10cjMDwSl+b+/j6hp6enVGb+jUvrn05iKobm6PboOt8vPISY5Pr6OqGXlxe3fOokoGtAbMUJZmqvYmaLQDP+sdrecOjtO/SXeH69P8Imutm5urqy9PDwYOny8tLS4+OjpfPzc0vPz8+WTk9PLb2+vlpZbCzN53NLx8fHVtYZS5PJxMoEZWWqsjKULY3HYytTi1Pex5OMldXKRVXxuLcy/20onmms3BBOxcr5qCrZtsrd45SPel8sGlOxGoGy0neynQ6VL9fsa1YtWlCrtj9G83G7PjdVush5n5q1iJWLZW6u21a1bUvbVnVzlru0pe3RdmlV1/23fZtbZv4Dx+7FBypx77kAAAAASUVORK5CYII=',\n\t\t_patchesPng = ('iVBORw0KGgo^NSUhEUgAAB4^EACAI#DdoPxz#L0UlEQVR4Xu3cQWrDQBREwR7FF8/BPR3wXktnQL+KvxfypuEhvLJXcp06d/bXd71OPt+trIw95zr33Z1bk1/fudEv79wa++7OfayZ59wrO2PBzklcGQmAZggAAOBYgAYBmpWRAGg^BGgRofAENgAAN#I0CBA6w8AG^ECABgEa/QHAI0CNDoDwAY^QIAGAVp/AMAjQI0OgPAAY^QoEGARn8AwCNAjQ+gMABg#BCgQYCmGQmABgAAEKBBgEZ/AMAjQI0PoDAAY^QoEGARn8AM^IAADQI0+gMABg#BCgQYDWHwAw^gAANAjT6A4AB^BGgQoNEfAD^C#0CtP4AgAE^EaBCgaUYCoAE#RoEKDRHwAw^gAANArT+AIAB^BGgQoNEfAAw^gQIMAjf4AgAE^EaBCg9QcAD^CBAgwCN/gBgEaBGj0BwAM^IECDAK0/AGARoEaJqRAGg^BGgRo9AcAD^CBAgwCtPwBgEaBGj0BwAD^CNAgQKM/AGARoEaP0BAAM^I0CBAoz8AG^ECABgEa/QEAAw^jQIEDrDwAY^QIAGAZpmJACaBw^RoEKD1BwAM^IECDAK0/AGARoEaPQHAAw^gQIMArT8AYBGgRo/QEAAw^jQIECjPwBgEaBGj9AQAD^CNAgQOsPABg#BAgAYBGv0BAANwCwAAGB6gYeckmpEAa^AEaBGj0BwAM^IECDAK0/AGARoEaPQHAAM^I0CBAoz8AYBGgRo/QEAAw^jQIECjPwAY^QIAGARr9AQAD^CNAgQOsPABg#BAgAYBmmYkABoAAECABgEa/QEAAw^jQIEDrDwAY^QIAGARr9AcAjQI0OgPABg#BAgAYBWn8AwCNAjQ6A8ABg#BCgQYBGfwDAI0CND6AwAG^EKBBgKYZCYAG#QoEGARn8AwCNAjQ+gMABg#BCgQYBGfwAw^gAANAjT6AwAG^EKBBgNYfAD^C#0CNPoDgAE^EaBCg0R8AM^IAADQK0/gCAAQ^RoEKBpRgKgAQAABGgQoNEfAD^C#0CtP4AgAE^EaBCg0R8AD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AGARoEaPQHAAw^gQIMArT8AYBGgRomsMAM^IAADQK0/gCAAQ^RoEKDRHwAw^gAANO7fQHwAw^gAANArT+AIAB^BGgQoNEfAGg^BGgRo9AcAD^CBAgwCtPwBgEaBGj0BwAD^RIB+Ntg5iea5AD^DAIwI0CND6AwAG^EKBBgEZ/AKAB#EaBCg0R8AM^IAADQK0/gCAAQ^RoEKDRHwAM^IECDAI3+AIAB^BGgQoPUHAAw^gQIMAjf4AYBGgRo9AcAD^CBAgwCtPwBgEaBGiakQBo^ARoEaPQHAAw^gQIMArT8AYBGgRo9AcAAw^jQIECjPwBgEaBGj9AQAD^CNAgQKM/ABg#BAgAYBGv0BAAM^I0CBA6w8AG^ECABgGaZiQAGgAAQIAGARr9AQAD^CNAgQOsPABg#BAgAYBGv0BwCNAjQ6A8AG^ECABgFafwDAI0CNDoDwAG^EKBBgEZ/AMAjQI0PoDAAY^QoEGApjkMAAM^I0CBA6w8AG^ECABgEa/QEAAw^jQsIP+AIAB^BGgQoPUHAAw^gQIMAjf4AgAE#Bea/fK+3P5/3PJOvh8t1cO4nflmQAQoAEAAF9Aw/7JHfQHAAw^gQIMArT8AYBGvwHNPoDAA0AACBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AGARoEaPQHAAw^gQIMArT8AYBGgRo9AcAAw^jQIECjPwBgEaBGj9AQAD^CNAgQNOMBEAD#I0CBAoz8AYBGgRo/QEAAw^jQIECjPwAY^QIAGARr9AQAD^CNAgQOsPABg#BAgAYBGv0BwCNAjQ6A8AG^ECABgFafwDAI0CNA0IwHQ^AjQI0OgPABg#BAgAYBWn8AwCNAjQ6A8ABg#BCgQYBGfwDAI0CND6AwAG^EKBBgEZ/AD^C#0CNPoDAAY^QoEGA1h8AM^IAADQI0DQAG^EKBBgEZ/AMAjQI0PoDAAY^QoEGA1h8AM^IAADQI0+gMABg#BCgQYDWHwAw^gAANArT+AIAB^BGgQoNEfAD^C#0CtP4AgAE^EaBCg9QcAD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAK0/AGARoEaPQHAAw^gQIMArT8AYBGgRo/QEAAw^jQIECjPwBgACDhFgC#07t9AfAD^C#0CtP4AgAE^EaBCg0R8Aa^AEaBGj0BwAM^IECDAK0/AGARoEaPQHAAM^I0CBAoz8AYBGgRo/QEAAw^jQIECjPwAY^QIAGARr9AQAD^CNAgQOsPABg#BAgAYBmmYkABoAAECABgEa/QEAAw^jQIEDrDwAY^QIAGARr9AcAjQI0OgPABg#BAgAYBWn8AwCNAjQ6A8ABg#BCgQYBGfwDAI0CND6AwAG^EKBBgKYZCYAG#QoEGARn8AwCNAjQ+gMABg#BCgQYBGfwAw^gAANAjT6AwAG^EKBBgNYfAD^C#0CNPoDgAE^EaBCg0R8AM^IAADQK0/gCAAQ^RoEKBpRgKgAQAABGgQoNEfAD^C#0CtP4AgAE^EaBCg0R8AD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AGARoEaPQHAAw^gQIMArT8AYBGgRommEAM^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AIAB^ARoEaPQHAAw^gQIMArT8AYBGgRo9AcAGgAAQICGCNBfRfNcABg#BgeICGnVvoDwAY^QIAGAVp/AMAjQI0OgPADQAAIAADQI0+gMABg#BCgQYDWHwAw^gAANAjT6A4AB^BGgQoNEfAD^C#0CtP4AgAE^EaBCg0R8AD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAE0zEgAN#gQIMAjf4AgAE^EaBCg9QcAD^CBAgwCN/gBgEaBGj0BwAM^IECDAK0/AGARoEaPQHAAM^I0CBAoz8AYBGgRo/QEAAw^jQIEDTjARAAwAACNAgQKM/AGARoEaP0BAAM^I0CBAoz8AG^ECABgEa/QEAAw^jQIEDrDwAY^QIAGARr9AcAjQI0OgPABg#BAgAYBWn8AwCNAjQNIcBYBGgRo/QEAAw^jQIECjPwBgEadtAfAD^C#0CtP4AgAE^EaBCgAQABGgAA+AO2TAbHupOgH^ABJRU5ErkJggg==').\n\t\t\treplace(//g, 'AAAAAA').replace(/\\^/g, 'AAAA').replace(/#/g, 'AAA'),\n\t\t_iconsPng = 'iVBORw0KGgoAAAANSUhEUgAAAGEAAABDCAMAAAC7vJusAAAAkFBMVEUAAAAvLy9ERERubm7///8AAAD///9EREREREREREREREQAAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8cHBwkJCQnJycoKCgpKSkqKiouLi4vLy8/Pz9AQEBCQkJDQ0NdXV1ubm58fHykpKRERERVVVUzMzPx7Ab+AAAAHXRSTlMAAAAAAAQEBQ4QGR4eIyMtLUVFVVVqapKSnJy7u9JKTggAAAFUSURBVHja7dXbUoMwEAbgSICqLYeW88F6KIogqe//dpoYZ0W4AXbv8g9TwkxmvtndZMrEwlw/F8YIRjCCEYxgBCOsFmzqGMEI28J5zzmt0Pc9rdDL0NYgMxIYC5KiKpKAzZphWtZlGm4SjlnkOV6UHeeEUx77rh/npw1dCrI9k9lnwUwF+UG9D3m4ftJJxH4SJdPtaawXcbr+tBaeFrxiur309cIv19+4ytGCU0031a5euPVigLYGqjlAqM4ShOQ+QAYQUO80AMMAAkUGGfMfR9Ul+kmvPq2QGxXKOQBAKdjUgk0t2NiCGEVP+rHT3/iCUMBT90YrPMsKsIWP3x/VolaonJEETchHCS8AYAmaUICQQwaAQnjoXgHAES7jLkEFaHO4bdq/k25HAIpgWY34FwAE5xjCffM+D2DV8B0gRsAZT7hr5gE8wdrJcU+CJqhcqQD7Cx5L7Ph4WnrKAAAAAElFTkSuQmCC',\n\t\t_bgsPng = 'iVBORw0KGgoAAAANSUhEUgAAASAAAABvCAYAAABM+h2NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABORJREFUeNrs3VtTW1UYBuCEcxAI4YydWqTWdqr1V7T/2QsvvPDCCy9qjxZbamsrhZIQUHsCEtfafpmJe8qFjpUxfZ4Zuvt2feydJvAOARZUut1u5bRerl692nV913f99/f6QxWAU6KAAAUEKCAABQQoIAAFBCggAAUEKCAABQQoIAAFBCggAAUEKCAABQQoIEABASggQAEBKCBAAQEoIEABASggQAEBKCBAAQEoIGBQC+jatWvd07zxrv9+Xx8fAQEoIEABASggQAEBKCBAAQEoIEABAQoIQAEBCghAAQEKCEABAQOk2u36kS6AAgLetwJKL29toFRM1be+QrVq3rx58//KvM8BAadGAQEKCFBAAAoIGHwnfhneZ+/Nmzf/LufzrI+AAE/BAAUEoIAABQTwztgLZt68eXvBAE/BABQQoIAAFBAweOwFM2/evL1ggKdgAAoIUEAACggYPPaCmTdv3l4wwFMwAAUEKCAABQQMHnvBzJs3by8Y4CkYgAICFBCAAgIGz4lfBQNQQMDgFlCtVisaaHV1tThubW1VInciD0U+ysdnz54N5+PKysphOnRTHsvHlN9EHo/1l5FrkV9Enoz8W87b29tTOS8vLx9EnoncjlyPvBe5EbkZeT4fU96NvBDr2znv7Ows57y0tLQVeSXy08gf5mNfPhPrjyOfrVarlcXFxZ9yfv78+bl8TPlh5LU8n/KDyOuxfj/y+VjfyHl3d/dCKv28fi/yp/m4sLDwQ+SLke9GvhT5Tinfjnw5f4/F/Pz8rZybzeZn+ZjyzVK+EfnzUr4S+Xopf9/L+fxzc3M5d1qt1hf531Mu5k/IxzGf85VYL+fefHH+RqNRrO/t7RW3L+UbkS9Hvhk5/386Kd/qW8/5duRLMV/OdyJfzNebnZ0t7t92u53v/07K9yJfiLwROT9+ef7HyOux/iDyWuSHkT+K+eLtZX9//2xer9frjyOfyY9/Wn8S86v59qT1p7Ge315zLt4RU16K19+O9YXIu5HnYn435hux3opcj9yOPB3z+5E/iPXf43y1yMX778HBQS3f3pTz+28l5bHIr2N+LN3+zszMzGHkoh/S+mHMF98XlNaP8zHd/0W/pMe943NAwKlSQIACAhQQgAICFBCAAgIUEIACAhQQgAIC/n9GqtXqYbfbHa38+RtSu32llPdqdNL6aOSj+LfxyMVekLTem39Ryr/mPDQ0NBznzXtROikPRW6W8k7k3m9rzXthOsPDw73bUuylGRkZ6cR63nvTSfko8oPIr+Pnz96P/DLW816ezujoaN6DdtyX9+P8eS9QZ2xs7Hxf7qa8Xlr/JO6Ljcjrcf6cj1P+OO+N6V1/fHz8XLz+/Tjfubh+sZcorZ+N9Ycxfybyo8ircf6fc56YmFiJ1/8l8mLk7cjzkfP92U15Ns63G+u9nPcKdWq12lQ8Xu3Ixd6f9Pd8P3UmJycnUszzL2N9LM7/anNzs9V7Q2q32395w/q7ubdH6L/KrVbrpPxlKX9Vyl+X8jel/G0pf5f/aDabvXy9tH6ztH63lDdKebOUH5Xyk1LeKuWd/ry2tlap9P125Onp6Zf9eWpq6lW3b8f6zMzM6/71er3+ppSP+u/XNN/pz41Go+sjIMBTMEABASggQAEBKCBAAQEoIEABASggQAEB/CN/CDAAw78uW9AVDw4AAAAASUVORK5CYII=';\n\n\t\twindow.ColorPicker = {\n\t\t\t_html: _html,\n\t\t\t_cssFunc: _cssFunc,\n\t\t\t_cssMain: _cssMain,\n\t\t\t_horizontalPng: _horizontalPng,\n\t\t\t_verticalPng: _verticalPng,\n\t\t\t_patchesPng: _patchesPng,\n\t\t\t_iconsPng: _iconsPng,\n\t\t\t_bgsPng: _bgsPng\n\t\t}\n})(window);\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/color/colorPicker.data.js\n **/",";(function(window, undefined){\r\n\t\"use strict\"\r\n\r\n\tvar _data = window.ColorPicker, // will be deleted in buildView() and holds:\r\n\t\t// window.ColorPicker = { // comes from colorPicker.data.js and will be overwritten.\r\n\t\t// \t_html: ..., // holds the HTML markup of colorPicker\r\n\t\t// \t_cssFunc: ..., // CSS for all the sliders\r\n\t\t// \t_cssMain: ..., // CSS of the GUI\r\n\t\t// \t_horizontalPng: ..., // horizontal background images for sliders\r\n\t\t// \t_verticalPng: ..., // vertical background images for sliders\r\n\t\t// \t_patchesPng: ..., // background images for square sliders in RGB mode\r\n\t\t// \t_iconsPng: ..., // some icon sprite images\r\n\t\t// \t_bgsPng: ..., // some more icon sprite images\r\n\t\t// }\r\n\t\t_devMode = !_data, // if no _data we assume that colorPicker.data.js is missing (for development)\r\n\t\t_isIE = false,\r\n\t\t_doesOpacity = false,\r\n\t\t// _isIE8 = _isIE && document.querySelectorAll,\r\n\r\n\t\t_valueRanges = {}, // will be assigned in initInstance() by Colors instance\r\n\t\t// _valueRanges = {\r\n\t\t// \trgb:   {r: [0, 255], g: [0, 255], b: [0, 255]},\r\n\t\t// \thsv:   {h: [0, 360], s: [0, 100], v: [0, 100]},\r\n\t\t// \thsl:   {h: [0, 360], s: [0, 100], l: [0, 100]},\r\n\t\t// \tcmyk:  {c: [0, 100], m: [0, 100], y: [0, 100], k: [0, 100]},\r\n\t\t// \tcmy:   {c: [0, 100], m: [0, 100], y: [0, 100]},\r\n\t\t// \tXYZ:   {X: [0, 100], Y: [0, 100], Z: [0, 100]},\r\n\t\t// \tLab:   {L: [0, 100], a: [-128, 127], b: [-128, 127]},\r\n\t\t// \talpha: {alpha: [0, 1]},\r\n\t\t// \tHEX:   {HEX: [0, 16777215]}\r\n\t\t// },\r\n\t\t_bgTypes = {w: 'White', b: 'Black', c: 'Custom'},\r\n\r\n\t\t_mouseMoveAction, // current mouseMove handler assigned on mouseDown\r\n\t\t_action = '', // needed for action callback; needed due to minification of javaScript\r\n\t\t_mainTarget, // target on mouseDown, might be parent element though...\r\n\t\t_valueType, // check this variable; gets missused/polutet over time\r\n\t\t_delayState = 1, // mouseMove offset (y-axis) in display elements // same here...\r\n\t\t_startCoords = {},\r\n\t\t_targetOrigin = {},\r\n\t\t_renderTimer, // animationFrame/interval variable\r\n\t\t_newData = true,\r\n\t\t// _txt = {\r\n\t\t// \tselection: document.selection || window.getSelection(),\r\n\t\t// \trange: (document.createRange ? document.createRange() : document.body.createTextRange())\r\n\t\t// },\r\n\r\n\t\t_renderVars = {}, // used only in renderAll and convertColors\r\n\t\t_cashedVars = {}, // reset in initSliders\r\n\r\n\t\t_colorPicker,\r\n\t\t_previousInstance, // only used for recycling purposes in buildView()\r\n\t\t_colorInstance = {},\r\n\t\t_colors = {},\r\n\t\t_options = {},\r\n\t\t_nodes = {},\r\n\r\n\t\t_math = Math,\r\n\r\n\t\tanimationFrame = 'AnimationFrame', // we also need this later\r\n\t\trequestAnimationFrame = 'request' + animationFrame,\r\n\t\tcancelAnimationFrame = 'cancel' + animationFrame,\r\n\t\tvendors = ['ms', 'moz', 'webkit', 'o'],\r\n\t\t\r\n\t\tColorPicker = function(options) { // as tiny as possible...\r\n\t\t\tthis.options = {\r\n\t\t\t\tcolor: 'rgba(204, 82, 37, 0.8)',\r\n\t\t\t\tmode: 'rgb-b',\r\n\t\t\t\tfps: 60, // 1000 / 60 = ~16.7ms\r\n\t\t\t\tdelayOffset: 8,\r\n\t\t\t\tCSSPrefix: 'cp-',\r\n\t\t\t\tallMixDetails: true,\r\n\t\t\t\talphaBG: 'w',\r\n\t\t\t\timagePath: ''\r\n\t\t\t\t// devPicker: false // uses existing HTML for development...\r\n\t\t\t\t// noAlpha: true,\r\n\t\t\t\t// customBG: '#808080'\r\n\t\t\t\t// size: 0,\r\n\t\t\t\t// cmyOnly: false,\r\n\t\t\t\t// initStyle: 'display: none',\r\n\r\n\t\t\t\t// memoryColors: \"'rgba(82,80,151,1)','rgba(100,200,10,0.5)','rgba(100,0,0,1)','rgba(0,0,0,1)'\"\r\n\t\t\t\t// memoryColors: [{r: 100, g: 200, b: 10, a: 0.5}] //  \r\n\r\n\t\t\t\t// opacityPositionRelative: undefined,\r\n\t\t\t\t// customCSS: undefined,\r\n\t\t\t\t// appendTo: document.body,\r\n\t\t\t\t// noRangeBackground: false,\r\n\t\t\t\t// textRight: false, ?????\r\n\t\t\t\t// noHexButton: false,\r\n\t\t\t\t// noResize: false,\r\n\r\n\t\t\t\t// noRGBr: false,\r\n\t\t\t\t// noRGBg: false,\r\n\t\t\t\t// noRGBb: false,\r\n\r\n\t\t\t\t// ------ CSSStrength: 'div.',\r\n\t\t\t\t// XYZMatrix: XYZMatrix,\r\n\t\t\t\t// XYZReference: {},\r\n\t\t\t\t// grey: grey,\r\n\t\t\t\t// luminance: luminance,\r\n\r\n\t\t\t\t// renderCallback: undefined,\r\n\t\t\t\t// actionCallback: undefined,\r\n\t\t\t\t// convertCallback: undefined,\r\n\t\t\t};\r\n\t\t\tinitInstance(this, options ||{});\r\n\t\t};\r\n\r\n\twindow.ColorPicker = ColorPicker; // export differently\r\n\tColorPicker.addEvent = addEvent;\r\n\tColorPicker.removeEvent = removeEvent;\r\n\tColorPicker.getOrigin = getOrigin;\r\n\tColorPicker.limitValue = limitValue;\r\n\tColorPicker.changeClass = changeClass;\r\n\r\n\t// ------------------------------------------------------ //\r\n\r\n\tColorPicker.prototype.setColor = function(newCol, type, alpha, forceRender) {\r\n\t\tfocusInstance(this);\r\n\t\t_valueType = true; // right cursor...\r\n\t\t// https://github.com/petkaantonov/bluebird/wiki/Optimization-killers\r\n\t\tpreRenderAll(_colorInstance.setColor.apply(_colorInstance, arguments));\r\n\t\tif (forceRender) {\r\n\t\t\tthis.startRender(true);\r\n\t\t}\r\n\t};\r\n\r\n\tColorPicker.prototype.saveAsBackground = function() {\r\n\t\tfocusInstance(this);\r\n\t\treturn saveAsBackground(true);\r\n\t};\r\n\r\n\tColorPicker.prototype.setCustomBackground = function(col) {\r\n\t\tfocusInstance(this); // needed???\r\n\t\treturn _colorInstance.setCustomBackground(col);\r\n\t};\r\n\r\n\tColorPicker.prototype.startRender = function(oneTime) {\r\n\t\tfocusInstance(this);\r\n\t\tif (oneTime) {\r\n\t\t\t_mouseMoveAction = false; // prevents window[requestAnimationFrame] in renderAll()\r\n\t\t\trenderAll();\r\n\t\t\tthis.stopRender();\r\n\t\t} else {\r\n\t\t\t_mouseMoveAction = 1;\r\n\t\t\t_renderTimer = window[requestAnimationFrame](renderAll);\r\n\t\t}\r\n\t};\r\n\r\n\tColorPicker.prototype.stopRender = function() {\r\n\t\tfocusInstance(this); // check again\r\n\t\twindow[cancelAnimationFrame](_renderTimer);\r\n\t\tif (_valueType) {\r\n\t\t\t// renderAll();\r\n\t\t\t_mouseMoveAction = 1;\r\n\t\t\tstopChange(undefined, 'external');\r\n\t\t\t// _valueType = undefined;\r\n\t\t}\r\n\t};\r\n\r\n\tColorPicker.prototype.setMode = function(mode) { // check again ... right cursor\r\n\t\tfocusInstance(this);\r\n\t\tsetMode(mode);\r\n\t\tinitSliders();\r\n\t\trenderAll();\r\n\t};\r\n\r\n\tColorPicker.prototype.destroyAll = function() { // check this again...\r\n\t\tvar html = this.nodes.colorPicker,\r\n\t\t\tdestroyReferences = function(nodes) {\r\n\t\t\tfor (var n in nodes) {\r\n\t\t\t\tif (nodes[n] && nodes[n].toString() === '[object Object]' || nodes[n] instanceof Array) {\r\n\t\t\t\t\tdestroyReferences(nodes[n]);\r\n\t\t\t\t}\r\n\t\t\t\tnodes[n] = null;\r\n\t\t\t\tdelete nodes[n];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.stopRender();\r\n\t\tinstallEventListeners(this, true);\r\n\t\tdestroyReferences(this);\r\n\t\thtml.parentNode.removeChild(html);\r\n\t\thtml = null;\r\n\t};\r\n\r\n\tColorPicker.prototype.renderMemory = function(memory) {\r\n\t\tvar memos = this.nodes.memos,\r\n\t\t\ttmp = [];\r\n\r\n\t\tif (typeof memory === 'string') { // revisit!!!\r\n\t\t\tmemory = memory.replace(/^'|'$/g, '').replace(/\\s*/, '').split('\\',\\'');\r\n\t\t}\r\n\t\tfor (var n = memos.length; n--; ) { // check again how to handle alpha...\r\n\t\t\tif (memory && typeof memory[n] === 'string') {\r\n\t\t\t\ttmp = memory[n].replace('rgba(', '').replace(')', '').split(',');\r\n\t\t\t\tmemory[n] = {r: tmp[0], g: tmp[1], b: tmp[2], a: tmp[3]}\r\n\t\t\t}\r\n\t\t\tmemos[n].style.cssText = 'background-color: ' + (memory && memory[n] !== undefined ?\r\n\t\t\t\tcolor2string(memory[n]) + ';' + getOpacityCSS(memory[n]['a'] ||1) : 'rgb(0,0,0);');\r\n\t\t}\r\n\t};\r\n\r\n\t// ------------------------------------------------------ //\r\n\r\n\tfunction initInstance(THIS, options) {\r\n\t\tvar exporter, // do something here..\r\n\t\t\tmode = '',\r\n\t\t\tCSSPrefix = '',\r\n\t\t\toptionButtons;\r\n\r\n\t\tfor (var option in options) { // deep copy ??\r\n\t\t\tTHIS.options[option] = options[option];\r\n\t\t}\r\n\t\t_isIE = document.createStyleSheet !== undefined && document.getElementById || !!window.MSInputMethodContext;\r\n\t\t_doesOpacity = typeof document.body.style.opacity !== 'undefined';\r\n\t\t_colorInstance = new Colors(THIS.options);\r\n\t\t// We transfer the responsibility to the instance of Color (to save space and memory)\r\n\t\tdelete THIS.options;\r\n\t\t_options = _colorInstance.options;\r\n\t\t_options.scale = 1;\r\n\t\tCSSPrefix = _options.CSSPrefix;\r\n\r\n\t\tTHIS.color = _colorInstance; // check this again...\r\n\t\t_valueRanges = _options.valueRanges;\r\n\t\tTHIS.nodes = _nodes = getInstanceNodes(buildView(THIS), THIS); // ha, ha,... make this different\r\n\t\tsetMode(_options.mode);\r\n\t\tfocusInstance(THIS);\r\n\t\tsaveAsBackground();\r\n\r\n\t\tmode = ' ' + _options.mode.type + '-' + _options.mode.z;\r\n\t\t_nodes.slds.className += mode;\r\n\t\t_nodes.panel.className += mode;\r\n\t\t//_nodes.colorPicker.className += ' cmy-' + _options.cmyOnly;\r\n\r\n\t\tif (_options.noHexButton) {\r\n\t\t\tchangeClass(_nodes.HEX_butt, CSSPrefix + 'butt', CSSPrefix + 'labl');\r\n\t\t}\r\n\r\n\t\tif (_options.size !== undefined) {\r\n\t\t\tresizeApp(undefined, _options.size);\r\n\t\t}\r\n\r\n\t\toptionButtons = {\r\n\t\t\talphaBG: _nodes.alpha_labl,\r\n\t\t\tcmyOnly: _nodes.HEX_labl // test... take out\r\n\t\t};\r\n\t\tfor (var n in optionButtons) {\r\n\t\t\tif (_options[n] !== undefined) {\r\n\t\t\t\tbuttonActions({target: optionButtons[n], data: _options[n]});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_options.noAlpha) {\r\n\t\t\t_nodes.colorPicker.className += ' no-alpha'; // IE6 ??? maybe for IE6 on document.body\r\n\t\t}\r\n\r\n\t\tTHIS.renderMemory(_options.memoryColors);\r\n\r\n\t\tinstallEventListeners(THIS);\r\n\t\t\r\n\t\t_mouseMoveAction = true;\r\n\t\tstopChange(undefined, 'init');\r\n\r\n\t\tif (_previousInstance) {\r\n\t\t\tfocusInstance(_previousInstance);\r\n\t\t\trenderAll();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction focusInstance(THIS) {\r\n\t\t_newData = true;\r\n\t\tif (_colorPicker !== THIS) {\r\n\t\t\t_colorPicker = THIS;\r\n\t\t\t_colors = THIS.color.colors;\r\n\t\t\t_options = THIS.color.options;\r\n\t\t\t_nodes = THIS.nodes;\r\n\t\t\t_colorInstance = THIS.color;\r\n\r\n\t\t\t_cashedVars = {};\r\n\t\t\tpreRenderAll(_colors);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getUISizes() {\r\n\t\tvar sizes = ['L', 'S', 'XS', 'XXS'];\r\n\t\t_options.sizes = {};\r\n\t\t_nodes.testNode.style.cssText = 'position:absolute;left:-1000px;top:-1000px;';\r\n\t\tdocument.body.appendChild(_nodes.testNode);\r\n\t\tfor (var n = sizes.length; n--; ) {\r\n\t\t\t_nodes.testNode.className = _options.CSSPrefix + 'app ' + sizes[n];\r\n\t\t\t_options.sizes[sizes[n]] = [_nodes.testNode.offsetWidth, _nodes.testNode.offsetHeight];\r\n\t\t}\r\n\t\tif (_nodes.testNode.removeNode) { // old IEs\r\n\t\t\t_nodes.testNode.removeNode(true);\r\n\t\t} else {\r\n\t\t\tdocument.body.removeChild(_nodes.testNode);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildView(THIS) {\r\n\t\tvar app = document.createElement('div'),\r\n\t\t\tprefix = _options.CSSPrefix,\r\n\t\t\turlData = 'data:image/png;base64,',\r\n\t\t\taddStyleSheet = function(cssText, id) {\r\n\t\t\t\tvar style = document.createElement('style');\r\n\r\n\t\t\t\tstyle.setAttribute('type', 'text/css');\r\n\t\t\t\tif (id) {\r\n\t\t\t\t\tstyle.setAttribute('id', id);\r\n\t\t\t\t}\r\n\t\t\t\tif (!style.styleSheet) {\r\n\t\t\t\t\tstyle.appendChild(document.createTextNode(cssText));\r\n\t\t\t\t}\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(style);\r\n\t\t\t\tif (style.styleSheet) { // IE compatible\r\n\t\t\t\t\tdocument.styleSheets[document.styleSheets.length-1].cssText = cssText;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tprocessCSS = function(doesBAS64){\r\n\t\t\t\t// CSS - system\r\n\t\t\t\t_data._cssFunc = _data._cssFunc.\r\n\t\t\t\t\treplace(//g, prefix).\r\n\t\t\t\t\treplace('_patches.png', doesBAS64 ? urlData + _data._patchesPng : _options.imagePath + '_patches.png').\r\n\t\t\t\t\treplace('_vertical.png', doesBAS64 ? urlData + _data._verticalPng : _options.imagePath + '_vertical.png').\r\n\t\t\t\t\treplace('_horizontal.png', doesBAS64 ? urlData + _data._horizontalPng :\r\n\t\t\t\t\t\t_options.imagePath + '_horizontal.png');\r\n\t\t\t\taddStyleSheet(_data._cssFunc, 'colorPickerCSS');\r\n\t\t\t\t// CSS - main\r\n\t\t\t\tif (!_options.customCSS) {\r\n\t\t\t\t\t_data._cssMain = _data._cssMain.\r\n\t\t\t\t\t\treplace(//g, prefix).\r\n\t\t\t\t\t\treplace('_bgs.png', doesBAS64 ? urlData + _data._bgsPng : _options.imagePath + '_bgs.png').\r\n\t\t\t\t\t\treplace('_icons.png', doesBAS64 ? urlData + _data._iconsPng : _options.imagePath + '_icons.png').\r\n\t\t\t\t\t\t// replace('\"Courier New\",', !_isIE ? '' : '\"Courier New\",').\r\n\t\t\t\t\t\treplace(/opacity:(\\d*\\.*(\\d+))/g, function($1, $2){\r\n\t\t\t\t\t\t\treturn !_doesOpacity ? '-ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=' +\r\n\t\t\t\t\t\t\t_math.round(+$2 * 100) + ')\";filter: alpha(opacity=' + _math.round(+$2 * 100) + ')' :\r\n\t\t\t\t\t\t\t'-moz-opacity: ' + $2 + '; -khtml-opacity: ' + $2 + '; opacity: ' + $2;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t// style.appendChild(document.createTextNode(_data._cssFunc));\r\n\t\t\t\t\taddStyleSheet(_data._cssMain);\r\n\t\t\t\t}\r\n\t\t\t\t// for (var n in _data) { // almost 25k of memory ;o)\r\n\t\t\t\t// \t_data[n] = null;\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\t\t\ttest = document.createElement('img');\r\n\r\n\t\t// development mode\r\n\t\tif (_devMode) {\r\n\t\t\treturn THIS.color.options.devPicker;\r\n\t\t}\r\n\r\n\t\t// CSS\r\n\t\tif (!document.getElementById('colorPickerCSS')) { // only once needed\r\n\t\t\ttest.onload = test.onerror = function(){\r\n\t\t\t\tif (_data._cssFunc) {\r\n\t\t\t\t\tprocessCSS(this.width === 1 && this.height === 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\ttest.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\r\n\t\t}\r\n\r\n\t\t// HTML\r\n\t\tif (_previousInstance = _colorPicker) {\r\n\t\t\t// we need to be careful with recycling HTML as slider calssNames might have been changed...\r\n\t\t\tinitSliders();\r\n\t\t}\r\n\t\t// app.innerHTML = _colorPicker ? _colorPicker.nodes.colorPicker.outerHTML : _data._html.replace(//g, prefix);\r\n\t\t// faster ... FF8.0 (2011) though (but IE4)\r\n\t\t// outerHTML ... FF11 (2013)\r\n\t\tapp.insertAdjacentHTML('afterbegin',\r\n\t\t\t_colorPicker ? _colorPicker.nodes.colorPicker.outerHTML ||\r\n\t\t\t\tnew XMLSerializer().serializeToString(_colorPicker.nodes.colorPicker) : // FF before F11\r\n\t\t\t\t_data._html.replace(//g, prefix));\r\n\t\t\t// _colorPicker ? _colorPicker.nodes.colorPicker.parentNode.innerHTML : _data._html.replace(//g, prefix));\r\n\t\t// _data._html = null;\r\n\r\n\t\tapp = app.children[0];\r\n\t\tapp.style.cssText = _options.initStyle || ''; // for initial hiding...\r\n\t\t// get a better addClass for this....\r\n\t\t// app.className = app.className.split(' ')[0]; // cleanup for multy instances\r\n\r\n\t\treturn (_options.appendTo || document.body).appendChild(app);\r\n\t}\r\n\r\n\tfunction getInstanceNodes(colorPicker, THIS) { // check nodes again... are they all needed?\r\n\t\tvar all = colorPicker.getElementsByTagName('*'),\r\n\t\t\tnodes = {colorPicker: colorPicker}, // length ?? // rename nodes.colorPicker\r\n\t\t\tnode,\r\n\t\t\tclassName,\r\n\t\t\tmemoCounter = 0,\r\n\t\t\tregexp = new RegExp(_options.CSSPrefix);\r\n\r\n\t\t// nodes.displayStyles = {}; // not needed ... or change to CSS\r\n\t\tnodes.styles = {};\r\n\t\t// nodes.styles.displays = {};\r\n\r\n\t\tnodes.textNodes = {};\r\n\t\tnodes.memos = [];\r\n\t\tnodes.testNode = document.createElement('div');\r\n\r\n\t\tfor (var n = 0, m = all.length; n < m; n++) {\r\n\t\t\tnode = all[n];\r\n\t\t\tif ((className = node.className) && regexp.test(className)) {\r\n\t\t\t\tclassName = className.split(' ')[0].replace(_options.CSSPrefix, '').replace(/-/g, '_');\r\n\t\t\t\tif (/_disp/.test(className)) {\r\n\t\t\t\t\tclassName = className.replace('_disp', '');\r\n\t\t\t\t\t// nodes.styles.displays[className] = node.style;\r\n\t\t\t\t\tnodes.styles[className] = node.style;\r\n\t\t\t\t\tnodes.textNodes[className] = node.firstChild;\r\n\t\t\t\t\tnode.contentEditable = true; // does this slow down rendering??\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!(/(?:hs|cmyk|Lab).*?(?:butt|labl)/.test(className))) {\r\n\t\t\t\t\t\tnodes[className] = node;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (/(?:cur|sld[^s]|opacity|cont|col)/.test(className)) {\r\n\t\t\t\t\t\tnodes.styles[className] = /(?:col\\d)/.test(className) ? node.children[0].style : node.style;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (/memo/.test(node.parentNode.className)) {\r\n\t\t\t\tnodes.memos.push(node);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Chrome bug: focuses contenteditable on mouse over while dragging\r\n\t\tnodes.panelCover = nodes.panel.appendChild(document.createElement('div'));\r\n\r\n\t\treturn nodes;\r\n\t}\r\n\r\n\t// ------------------------------------------------------ //\r\n\t// ---- Add event listners to colorPicker and window ---- //\r\n\t// -------------------------------------------------------//\r\n\r\n\tfunction installEventListeners(THIS, off) {\r\n\t\tvar onOffEvent = off ? removeEvent : addEvent;\r\n\r\n\t\tonOffEvent(_nodes.colorPicker, 'mousedown', function(e) {\r\n\t\t\tvar event = e || window.event,\r\n\t\t\t\tpage = getPageXY(event),\r\n\t\t\t\ttarget = (event.button || event.which) < 2 ?\r\n\t\t\t\t\t(event.target || event.srcElement) : {},\r\n\t\t\t\tclassName = target.className;\r\n\r\n\t\t\tfocusInstance(THIS);\r\n\t\t\t_mainTarget = target;\r\n\t\t\tstopChange(undefined, 'resetEventListener');\r\n\t\t\t_action = ''; // needed due to minification of javaScript\r\n\r\n\t\t\tif (target === _nodes.sldl_3 || target === _nodes.curm) {\r\n\t\t\t\t_mainTarget = _nodes.sldl_3;\r\n\t\t\t\t_mouseMoveAction = changeXYValue;\r\n\t\t\t\t_action = 'changeXYValue';\r\n\t\t\t\tchangeClass(_nodes.slds, 'do-drag');\r\n\t\t\t} else if (/sldr/.test(className) || target === _nodes.curl || target === _nodes.curr) {\r\n\t\t\t\t_mainTarget = _nodes.sldr_4;\r\n\t\t\t\t_mouseMoveAction = changeZValue;\r\n\t\t\t\t_action = 'changeZValue';\r\n\t\t\t} else if (target === _nodes.opacity.children[0] || target === _nodes.opacity_slider) {\r\n\t\t\t\t_mainTarget = _nodes.opacity;\r\n\t\t\t\t_mouseMoveAction = changeOpacityValue;\r\n\t\t\t\t_action = 'changeOpacityValue';\r\n\t\t\t} else if (/-disp/.test(className) && !/HEX-/.test(className)) {\r\n\t\t\t\t_mouseMoveAction = changeInputValue;\r\n\t\t\t\t_action = 'changeInputValue';\r\n\t\t\t\t(target.nextSibling.nodeType === 3 ? target.nextSibling.nextSibling : target.nextSibling).\r\n\t\t\t\t\tappendChild(_nodes.nsarrow); // nextSibling for better text selection\r\n\t\t\t\t_valueType = className.split('-disp')[0].split('-');\r\n\t\t\t\t_valueType = {type: _valueType[0], z: _valueType[1] || ''};\r\n\t\t\t\tchangeClass(_nodes.panel, 'start-change');\r\n\t\t\t\t_delayState = 0;\r\n\t\t\t} else if (target === _nodes.resize && !_options.noResize) {\r\n\t\t\t\tif (!_options.sizes) {\r\n\t\t\t\t\tgetUISizes();\r\n\t\t\t\t}\r\n\t\t\t\t_mainTarget = _nodes.resizer;\r\n\t\t\t\t_mouseMoveAction = resizeApp;\r\n\t\t\t\t_action = 'resizeApp';\r\n\t\t\t} else {\r\n\t\t\t\t_mouseMoveAction = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (_mouseMoveAction) {\r\n\t\t\t\t_startCoords = {pageX: page.X, pageY: page.Y};\r\n\t\t\t\t_mainTarget.style.display = 'block'; // for resizer...\r\n\t\t\t\t_targetOrigin = getOrigin(_mainTarget);\r\n\t\t\t\t_targetOrigin.width = _nodes.opacity.offsetWidth; // ???????\r\n\t\t\t\t_targetOrigin.childWidth = _nodes.opacity_slider.offsetWidth; // ???????\r\n\t\t\t\t_mainTarget.style.display = ''; // ??? for resizer...\r\n\t\t\t\t_mouseMoveAction(event);\r\n\t\t\t\taddEvent(_isIE ? document.body : window, 'mousemove', _mouseMoveAction);\r\n\t\t\t\t_renderTimer = window[requestAnimationFrame](renderAll);\r\n\t\t\t} else {\r\n\t\t\t\t// console.log(className)\r\n\t\t\t\t// console.log(THIS.nodes[className.split(' ')[0].replace('cp-', '').replace('-', '_')])\r\n\t\t\t\t// resize, button states, etc...\r\n\t\t\t}\r\n\r\n\t\t\t// if (_mouseMoveAction !== changeInputValue) preventDefault(event);\r\n\t\t\tif (!/-disp/.test(className)) {\r\n\t\t\t\treturn preventDefault(event);\r\n\t\t\t\t// document.activeElement.blur();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tonOffEvent(_nodes.colorPicker, 'click', function(e) {\r\n\t\t\tfocusInstance(THIS);\r\n\t\t\tbuttonActions(e);\r\n\t\t});\r\n\r\n\t\tonOffEvent(_nodes.colorPicker, 'dblclick', buttonActions);\r\n\r\n\t\tonOffEvent(_nodes.colorPicker, 'keydown', function(e) {\r\n\t\t\tfocusInstance(THIS);\r\n\t\t\tkeyControl(e);\r\n\t\t});\r\n\r\n\t\t// keydown is before keypress and focuses already\r\n\t\tonOffEvent(_nodes.colorPicker, 'keypress', keyControl);\r\n\t\t// onOffEvent(_nodes.colorPicker, 'keyup', keyControl);\r\n\r\n\t\tonOffEvent(_nodes.colorPicker, 'paste', function(e) {\r\n\t\t\te.target.firstChild.data = e.clipboardData.getData('Text');\r\n\t\t\treturn preventDefault(e);\r\n\t\t});\r\n\t}\r\n\r\n\taddEvent(_isIE ? document.body : window, 'mouseup', stopChange);\r\n\r\n\t// ------------------------------------------------------ //\r\n\t// --------- Event listner's callback functions  -------- //\r\n\t// -------------------------------------------------------//\r\n\r\n\tfunction stopChange(e, action) {\r\n\t\tvar mouseMoveAction = _mouseMoveAction;\r\n\r\n\t\tif (_mouseMoveAction) { // why??? please test again...\r\n\t\t\t// if (document.selection && _mouseMoveAction !== changeInputValue) {\r\n\t\t\t// \t//ie -> prevent showing the accelerator menu\r\n\t\t\t// \tdocument.selection.empty();\r\n\t\t\t// }\r\n\t\t\twindow[cancelAnimationFrame](_renderTimer);\r\n\t\t\tremoveEvent(_isIE ? document.body : window, 'mousemove', _mouseMoveAction);\r\n\t\t\tif (_delayState) { // hapens on inputs\r\n\t\t\t\t_valueType = {type: 'alpha'};\r\n\t\t\t\trenderAll();\r\n\t\t\t}\r\n\t\t\t// this is dirty... has to do with M|W|! button\r\n\t\t\tif (typeof _mouseMoveAction === 'function' || typeof _mouseMoveAction === 'number') {\r\n\t\t\t\tdelete _options.webUnsave;\r\n\t\t\t}\r\n\r\n\t\t\t_delayState = 1;\r\n\t\t\t_mouseMoveAction = undefined;\r\n\r\n\t\t\tchangeClass(_nodes.slds, 'do-drag', '');\r\n\t\t\tchangeClass(_nodes.panel, '(?:start-change|do-change)', '');\r\n\r\n\t\t\t_nodes.resizer.style.cssText = '';\r\n\t\t\t_nodes.panelCover.style.cssText = '';\r\n\r\n\t\t\t_nodes.memo_store.style.cssText = 'background-color: ' +\r\n\t\t\t\tcolor2string(_colors.RND.rgb) + '; ' + getOpacityCSS(_colors.alpha);\r\n\t\t\t_nodes.memo.className = _nodes.memo.className.replace(/\\s+(?:dark|light)/, '') +\r\n\t\t\t\t// (/dark/.test(_nodes.colorPicker.className) ? ' dark' : ' light');\r\n\t\t\t\t(_colors['rgbaMix' + _bgTypes[_options.alphaBG]].luminance < 0.22 ? ' dark' : ' light');\r\n\t\t\t\t// (_colors.rgbaMixCustom.luminance < 0.22 ? ' dark' : ' light')\r\n\r\n\t\t\t_valueType = undefined;\r\n\r\n\t\t\tresetCursors();\r\n\r\n\t\t\tif (_options.actionCallback) {\r\n\t\t\t\t_options.actionCallback(e, _action || mouseMoveAction.name || action || 'external');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction changeXYValue(e) {\r\n\t\tvar event = e || window.event,\r\n\t\t\tscale = _options.scale,\r\n\t\t\tpage = getPageXY(event),\r\n\t\t\tx = (page.X - _targetOrigin.left) * (scale === 4 ? 2 : scale),\r\n\t\t\ty = (page.Y - _targetOrigin.top) * scale,\r\n\t\t\tmode = _options.mode;\r\n\r\n\t\t_colors[mode.type][mode.x] = limitValue(x / 255, 0, 1);\r\n\t\t_colors[mode.type][mode.y] = 1 - limitValue(y / 255,  0, 1);\r\n\t\tconvertColors();\r\n\t\treturn preventDefault(event);\r\n\t}\r\n\r\n\tfunction changeZValue(e) { // make this part of changeXYValue\r\n\t\tvar event = e || window.event,\r\n\t\t\tpage = getPageXY(event),\r\n\t\t\tz = (page.Y - _targetOrigin.top) * _options.scale,\r\n\t\t\tmode = _options.mode;\r\n\r\n\t\t_colors[mode.type][mode.z] = 1 - limitValue(z / 255,  0, 1);\r\n\t\tconvertColors();\r\n\t\treturn preventDefault(event);\r\n\t}\r\n\r\n\tfunction changeOpacityValue(e) {\r\n\t\tvar event = e || window.event,\r\n\t\t\tpage = getPageXY(event);\r\n\r\n\t\t_newData = true;\r\n\t\t_colors.alpha = limitValue(_math.round(\r\n\t\t\t(page.X - _targetOrigin.left) / _targetOrigin.width * 100), 0, 100\r\n\t\t) / 100;\r\n\t\tconvertColors('alpha');\r\n\t\treturn preventDefault(event);\r\n\t}\r\n\r\n\tfunction changeInputValue(e) {\r\n\t\tvar event = e || window.event,\r\n\t\t\tpage = getPageXY(event),\r\n\t\t\tdelta = _startCoords.pageY - page.Y,\r\n\t\t\tdelayOffset = _options.delayOffset,\r\n\t\t\ttype = _valueType.type,\r\n\t\t\tisAlpha = type === 'alpha',\r\n\t\t\tranges;\r\n\r\n\t\tif (_delayState || _math.abs(delta) >= delayOffset) {\r\n\t\t\tif (!_delayState) {\r\n\t\t\t\t_delayState = (delta > 0 ? -delayOffset : delayOffset) +\r\n\t\t\t\t\t(+_mainTarget.firstChild.data) * (isAlpha ? 100 : 1);\r\n\t\t\t\t_startCoords.pageY += _delayState;\r\n\t\t\t\tdelta += _delayState;\r\n\t\t\t\t_delayState = 1;\r\n\t\t\t\tchangeClass(_nodes.panel, 'start-change', 'do-change');\r\n\t\t\t\t_nodes.panelCover.style.cssText = 'position:absolute;left:0;top:0;right:0;bottom:0';\r\n\t\t\t\t// window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();\r\n\t\t\t\tdocument.activeElement.blur();\r\n\t\t\t\t_renderTimer = window[requestAnimationFrame](renderAll);\r\n\t\t\t}\r\n\r\n\t\t\tif (type === 'cmyk' && _options.cmyOnly) {\r\n\t\t\t\ttype = 'cmy';\r\n\t\t\t}\r\n\r\n\t\t\tif (isAlpha) {\r\n\t\t\t\t_newData = true;\r\n\t\t\t\t_colors.alpha = limitValue(delta / 100, 0, 1);\r\n\t\t\t} else {\r\n\t\t\t\tranges = _valueRanges[type][_valueType.z];\r\n\t\t\t\t_colors[type][_valueType.z] = type === 'Lab' ? limitValue(delta, ranges[0], ranges[1]) :\r\n\t\t\t\t\tlimitValue(delta / ranges[1], 0, 1);\r\n\t\t\t}\r\n\t\t\tconvertColors(isAlpha ? 'alpha' : type);\r\n\t\t\t// event.returnValue is deprecated. Please use the standard event.preventDefault() instead.\r\n\t\t\t// event.returnValue = false; // see: pauseEvent(event);\r\n\t\t\treturn preventDefault(event);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction keyControl(e) { // this is quite big for what it does...\r\n\t\tvar event = e || window.event,\r\n\t\t\tkeyCode =  event.which || event.keyCode,\r\n\t\t\tkey = String.fromCharCode(keyCode),\r\n\t\t\telm = document.activeElement,\r\n\r\n\t\t\tcln = elm.className.replace(_options.CSSPrefix, '').split('-'),\r\n\t\t\ttype = cln[0],\r\n\t\t\tmode = cln[1],\r\n\r\n\t\t\tisAlpha = type === 'alpha',\r\n\t\t\tisHex = type === 'HEX',\r\n\t\t\tarrowKey = {k40: -1, k38: 1, k34: -10, k33: 10}['k' + keyCode] / (isAlpha ? 100 : 1),\r\n\t\t\tvalidKeys = {'HEX': /[0-9a-fA-F]/, 'Lab': /[\\-0-9]/, 'alpha': /[\\.0-9]/}[type] || /[0-9]/,\r\n\t\t\tvalueRange = _valueRanges[type][type] || _valueRanges[type][mode], // let op!\r\n\r\n\t\t\ttextNode = elm.firstChild, // chnge on TAB key\r\n\t\t\trangeData = caret(elm),\r\n\t\t\torigValue = textNode.data, // do not change\r\n\t\t\tvalue,\r\n\t\t\tval = origValue === '0' && !isHex ? [] : origValue.split(''); // gefixt\r\n\r\n\t\tif (/^(?:27|13)$/.test(keyCode)) { // ENTER || ESC\r\n\t\t\tpreventDefault(event);\r\n\t\t\telm.blur();\r\n\t\t} else if (event.type === 'keydown') { // functional keys\r\n\t\t\tif (arrowKey) { // arrow/page keys\r\n\t\t\t\tvalue = limitValue(_math.round((+origValue + arrowKey) * 1e+6) / 1e+6, valueRange[0], valueRange[1]);\r\n\t\t\t} else if (/^(?:8|46)$/.test(keyCode)) { // DELETE / BACKSPACE\r\n\t\t\t\tif (!rangeData.range) {\r\n\t\t\t\t\trangeData.range++;\r\n\t\t\t\t\trangeData.start -= keyCode === 8 ? 1 : 0;\r\n\t\t\t\t}\r\n\t\t\t\tval.splice(rangeData.start, rangeData.range);\r\n\t\t\t\tvalue = val.join('') || '0'; // never loose elm.firstChild\r\n\t\t\t}\r\n\r\n\t\t\tif (value !== undefined) { // prevent keypress\r\n\t\t\t\tpreventDefault(event, true);\r\n\t\t\t}\r\n\t\t} else if (event.type === 'keypress') {\r\n\t\t\tif (!/^(?:37|39|8|46|9)$/.test(keyCode)) { // left, right,DEL, BACK, TAB for FF\r\n\t\t\t\tpreventDefault(event, true);\r\n\t\t\t}\r\n\t\t\tif (validKeys.test(key)) { // regular input\r\n\t\t\t\tval.splice(rangeData.start, rangeData.range, key);\r\n\t\t\t\tvalue = val.join('');\r\n\t\t\t}\r\n\t\t\trangeData.start++;\r\n\t\t}\r\n\r\n\t\tif (keyCode === 13 && isHex) {\r\n\t\t\tif (textNode.data.length % 3 === 0 || textNode.data === '0') { // textNode.data.length && \r\n\t\t\t\treturn _colorPicker.setColor(textNode.data === '0' ? '000' : textNode.data, 'rgb', _colors.alpha, true);\r\n\t\t\t} else {\r\n\t\t\t\tpreventDefault(event, true);\r\n\t\t\t\treturn elm.focus();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isHex && value !== undefined) {\r\n\t\t\tvalue = /^0+/.test(value) ? value : parseInt(''+value, 16) || 0;\r\n\t\t}\r\n\r\n\t\tif (value !== undefined && value !== '' && +value >= valueRange[0] && +value <= valueRange[1]) {\r\n\t\t\tif (isHex) {\r\n\t\t\t\tvalue = value.toString(16).toUpperCase() || '0';\r\n\t\t\t}\r\n\t\t\tif (isAlpha) {\r\n\t\t\t\t_colors[type] = +value;\r\n\t\t\t} else if (!isHex) {\r\n\t\t\t\t_colors[type][mode] = +value / (type === 'Lab' ? 1 : valueRange[1]);\r\n\t\t\t}\r\n\t\t\tconvertColors(isAlpha ? 'alpha' : type);\r\n\r\n\t\t\tpreRenderAll(_colors);\r\n\t\t\t_mouseMoveAction = true;\r\n\t\t\tstopChange(e, event.type);\r\n\r\n\t\t\ttextNode.data = value; // if \r\n\t\t\tcaret(elm, _math.min(elm.firstChild.data.length, rangeData.start < 0 ? 0 : rangeData.start));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buttonActions(e) {\r\n\t\tvar event = e || window.event,\r\n\t\t\ttarget = event.target || event.srcElement,\r\n\t\t\ttargetClass = target.className,\r\n\t\t\tparent = target.parentNode,\r\n\t\t\toptions = _options,\r\n\t\t\tRGB = _colors.RND.rgb,\r\n\t\t\tcustomBG, alphaBG,\r\n\t\t\tmode = _options.mode,\r\n\t\t\tnewMode = '',\r\n\t\t\tprefix = options.CSSPrefix,\r\n\t\t\tisModeButton = /(?:hs|rgb)/.test(parent.className) && /^[HSBLRG]$/.test(\r\n\t\t\t\ttarget.firstChild ? target.firstChild.data : ''\r\n\t\t\t),\r\n\t\t\tisDblClick = /dblc/.test(event.type),\r\n\t\t\tbuttonAction = ''; // think this over again....\r\n\r\n\t\tif (isDblClick && !isModeButton) {\r\n\t\t\treturn;\r\n\t\t} else if (targetClass.indexOf('-labl ' + prefix + 'labl') !== -1) { // HSB -> HSL; CMYK -> Lab buttons\r\n\t\t\tchangeClass(_nodes[targetClass.split('-')[0]], prefix + 'hide', '');\r\n\t\t\tchangeClass(_nodes[parent.className.split('-')[1]], prefix + 'hide');\r\n\t\t} else if (targetClass.indexOf(prefix + 'butt') !== -1) { // BUTTONS\r\n\t\t\tif (isModeButton) { // set render modes\r\n\t\t\t\tif (isDblClick && _options.scale === 2) {\r\n\t\t\t\t\tnewMode = /hs/.test(mode.type) ? 'rgb' : /hide/.test(_nodes.hsl.className) ? 'hsv' : 'hsl';\r\n\t\t\t\t\tnewMode = newMode + '-' + newMode[mode.type.indexOf(mode.z)];\r\n\t\t\t\t}\r\n\t\t\t\t_colorPicker.setMode(newMode ? newMode : targetClass.replace('-butt', '').split(' ')[0]);\r\n\t\t\t\tbuttonAction = 'modeChange';\r\n\t\t\t} else if (/^[rgb]/.test(targetClass)) { // no vertical slider rendering in RGB mode\r\n\t\t\t\tnewMode = targetClass.split('-')[1];\r\n\t\t\t\tchangeClass(_nodes.colorPicker, 'no-rgb-' + newMode,\r\n\t\t\t\t\t(options['noRGB' + newMode] = !options['noRGB' + newMode]) ? undefined : '');\r\n\t\t\t\tbuttonAction = 'noRGB' + newMode;\r\n\t\t\t\t// preRenderAll();\r\n\t\t\t} else if (target === _nodes.alpha_labl) { // alpha button right (background of raster)\r\n\t\t\t\tcustomBG = options.customBG;\r\n\t\t\t\talphaBG = options.alphaBG;\r\n\t\t\t\tchangeClass(_nodes.colorPicker, 'alpha-bg-' + alphaBG, 'alpha-bg-' +\r\n\t\t\t\t\t(alphaBG = options.alphaBG = e.data || (alphaBG === 'w' ? (customBG ? 'c' : 'b') :\r\n\t\t\t\t\talphaBG === 'c' ? 'b' : 'w')));\r\n\t\t\t\ttarget.firstChild.data = alphaBG.toUpperCase();\r\n\t\t\t\t_nodes.ctrl.style.backgroundColor = _nodes.memo.style.backgroundColor =\r\n\t\t\t\t\talphaBG !== 'c' ? '' : 'rgb(' + _math.round(customBG.r * 255) + ', ' +\r\n\t\t\t\t\t_math.round(customBG.g * 255) + ', ' +\r\n\t\t\t\t\t_math.round(customBG.b * 255) + ')';\r\n\t\t\t\t_nodes.raster.style.cssText = _nodes.raster_bg.previousSibling.style.cssText =\r\n\t\t\t\t\talphaBG !== 'c' ? '' : getOpacityCSS(customBG.luminance < 0.22 ? 0.5 : 0.4);\r\n\t\t\t\tbuttonAction = 'alphaBackground';\r\n\t\t\t} else if (target === _nodes.alpha_butt) { // alpha button left (disable alpha rendering)\r\n\t\t\t\tchangeClass(_nodes.colorPicker, 'mute-alpha', (options.muteAlpha = !options.muteAlpha) ? undefined : '');\r\n\t\t\t\tbuttonAction = 'alphaState';\r\n\t\t\t} else if (target === _nodes.HEX_butt) { // make it on/off\r\n\t\t\t\tchangeClass(_nodes.colorPicker, 'no-HEX', (options.HEXState = !options.HEXState) ? undefined : '');\r\n\t\t\t\tbuttonAction = 'HEXState';\r\n\t\t\t} else if (target === _nodes.HEX_labl) { // web save state change\r\n\t\t\t\tvar isWebSave = _colors.saveColor === 'web save';\r\n\r\n\t\t\t\tif (_colors.saveColor !== 'web smart' && !isWebSave) {\r\n\t\t\t\t\toptions.webUnsave = copyColor(RGB);\r\n\t\t\t\t\t_colorPicker.setColor(_colors.webSmart, 'rgb');\r\n\t\t\t\t} else if (!isWebSave) {\r\n\t\t\t\t\tif (!options.webUnsave) {\r\n\t\t\t\t\t\toptions.webUnsave = copyColor(RGB);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_colorPicker.setColor(_colors.webSave, 'rgb');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_colorPicker.setColor(options.webUnsave, 'rgb');\r\n\t\t\t\t}\r\n\t\t\t\tbuttonAction = 'webColorState';\r\n\t\t\t} else if (/Lab-x-labl/.test(targetClass)) { //target === _nodes.cmyk_type) {\r\n\t\t\t\t// switch between CMYK and CMY\r\n\t\t\t\tchangeClass(_nodes.colorPicker, 'cmy-only', (options.cmyOnly = !options.cmyOnly) ? undefined : '');\r\n\t\t\t\tbuttonAction = 'cmykState';\r\n\t\t\t}\r\n\t\t} else if (target === _nodes.bsav) { // SAVE\r\n\t\t\tsaveAsBackground();\r\n\t\t\tbuttonAction = 'saveAsBackground';\r\n\t\t} else if (target === _nodes.bres) { // RESET\r\n\t\t\tvar tmpColor = copyColor(RGB),\r\n\t\t\t\ttmpAlpha = _colors.alpha;\r\n\r\n\t\t\t// a bit heavy but... doesn't matter here\r\n\t\t\t// newCol, type, alpha, forceRender\r\n\t\t\t_colorPicker.setColor(options.color);\r\n\t\t\tsaveAsBackground();\r\n\t\t\t_colorPicker.setColor(tmpColor, 'rgb', tmpAlpha);\r\n\t\t\tbuttonAction = 'resetColor';\r\n\t\t} else if (parent === _nodes.col1) { // COLOR left\r\n\t\t\t// _colors.hsv.h = (_colors.hsv.h + 0.5) % 1; // not acurate\r\n\t\t\t_colors.hsv.h -= (_colors.hsv.h > 0.5 ? 0.5 : -0.5);\r\n\t\t\tconvertColors('hsv');\r\n\t\t\tbuttonAction = 'shiftColor';\r\n\r\n\t\t} else if (parent === _nodes.col2) { // COLOR right\r\n\t\t\t_colorPicker.setColor(target.style.backgroundColor, 'rgb', _colors.background.alpha);\r\n\t\t\tbuttonAction = 'setSavedColor';\r\n\t\t} else if (parent === _nodes.memo) { // MEMORIES // revisit...\r\n\t\t\tvar resetBlink = function() {\r\n\t\t\t\t\tif (_nodes.memos.blinker) _nodes.memos.blinker.style.cssText = _nodes.memos.cssText;\r\n\t\t\t\t},\r\n\t\t\t\tdoBlink = function(elm) {\r\n\t\t\t\t\t_nodes.memos.blinker = elm;\r\n\t\t\t\t\telm.style.cssText = 'background-color:' + (_colors.RGBLuminance > 0.22 ? '#333' : '#DDD');\r\n\t\t\t\t\twindow.setTimeout(resetBlink, 200);\r\n\t\t\t\t};\r\n\r\n\t\t\tif (target === _nodes.memo_cursor) { // save color in memo\r\n\t\t\t\tresetBlink();\r\n\t\t\t\t_nodes.memos.blinker = undefined;\r\n\t\t\t\t_nodes.testNode.style.cssText = _nodes.memo_store.style.cssText;\r\n\t\t\t\t_nodes.memos.cssText = _nodes.testNode.style.cssText; // ...how browser sees css\r\n\t\t\t\tfor (var n = _nodes.memos.length - 1; n--; ) { // check if color already exists\r\n\t\t\t\t\tif (_nodes.memos.cssText === _nodes.memos[n].style.cssText) {\r\n\t\t\t\t\t\tdoBlink(_nodes.memos[n]); // sets _nodes.memos.blinker\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!_nodes.memos.blinker) { // right shift colors\r\n\t\t\t\t\tfor (var n = _nodes.memos.length - 1; n--; ) {\r\n\t\t\t\t\t\t_nodes.memos[n + 1].style.cssText = _nodes.memos[n].style.cssText;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_nodes.memos[0].style.cssText = _nodes.memo_store.style.cssText;\r\n\t\t\t\t}\r\n\t\t\t\tbuttonAction = 'toMemory';\r\n\t\t\t} else { // reset color from memo\r\n\t\t\t\tresetBlink();\r\n\t\t\t\t_colorPicker.setColor(target.style.backgroundColor, 'rgb', target.style.opacity || 1);\r\n\t\t\t\t_nodes.memos.cssText = target.style.cssText;\r\n\t\t\t\tdoBlink(target);\r\n\t\t\t\t// this is dirty... has to do with M|W|! button\r\n\t\t\t\t_mouseMoveAction = 1;\r\n\t\t\t\tbuttonAction = 'fromMemory';\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// think this over again, does this need to be like this??\r\n\t\tif (buttonAction) {\r\n\t\t\tpreRenderAll(_colors);\r\n\t\t\t_mouseMoveAction = _mouseMoveAction ||true; // !!!! search for: // this is dirty...\r\n\t\t\tstopChange(e, buttonAction);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction resizeApp(e, size) {\r\n\t\tvar event = e || window.event,\r\n\t\t\tpage = event ? getPageXY(event) : {},\r\n\t\t\tisSize = size !== undefined,\r\n\t\t\tx = isSize ? size : page.X - _targetOrigin.left + 8,\r\n\t\t\ty = isSize ? size : page.Y - _targetOrigin.top + 8,\r\n\t\t\tvalues = [' S XS XXS', ' S XS', ' S', ''],\r\n\t\t\tsizes = _options.sizes, // from getUISizes();\r\n\t\t\tcurrentSize = isSize ? size :\r\n\t\t\t\ty < sizes.XXS[1] + 25 ? 0 :\r\n\t\t\t\tx < sizes.XS[0] + 25 ? 1 :\r\n\t\t\t\tx < sizes.S[0] + 25 || y < sizes.S[1] + 25 ? 2 : 3,\r\n\t\t\tvalue = values[currentSize],\r\n\t\t\tisXXS = false,\r\n\t\t\tmode,\r\n\t\t\ttmp = '';\r\n\r\n\t\tif (_cashedVars.resizer !== value) {\r\n\t\t\tisXXS = /XX/.test(value);\r\n\t\t\tmode = _options.mode;\r\n\r\n\t\t\tif (isXXS && (!/hs/.test(mode.type) || mode.z === 'h')) {\r\n\t\t\t\ttmp = mode.type + '-' + mode.z;\r\n\t\t\t\t_colorPicker.setMode(/hs/.test(mode.type) ? mode.type + '-s': 'hsv-s');\r\n\t\t\t\t_options.mode.original = tmp;\r\n\t\t\t} else if (mode.original) {\r\n\t\t\t\t// setMode(mode) creates a new object so mode.original gets deleted automatically\r\n\t\t\t\t_colorPicker.setMode(mode.original);\r\n\t\t\t}\r\n\r\n\t\t\t_nodes.colorPicker.className = _nodes.colorPicker.className.replace(/\\s+(?:S|XS|XXS)/g, '') + value;\r\n\t\t\t_options.scale = isXXS ? 4 : /S/.test(value) ? 2 : 1;\r\n\t\t\t_options.currentSize = currentSize;\r\n\r\n\t\t\t_cashedVars.resizer = value;\r\n\r\n\t\t\t// fix this... from this point on inside if() ... convertColors();\r\n\t\t\t_newData = true;\r\n\t\t\trenderAll();\r\n\t\t\tresetCursors();\r\n\t\t}\r\n\r\n\t\t_nodes.resizer.style.cssText = 'display: block;' +\r\n\t\t\t'width: '  + (x > 10 ? x : 10) + 'px;' +\r\n\t\t\t'height: ' + (y > 10 ? y : 10) + 'px;';\r\n\t}\r\n\r\n\t// ------------------------------------------------------ //\r\n\t// --- Colors calculation and rendering related stuff  --- //\r\n\t// -------------------------------------------------------//\r\n\r\n\tfunction setMode(mode) {\r\n\t\tvar ModeMatrix = {\r\n\t\t\trgb_r : {x: 'b', y: 'g'},\r\n\t\t\trgb_g : {x: 'b', y: 'r'},\r\n\t\t\trgb_b : {x: 'r', y: 'g'},\r\n\r\n\t\t\thsv_h : {x: 's', y: 'v'},\r\n\t\t\thsv_s : {x: 'h', y: 'v'},\r\n\t\t\thsv_v : {x: 'h', y: 's'},\r\n\r\n\t\t\thsl_h : {x: 's', y: 'l'},\r\n\t\t\thsl_s : {x: 'h', y: 'l'},\r\n\t\t\thsl_l : {x: 'h', y: 's'}\r\n\t\t},\r\n\t\tkey = mode.replace('-', '_'),\r\n\t\tregex = '\\\\b(?:rg|hs)\\\\w\\\\-\\\\w\\\\b'; // \\\\b\\\\w{3}\\\\-\\\\w\\\\b';\r\n\r\n\t\t// changeClass(_nodes.colorPicker, '(?:.*?)$', mode);\r\n\t\t// changeClass(_nodes.colorPicker, '\\\\b\\\\w{3}\\\\-\\\\w\\\\b', mode);\r\n\t\t// changeClass(_nodes.slds, '\\\\b\\\\w{3}\\\\-\\\\w\\\\b', mode);\r\n\t\tchangeClass(_nodes.panel, regex, mode);\r\n\t\tchangeClass(_nodes.slds, regex, mode);\r\n\r\n\t\tmode = mode.split('-');\r\n\t\treturn _options.mode = {\r\n\t\t\ttype: mode[0],\r\n\t\t\tx: ModeMatrix[key].x,\r\n\t\t\ty: ModeMatrix[key].y,\r\n\t\t\tz: mode[1]\r\n\t\t};\r\n\t}\r\n\r\n\tfunction initSliders() { // function name...\r\n\t\tvar regex = /\\s+(?:hue-)*(?:dark|light)/g,\r\n\t\t\tclassName = 'className'; // minification\r\n\r\n\t\t_nodes.curl[className] = _nodes.curl[className].replace(regex, ''); // .....\r\n\t\t_nodes.curr[className] = _nodes.curr[className].replace(regex, ''); // .....\r\n\t\t_nodes.slds[className] = _nodes.slds[className].replace(regex, '');\r\n\t\t// var sldrs = ['sldr_2', 'sldr_4', 'sldl_3'];\r\n\t\t// for (var n = sldrs.length; n--; ) {\r\n\t\t// \t_nodes[sldrs[n]][className] = _options.CSSPrefix + sldrs[n].replace('_', '-');\r\n\t\t// }\r\n\t\t_nodes.sldr_2[className] = _options.CSSPrefix + 'sldr-2';\r\n\t\t_nodes.sldr_4[className] = _options.CSSPrefix + 'sldr-4';\r\n\t\t_nodes.sldl_3[className] = _options.CSSPrefix + 'sldl-3';\r\n\r\n\t\tfor (var style in _nodes.styles) {\r\n\t\t\tif (!style.indexOf('sld')) _nodes.styles[style].cssText = '';\r\n\t\t}\r\n\t\t_cashedVars = {};\r\n\t}\r\n\r\n\tfunction resetCursors() {\r\n\t\t// _renderVars.isNoRGB = undefined;\r\n\t\t_nodes.styles.curr.cssText = _nodes.styles.curl.cssText; // only coordinates\r\n\t\t_nodes.curl.className = _options.CSSPrefix + 'curl' + (\r\n\t\t\t_renderVars.noRGBZ ? ' ' + _options.CSSPrefix + 'curl-' +_renderVars.noRGBZ: '');\r\n\t\t_nodes.curr.className = _options.CSSPrefix + 'curr ' + _options.CSSPrefix + 'curr-' +\r\n\t\t\t(_options.mode.z === 'h' ? _renderVars.HUEContrast : _renderVars.noRGBZ ?\r\n\t\t\t\t_renderVars.noRGBZ : _renderVars.RGBLuminance);\r\n\t}\r\n\r\n\tfunction convertColors(type) {\r\n\t\tpreRenderAll(_colorInstance.setColor(undefined, type || _options.mode.type));\r\n\t\t_newData = true;\r\n\t}\r\n\r\n\tfunction saveAsBackground(refresh) {\r\n\t\t_colorInstance.saveAsBackground();\r\n\t\t_nodes.styles.col2.cssText = 'background-color: ' + color2string(_colors.background.RGB) + ';' +\r\n\t\t\tgetOpacityCSS(_colors.background.alpha);\r\n\t\t\r\n\t\tif (refresh) {\r\n\t\t\tpreRenderAll(_colors);\r\n\t\t\t// renderAll();\r\n\t\t}\r\n\t\treturn (_colors);\r\n\t}\r\n\r\n\tfunction preRenderAll(colors) {\r\n\t\tvar _Math = _math,\r\n\t\t\trenderVars = _renderVars,\r\n\t\t\tbgType = _bgTypes[_options.alphaBG];\r\n\r\n\t\trenderVars.hueDelta = _Math.round(colors['rgbaMixBGMix' + bgType].hueDelta * 100);\r\n\t\t// renderVars.RGBLuminanceDelta = _Math.round(colors.RGBLuminanceDelta * 100);\r\n\t\trenderVars.luminanceDelta = _Math.round(colors['rgbaMixBGMix' + bgType].luminanceDelta * 100);\r\n\t\trenderVars.RGBLuminance = colors.RGBLuminance > 0.22 ? 'light' : 'dark';\r\n\t\trenderVars.HUEContrast = colors.HUELuminance > 0.22 ? 'light' : 'dark';\r\n\t\t// renderVars.contrast = renderVars.RGBLuminanceDelta > renderVars.hueDelta ? 'contrast' : '';\r\n\t\trenderVars.contrast = renderVars.luminanceDelta > renderVars.hueDelta ? 'contrast' : '';\r\n\t\trenderVars.readabiltiy =\r\n\t\t\tcolors['rgbaMixBGMix' + bgType].WCAG2Ratio >= 7 ? 'green' :\r\n\t\t\tcolors['rgbaMixBGMix' + bgType].WCAG2Ratio >= 4.5 ? 'orange': '';\r\n\t\trenderVars.noRGBZ = _options['no' + _options.mode.type.toUpperCase() + _options.mode.z] ?\r\n\t\t\t(_options.mode.z === 'g' && colors.rgb.g < 0.59 || _options.mode.z === 'b' ||_options.mode.z === 'r' ?\r\n\t\t\t'dark' : 'light') : undefined;\r\n\t}\r\n\r\n\tfunction renderAll() { // maybe render alpha seperately...\r\n\t\tif (_mouseMoveAction) {\r\n\t\t\t// _renderTimer = window[requestAnimationFrame](renderAll);\r\n\t\t\tif (!_newData) return (_renderTimer = window[requestAnimationFrame](renderAll));\r\n\t\t\t_newData = false;\r\n\t\t}\r\n\t\t// console.time('renderAll');\r\n\t\tvar options = _options,\r\n\t\t\tmode = options.mode,\r\n\t\t\tscale = options.scale,\r\n\t\t\tprefix = options.CSSPrefix,\r\n\t\t\tcolors = _colors,\r\n\t\t\tnodes = _nodes,\r\n\t\t\tCSS = nodes.styles,\r\n\t\t\ttextNodes = nodes.textNodes,\r\n\t\t\tvalueRanges = _valueRanges,\r\n\t\t\tvalueType = _valueType,\r\n\t\t\trenderVars = _renderVars,\r\n\t\t\tcashedVars = _cashedVars,\r\n\r\n\t\t\t_Math = _math,\r\n\t\t\t_getOpacityCSS = getOpacityCSS,\r\n\t\t\t_color2string = color2string,\r\n\r\n\t\t\ta = 0,\r\n\t\t\tb = 0,\r\n\t\t\tx  = colors[mode.type][mode.x],\r\n\t\t\tX = _Math.round(x * 255 / (scale === 4 ? 2 : scale)),\r\n\t\t\ty_ = colors[mode.type][mode.y],\r\n\t\t\ty = 1 - y_,\r\n\t\t\tY = _Math.round(y * 255 / scale),\r\n\t\t\tz  = 1 - colors[mode.type][mode.z],\r\n\t\t\tZ = _Math.round(z * 255 / scale),\r\n\t\t\tcoords = (1 === 1) ? [x, y_] : [0, 0], // (1 === 2) button label up\r\n\r\n\t\t\tisRGB = mode.type === 'rgb',\r\n\t\t\tisHue = mode.z === 'h',\r\n\t\t\tisHSL = mode.type === 'hsl',\r\n\t\t\tisHSL_S = isHSL && mode.z === 's',\r\n\t\t\tmoveXY = _mouseMoveAction === changeXYValue,\r\n\t\t\tmoveZ  = _mouseMoveAction === changeZValue,\r\n\t\t\tdisplay, tmp, value, slider;\r\n\r\n\t\tif (isRGB) {\r\n\t\t\tif (coords[0] >= coords[1]) b = 1; else a = 1;\r\n\t\t\tif (cashedVars.sliderSwap !== a) {\r\n\t\t\t\tnodes.sldr_2.className = options.CSSPrefix + 'sldr-' + (3 - a);\r\n\t\t\t\tcashedVars.sliderSwap = a;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ((isRGB && !moveZ) || (isHue && !moveXY) || (!isHue && !moveZ)) {\r\n\t\t\tCSS[isHue ? 'sldl_2' : 'sldr_2'][isRGB ? 'cssText' : 'backgroundColor'] =\r\n\t\t\t\tisRGB ? _getOpacityCSS((coords[a] - coords[b]) / (1 - (coords[b]) || 0)) : _color2string(colors.hueRGB);\r\n\t\t}\r\n\t\tif (!isHue) {\r\n\t\t\tif (!moveZ)  CSS.sldr_4.cssText = _getOpacityCSS(isRGB ? coords[b] : isHSL_S ? _Math.abs(1 - y * 2) : y);\r\n\t\t\tif (!moveXY) CSS.sldl_3.cssText = _getOpacityCSS(isHSL && mode.z === 'l' ? _Math.abs(1 - z * 2) : z);\r\n\t\t\tif (isHSL) { // switch slider class name for black/white color half way through in HSL(S|L) mode(s)\r\n\t\t\t\tslider = isHSL_S ? 'sldr_4' : 'sldl_3';\r\n\t\t\t\ttmp = isHSL_S ? 'r-' : 'l-';\r\n\t\t\t\tvalue = isHSL_S ? (y > 0.5 ? 4 : 3) : (z > 0.5 ? 3 : 4);\r\n\r\n\t\t\t\tif (cashedVars[slider] !== value) {\r\n\t\t\t\t\tnodes[slider].className = options.CSSPrefix + 'sld' + tmp + value;\r\n\t\t\t\t\tcashedVars[slider] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!moveZ) CSS.curm.cssText = 'left: ' + X + 'px; top: ' + Y + 'px;';\r\n\t\tif (!moveXY) CSS.curl.top = Z + 'px';\r\n\t\tif (valueType) CSS.curr.top = Z + 'px'; // && valueType.type !== mode.type\r\n\t\tif ((valueType && valueType.type === 'alpha') || _mainTarget === nodes.opacity) {\r\n\t\t\tCSS.opacity_slider.left = options.opacityPositionRelative ? (colors.alpha * (\r\n\t\t\t\t(_targetOrigin.width || nodes.opacity.offsetWidth) -\r\n\t\t\t\t(_targetOrigin.childWidth || nodes.opacity_slider.offsetWidth))) + 'px' :\r\n\t\t\t\t(colors.alpha * 100) + '%';\r\n\t\t}\r\n\r\n\t\tCSS.col1.cssText = 'background-color: ' + _color2string(colors.RND.rgb) + '; ' +\r\n\t\t\t(options.muteAlpha ? '' : _getOpacityCSS(colors.alpha));\r\n\t\tCSS.opacity.backgroundColor = _color2string(colors.RND.rgb);\r\n\t\tCSS.cold.width = renderVars.hueDelta + '%';\r\n\t\tCSS.cont.width = renderVars.luminanceDelta + '%';\r\n\r\n\t\tfor (display in textNodes) {\r\n\t\t\ttmp = display.split('_');\r\n\t\t\tif (options.cmyOnly) {\r\n\t\t\t\ttmp[0] = tmp[0].replace('k', '');\r\n\t\t\t}\r\n\t\t\tvalue = tmp[1] ? colors.RND[tmp[0]][tmp[1]] : colors.RND[tmp[0]] || colors[tmp[0]];\r\n\t\t\tif (cashedVars[display] !== value) {\r\n\t\t\t\tcashedVars[display] = value;\r\n\t\t\t\ttextNodes[display].data = value > 359.5 && display !== 'HEX' ? 0 : value;\r\n\r\n\t\t\t\tif (display !== 'HEX' && !options.noRangeBackground) {\r\n\t\t\t\t\tvalue = colors[tmp[0]][tmp[1]] !== undefined ? colors[tmp[0]][tmp[1]] : colors[tmp[0]];\r\n\t\t\t\t\tif (tmp[0] === 'Lab') {\r\n\t\t\t\t\t\tvalue = (value - valueRanges[tmp[0]][tmp[1]][0]) /\r\n\t\t\t\t\t\t\t(valueRanges[tmp[0]][tmp[1]][1] - valueRanges[tmp[0]][tmp[1]][0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tCSS[display].backgroundPosition = _Math.round((1 - value) * 100) + '% 0%';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Lab out of gammut\r\n\t\ttmp = colors._rgb ? [\r\n\t\t\tcolors._rgb.r !== colors.rgb.r,\r\n\t\t\tcolors._rgb.g !== colors.rgb.g,\r\n\t\t\tcolors._rgb.b !== colors.rgb.b\r\n\t\t] : [];\r\n\t\tif (tmp.join('') !== cashedVars.outOfGammut) {\r\n\t\t\tnodes.rgb_r_labl.firstChild.data = tmp[0] ? '!' : ' ';\r\n\t\t\tnodes.rgb_g_labl.firstChild.data = tmp[1] ? '!' : ' ';\r\n\t\t\tnodes.rgb_b_labl.firstChild.data = tmp[2] ? '!' : ' ';\r\n\t\t\tcashedVars.outOfGammut = tmp.join('');\r\n\t\t}\r\n\t\tif (renderVars.noRGBZ) {\r\n\t\t\tif (cashedVars.noRGBZ !== renderVars.noRGBZ) {\r\n\t\t\t\tnodes.curl.className = prefix + 'curl ' + prefix + 'curl-' + renderVars.noRGBZ;\r\n\t\t\t\t\t\r\n\t\t\t\tif (!moveZ) {\r\n\t\t\t\t\tnodes.curr.className = prefix + 'curr ' + prefix + 'curr-' + renderVars.noRGBZ;\r\n\t\t\t\t}\r\n\t\t\t\tcashedVars.noRGBZ = renderVars.noRGBZ;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (cashedVars.HUEContrast !== renderVars.HUEContrast && mode.z === 'h') {\r\n\t\t\tnodes.slds.className = nodes.slds.className.replace(/\\s+hue-(?:dark|light)/, '') +\r\n\t\t\t\t' hue-' + renderVars.HUEContrast;\r\n\t\t\tif (!moveZ) {\r\n\t\t\t\tnodes.curr.className = prefix + 'curr ' + prefix + 'curr-' + renderVars.HUEContrast;\r\n\t\t\t}\r\n\t\t\tcashedVars.HUEContrast = renderVars.HUEContrast;\r\n\t\t} else if (cashedVars.RGBLuminance !== renderVars.RGBLuminance) { // test for no else\r\n\t\t\tnodes.colorPicker.className = nodes.colorPicker.className.replace(/\\s+(?:dark|light)/, '') +\r\n\t\t\t\t' ' + renderVars.RGBLuminance;\r\n\t\t\tif (!moveZ && mode.z !== 'h' && !renderVars.noRGBZ) {\r\n\t\t\t\tnodes.curr.className = prefix + 'curr ' + prefix + 'curr-' + renderVars.RGBLuminance;\r\n\t\t\t}\r\n\t\t\tcashedVars.RGBLuminance = renderVars.RGBLuminance;\r\n\t\t}\r\n\r\n\t\tif (cashedVars.contrast !== renderVars.contrast || cashedVars.readabiltiy !== renderVars.readabiltiy) {\r\n\t\t\tnodes.ctrl.className = nodes.ctrl.className.replace(' contrast', '').replace(/\\s*(?:orange|green)/, '') +\r\n\t\t\t\t(renderVars.contrast ? ' ' + renderVars.contrast : '') +\r\n\t\t\t\t(renderVars.readabiltiy ? ' ' + renderVars.readabiltiy : '');\r\n\t\t\tcashedVars.contrast = renderVars.contrast;\r\n\t\t\tcashedVars.readabiltiy = renderVars.readabiltiy;\r\n\t\t}\r\n\r\n\t\tif (cashedVars.saveColor !== colors.saveColor) {\r\n\t\t\tnodes.HEX_labl.firstChild.data = !colors.saveColor ? '!' : colors.saveColor === 'web save' ? 'W' : 'M';\r\n\t\t\tcashedVars.saveColor = colors.saveColor;\r\n\t\t}\r\n\r\n\t\tif (options.renderCallback) {\r\n\t\t\toptions.renderCallback(colors, mode); // maybe more parameters\r\n\t\t}\r\n\r\n\t\tif (_mouseMoveAction) {\r\n\t\t\t_renderTimer = window[requestAnimationFrame](renderAll);\r\n\t\t}\r\n\r\n\t\t// console.timeEnd('renderAll')\r\n\t}\r\n\r\n\r\n\t// ------------------------------------------------------ //\r\n\t// ------------------ helper functions ------------------ //\r\n\t// -------------------------------------------------------//\r\n\r\n\tfunction copyColor(color) {\r\n\t\tvar newColor = {};\r\n\r\n\t\tfor (var n in color) {\r\n\t\t\tnewColor[n] = color[n];\r\n\t\t}\r\n\t\treturn newColor;\r\n\t}\r\n\r\n\t// function color2string(color, type) {\r\n\t// \tvar out = [],\r\n\t// \t\tn = 0;\r\n\r\n\t// \ttype = type || 'rgb';\r\n\t// \twhile (type.charAt(n)) { // IE7 // V8 type[n] || \r\n\t// \t\tout.push(color[type.charAt(n)]);\r\n\t// \t\tn++;\r\n\t// \t}\r\n\t// \treturn type + '(' + out.join(', ') + ')';\r\n\t// }\r\n\r\n\tfunction color2string(color, type) { // ~2 x faster on V8\r\n\t\tvar out = '',\r\n\t\t\tt = (type || 'rgb').split(''),\r\n\t\t\tn = t.length;\r\n\r\n\t\tfor ( ; n--; ) {\r\n\t\t\tout = ', ' + color[t[n]] + out;\r\n\t\t}\r\n\t\treturn (type || 'rgb') + '(' + out.substr(2) + ')';\r\n\t}\r\n\r\n\r\n\tfunction limitValue(value, min, max) {\r\n\t\t// return Math.max(min, Math.min(max, value)); // faster??\r\n\t\treturn (value > max ? max : value < min ? min : value);\r\n\t}\r\n\r\n\tfunction getOpacityCSS(value) {\r\n\t\tif (value === undefined) value = 1;\r\n\r\n\t\tif (_doesOpacity) {\r\n\t\t\treturn 'opacity: ' + (_math.round(value * 10000000000) / 10000000000) + ';'; // value.toFixed(16) = 99% slower\r\n\t\t\t// some speed test:\r\n\t\t\t// return ['opacity: ', (Math.round(value * 1e+10) / 1e+10), ';'].join('');\r\n\t\t} else {\r\n\t\t\treturn 'filter: alpha(opacity=' + _math.round(value * 100) + ');';\r\n\t\t}\r\n\t}\r\n\r\n\tfunction preventDefault(e, skip) {\r\n\t\te.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n\t\tif (!skip) window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction changeClass(elm, cln, newCln) {\r\n\t\treturn  !elm ? false : elm.className = (newCln !== undefined ?\r\n\t\t\telm.className.replace(new RegExp('\\\\s+?' + cln, 'g'), newCln ? ' ' + newCln : '') :\r\n\t\t\telm.className + ' ' + cln);\r\n\t}\r\n\r\n\tfunction getOrigin(elm) {\r\n\t\tvar box = (elm.getBoundingClientRect) ? elm.getBoundingClientRect() : {top: 0, left: 0},\r\n\t\t\tdoc = elm && elm.ownerDocument,\r\n\t\t\tbody = doc.body,\r\n\t\t\twin = doc.defaultView || doc.parentWindow || window,\r\n\t\t\tdocElem = doc.documentElement || body.parentNode,\r\n\t\t\tclientTop  = docElem.clientTop  || body.clientTop  || 0, // border on html or body or both\r\n\t\t\tclientLeft =  docElem.clientLeft || body.clientLeft || 0;\r\n\r\n\t\treturn {\r\n\t\t\tleft: box.left + (win.pageXOffset || docElem.scrollLeft) - clientLeft,\r\n\t\t\ttop:  box.top  + (win.pageYOffset || docElem.scrollTop)  - clientTop\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getPageXY(e) {\r\n\t\tvar doc = window.document;\r\n\r\n\t\treturn {\r\n\t\t\tX: e.pageX || e.clientX + doc.body.scrollLeft + doc.documentElement.scrollLeft,\r\n\t\t\tY: e.pageY || e.clientY + doc.body.scrollTop + doc.documentElement.scrollTop\r\n\t\t};\r\n\t}\r\n\r\n\tfunction addEvent(obj, type, func) {\r\n\t\taddEvent.cache = addEvent.cache ||{\r\n\t\t\t_get: function(obj, type, func, checkOnly) {\r\n\t\t\t\tvar cache = addEvent.cache[type] || [];\r\n\r\n\t\t\t\tfor (var n = cache.length; n--; ) {\r\n\t\t\t\t\tif (obj === cache[n].obj && '' + func === '' + cache[n].func) {\r\n\t\t\t\t\t\tfunc = cache[n].func;\r\n\t\t\t\t\t\tif (!checkOnly) {\r\n\t\t\t\t\t\t\tcache[n] = cache[n].obj = cache[n].func = null;\r\n\t\t\t\t\t\t\tcache.splice(n, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn func;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_set: function(obj, type, func) {\r\n\t\t\t\tvar cache = addEvent.cache[type] = addEvent.cache[type] || [];\r\n\t\t\t\t\r\n\t\t\t\tif (addEvent.cache._get(obj, type, func, true)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcache.push({\r\n\t\t\t\t\t\tfunc: func,\r\n\t\t\t\t\t\tobj: obj\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (!func.name && addEvent.cache._set(obj, type, func) || typeof func !== 'function') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (obj.addEventListener) obj.addEventListener(type, func, false);\r\n\t\telse obj.attachEvent('on' + type, func);\r\n\t}\r\n\r\n\tfunction removeEvent(obj, type, func) {\r\n\t\tif (typeof func !== 'function') return;\r\n\t\tif (!func.name) {\r\n\t\t\tfunc = addEvent.cache._get(obj, type, func) || func;\r\n\t\t}\r\n\r\n\t\tif (obj.removeEventListener) obj.removeEventListener(type, func, false);\r\n\t\telse obj.detachEvent('on' + type, func);\r\n\t}\r\n\r\n\tfunction caret(target, pos) { // only for contenteditable\r\n\t\tvar out = {};\r\n\r\n\t\tif (pos === undefined) { // get\r\n\t\t\tif (window.getSelection) { // HTML5\r\n\t\t\t\ttarget.focus();\r\n\t\t\t\tvar range1 = window.getSelection().getRangeAt(0),\r\n\t\t\t\t\trange2 = range1.cloneRange();\r\n\t\t\t\trange2.selectNodeContents(target);\r\n\t\t\t\trange2.setEnd(range1.endContainer, range1.endOffset);\r\n\t\t\t\tout = {\r\n\t\t\t\t\tend: range2.toString().length,\r\n\t\t\t\t\trange: range1.toString().length\r\n\t\t\t\t};\r\n\t\t\t} else { // IE < 9\r\n\t\t\t\ttarget.focus();\r\n\t\t\t\tvar range1 = document.selection.createRange(),\r\n\t\t\t\t\trange2 = document.body.createTextRange();\r\n\t\t\t\trange2.moveToElementText(target);\r\n\t\t\t\trange2.setEndPoint('EndToEnd', range1);\r\n\t\t\t\tout = {\r\n\t\t\t\t\tend: range2.text.length,\r\n\t\t\t\t\trange: range1.text.length\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tout.start = out.end - out.range;\r\n\t\t\treturn out;\r\n\t\t}\r\n\t\t// set\r\n\t\tif (pos == -1) pos = target['text']().length;\r\n\t\t\r\n\t\tif (window.getSelection) { // HTML5\r\n\t\t\ttarget.focus();\r\n\t\t\twindow.getSelection().collapse(target.firstChild, pos);\r\n\t\t} else { // IE < 9\r\n\t\t\tvar range = document.body.createTextRange();\r\n\t\t\trange.moveToElementText(target);\r\n\t\t\trange.moveStart('character', pos);\r\n\t\t\trange.collapse(true);\r\n\t\t\trange.select();\r\n\t\t}\r\n\t\treturn pos;\r\n\t}\r\n\r\n\t// ------------- requestAnimationFrame shim ------------- //\r\n\t// ---------- quite optimized for minification ---------- //\r\n\r\n\tfor(var n = vendors.length; n-- && !window[requestAnimationFrame]; ) {\r\n\t\twindow[requestAnimationFrame] = window[vendors[n] + 'Request' + animationFrame];\r\n\t\twindow[cancelAnimationFrame]  = window[vendors[n] + 'Cancel'  + animationFrame] ||\r\n\t\t\twindow[vendors[n] + 'CancelRequest' + animationFrame];\r\n\t}\r\n\r\n\twindow[requestAnimationFrame] = window[requestAnimationFrame] || function(callback) {\r\n\t\t// this is good enough... and better than setTimeout\r\n\t\t\treturn window.setTimeout(callback, 1000 / _options.fps);\r\n\t\t// return _renderTimer ? _renderTimer : window.setInterval(callback, 1000 / _options.fps);\r\n\t};\r\n\r\n\twindow[cancelAnimationFrame] = window[cancelAnimationFrame] || function(id) {\r\n\t\t// console.log('OFF-', id + '-' + _renderTimer)\r\n\t\twindow.clearTimeout(id);\r\n\t\treturn _renderTimer = null;\r\n\t};\r\n\r\n})(window);\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/color/colorPicker.js\n **/","(function (window) {\n  window.jsColorPicker = function (selectors, config) {\n    var renderCallback = function (colors, mode) {\n        var options = this,\n          input = options.input,\n          patch = options.patch,\n          RGB = colors.RND.rgb,\n          HSL = colors.RND.hsl,\n          AHEX = options.isIE8 ? (colors.alpha < 0.16 ? '0' : '') +\n          (Math.round(colors.alpha * 100)).toString(16).toUpperCase() + colors.HEX : '',\n          RGBInnerText = RGB.r + ', ' + RGB.g + ', ' + RGB.b,\n          RGBAText = 'rgba(' + RGBInnerText + ', ' + colors.alpha + ')',\n          isAlpha = colors.alpha !== 1 && !options.isIE8,\n          colorMode = input.getAttribute('data-colorMode');\n\n        // patch.style.cssText =\n        //   'color:' + (colors.rgbaMixCustom.luminance > 0.22 ? '#222' : '#ddd') + ';' + // Black...???\n        //   'background-color:' + RGBAText + ';' +\n        //   'filter:' + (options.isIE8 ? 'progid:DXImageTransform.Microsoft.gradient(' + // IE<9\n        //   'startColorstr=#' + AHEX + ',' + 'endColorstr=#' + AHEX + ')' : '');\n        input.value = (colorMode === 'HEX' && !isAlpha ? '#' + (options.isIE8 ? AHEX : colors.HEX) :\n            colorMode === 'rgb' || (colorMode === 'HEX' && isAlpha) ?\n              (!isAlpha ? 'rgb(' + RGBInnerText + ')' : RGBAText) :\n              ('hsl' + (isAlpha ? 'a(' : '(') + HSL.h + ', ' + HSL.s + '%c, ' + HSL.l + '%' +\n              (isAlpha ? ', ' + colors.alpha : '') + ')')\n        );\n\n        input.dispatchEvent(new Event('change')); //  for Vue's update\n\n        if (options.displayCallback) {\n          options.displayCallback(colors, mode, options);\n        }\n      },\n      extractValue = function (elm) {\n        return elm.value || elm.getAttribute('value') || elm.style.backgroundColor || '#DDDDDD';\n      },\n      actionCallback = function (event, action) {\n        var options = this,\n          colorPicker = colorPickers.current;\n\n        if (action === 'toMemory') {\n          var memos = colorPicker.nodes.memos,\n            backgroundColor = '',\n            opacity = 0,\n            cookieTXT = [];\n\n          for (var n = 0, m = memos.length; n < m; n++) {\n            backgroundColor = memos[n].style.backgroundColor;\n            opacity = memos[n].style.opacity;\n            opacity = Math.round((opacity === '' ? 1 : opacity) * 100) / 100;\n            cookieTXT.push(backgroundColor.replace(/, /g, ',').replace('rgb(', 'rgba(').replace(')', ',' + opacity + ')')\n            );\n          }\n          cookieTXT = '\\'' + cookieTXT.join('\\',\\'') + '\\'';\n          ColorPicker.docCookies('colorPickerMemos' + (options.noAlpha ? 'NoAlpha' : ''), cookieTXT);\n        } else if (action === 'resizeApp') {\n          ColorPicker.docCookies('colorPickerSize', colorPicker.color.options.currentSize);\n        } else if (action === 'modeChange') {\n          var mode = colorPicker.color.options.mode;\n\n          ColorPicker.docCookies('colorPickerMode', mode.type + '-' + mode.z);\n        }\n      },\n      createInstance = function (elm, config) {\n        var initConfig = {\n          klass: window.ColorPicker,\n          input: elm,\n          patch: elm,\n          isIE8: !!document.all && !document.addEventListener, // Opera???\n          // *** animationSpeed: 200,\n          // *** draggable: true,\n          margin: { left: -1, top: 2 },\n          customBG: '#FFFFFF',\n          // displayCallback: displayCallback,\n          /* --- regular colorPicker options from this point --- */\n          color: extractValue(elm),\n          initStyle: 'display: none',\n          mode: ColorPicker.docCookies('colorPickerMode') || 'hsv-h',\n          // memoryColors: (function(colors, config) {\n          // \treturn config.noAlpha ?\n          // \t\tcolors.replace(/\\,\\d*\\.*\\d*\\)/g, ',1)') : colors;\n          // })($.docCookies('colorPickerMemos'), config || {}),\n          memoryColors: ColorPicker.docCookies('colorPickerMemos' +\n            ((config || {}).noAlpha ? 'NoAlpha' : '')),\n          size: ColorPicker.docCookies('colorPickerSize') || 1,\n          renderCallback: renderCallback,\n          actionCallback: actionCallback\n        };\n\n        for (var n in config) {\n          initConfig[n] = config[n];\n        }\n        return new initConfig.klass(initConfig);\n      },\n      doEventListeners = function (elm, multiple, off) {\n        var onOff = off ? 'removeEventListener' : 'addEventListener',\n          focusListener = function (e) {\n            var input = this,\n              position = window.ColorPicker.getOrigin(input),\n              index = multiple ? Array.prototype.indexOf.call(elms, this) : 0,\n              colorPicker = colorPickers[index] ||\n                (colorPickers[index] = createInstance(this, config)),\n              options = colorPicker.color.options,\n              colorPickerUI = colorPicker.nodes.colorPicker;\n\n            options.color = extractValue(elm); // brings color to default on reset\n\n            if (position.top > window.innerHeight - 200) {\n              colorPickerUI.style.cssText =\n                'position: absolute;' +\n                'z-index: 1000;' +\n                'left:' + (position.left + options.margin.left) + 'px;' +\n                'bottom:' + (window.innerHeight - position.top - options.margin.top) + 'px;';\n            } else {\n              colorPickerUI.style.cssText =\n                'position: absolute;' +\n                'z-index: 1000;' +\n                'left:' + (position.left + options.margin.left) + 'px;' +\n                'top:' + (position.top + +input.offsetHeight + options.margin.top) + 'px;';\n            }\n\n            if (!multiple) {\n              options.input = elm;\n              options.patch = elm; // check again???\n              colorPicker.setColor(extractValue(elm), undefined, undefined, true);\n              colorPicker.saveAsBackground();\n            }\n            colorPickers.current = colorPickers[index];\n            (options.appendTo || document.body).appendChild(colorPickerUI);\n            setTimeout(function () { // compensating late style on onload in colorPicker\n              colorPickerUI.style.display = 'block';\n            }, 0);\n          },\n          mousDownListener = function (e) {\n            var colorPicker = colorPickers.current,\n              colorPickerUI = (colorPicker ? colorPicker.nodes.colorPicker : undefined),\n              animationSpeed = colorPicker ? colorPicker.color.options.animationSpeed : 0,\n              isColorPicker = colorPicker && (function (elm) {\n                  while (elm) {\n                    if ((elm.className || '').indexOf('cp-app') !== -1) return elm;\n                    elm = elm.parentNode;\n                  }\n                  return false;\n                })(e.target),\n              inputIndex = Array.prototype.indexOf.call(elms, e.target);\n\n            if (isColorPicker && Array.prototype.indexOf.call(colorPickers, isColorPicker)) {\n              if (e.target === colorPicker.nodes.exit) {\n                colorPickerUI.style.display = 'none';\n                document.activeElement.blur();\n              } else {\n                // ...\n              }\n            } else if (inputIndex !== -1) {\n              // ...\n            } else if (colorPickerUI) {\n              colorPickerUI.style.display = 'none';\n            }\n          };\n\n        elm[onOff]('focus', focusListener);\n\n        if (!colorPickers.evt || off) {\n          colorPickers.evt = true; // prevent new eventListener for window\n\n          window[onOff]('mousedown', mousDownListener);\n        }\n      },\n    // this is a way to prevent data binding on HTMLElements\n      colorPickers = window.jsColorPicker.colorPickers || [],\n      elms = document.querySelectorAll(selectors),\n      testColors = new window.Colors({ customBG: config.customBG, allMixDetails: true });\n\n    window.jsColorPicker.colorPickers = colorPickers;\n\n    for (var n = 0, m = elms.length; n < m; n++) {\n      var elm = elms[n];\n\n      if (config === 'destroy') {\n        doEventListeners(elm, (config && config.multipleInstances), true);\n        if (colorPickers[n]) {\n          colorPickers[n].destroyAll();\n        }\n      } else {\n        var color = extractValue(elm);\n        var value = color.split('(');\n\n        testColors.setColor(color);\n        if (config && config.init) {\n          config.init(elm, testColors.colors);\n        }\n        elm.setAttribute('data-colorMode', value[1] ? value[0].substr(0, 3) : 'HEX');\n        doEventListeners(elm, (config && config.multipleInstances), false);\n        if (config && config.readOnly) {\n          elm.readOnly = true;\n        }\n      }\n    }\n    ;\n\n    return window.jsColorPicker.colorPickers;\n  };\n\n  window.ColorPicker.docCookies = function (key, val, options) {\n    var encode = encodeURIComponent, decode = decodeURIComponent,\n      cookies, n, tmp, cache = {},\n      days;\n\n    if (val === undefined) { // all about reading cookies\n      cookies = document.cookie.split(/;\\s*/) || [];\n      for (n = cookies.length; n--;) {\n        tmp = cookies[n].split('=');\n        if (tmp[0]) cache[decode(tmp.shift())] = decode(tmp.join('=')); // there might be '='s in the value...\n      }\n\n      if (!key) return cache; // return Json for easy access to all cookies\n      else return cache[key]; // easy access to cookies from here\n    } else { // write/delete cookie\n      options = options || {};\n\n      if (val === '' || options.expires < 0) { // prepare deleteing the cookie\n        options.expires = -1;\n        // options.path = options.domain = options.secure = undefined; // to make shure the cookie gets deleted...\n      }\n\n      if (options.expires !== undefined) { // prepare date if any\n        days = new Date();\n        days.setDate(days.getDate() + options.expires);\n      }\n\n      document.cookie = encode(key) + '=' + encode(val) +\n        (days ? '; expires=' + days.toUTCString() : '') +\n        (options.path ? '; path=' + options.path : '') +\n        (options.domain ? '; domain=' + options.domain : '') +\n        (options.secure ? '; secure' : '');\n    }\n  };\n})(window);\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/color/jsColor.js\n **/","import './js/override/static-canvas';\nimport './js/override/canvas.js';\nimport './js/override/canvas-events.js';\nimport './js/override/base-brush.js';\nimport './js/override/pencil-brush.js';\nimport './js/layer.js';\nimport './js/layer-manager.js';\nimport './js/cursor-render.js';\nimport './js/eraser-brush.js';\nimport './js/point-brush.js';\nimport './js/line-brush.js';\nimport './js/rect-brush.js';\nimport './js/round-brush.js';\n\nimport {Brush} from './def/Brush';\nimport {Shape} from './def/Shape';\nimport {Point} from \"./def/Point\";\n\n//  todo: use modules\nconst global:any = window;\n\nclass FabricCanvas {\n  private _canvas:any;\n  get canvas() {\n    return this._canvas;\n  }\n\n  private last_shape:Shape;\n  private shape_offset:number = 0;\n\n  init(element:any, wrapper_element:any) {\n    this._canvas = new global.fabric.Canvas(element);\n    this.set_canvas_size(wrapper_element.clientWidth, wrapper_element.clientHeight);\n\n    this.canvas.setFreeDrawingBrush(Brush[Brush.pencil], {\n      width: 5,\n      color: '#333',\n      opacity: 1,\n    });\n    this.canvas.setDrawingMode(true);\n  }\n\n  /**\n   * Set size of the fabric canvas\n   * @param width\n   * @param height\n   */\n  set_canvas_size(width:number, height:number) {\n    this._canvas.setWidth(width);\n    this._canvas.setHeight(height);\n    this._canvas.layerManager.setBackgroundImageURL();\n  }\n\n  /**\n   * Select color and set fabric color.\n   * @param color\n   */\n  select_color(color:string) {\n    if (this._canvas) {\n      if (this._canvas.freeDrawingBrush) {\n        this._canvas.freeDrawingBrush.color = color;\n      }\n    }\n  }\n\n  set_brush(brush = Brush.pointer, width = 7, color = '#333') {\n    if (brush !== Brush.pointer) {\n      this.canvas.deactivateAll();\n      this.canvas.renderAll();\n      this.canvas.setFreeDrawingBrush(Brush[brush], {\n        width: width,\n        color: color,\n      });\n      this.canvas.setDrawingMode(true);\n      this.last_shape = undefined;\n    } else {\n      this.canvas.setDrawingMode(false);\n    }\n  }\n\n  add_shape(shape:Shape, width = 7, color = '#333') {\n    let shape_object:any;\n    this.set_brush();\n    if (shape === this.last_shape) {\n      this.shape_offset += 10;\n    } else {\n      this.shape_offset = 0;\n    }\n\n    switch (shape) {\n      case Shape.rect:\n        shape_object = new global.fabric.Rect({\n          left: this.canvas.getWidth() / 2 - width * 5 + this.shape_offset,\n          top: this.canvas.getHeight() / 2 - width * 5 + this.shape_offset,\n          fill: color,\n          width: width * 10,\n          height: width * 10,\n        });\n        break;\n      case Shape.round:\n        shape_object = new global.fabric.Circle({\n          left: this.canvas.getWidth() / 2 - width * 5 + this.shape_offset,\n          top: this.canvas.getHeight() / 2 - width * 5 + this.shape_offset,\n          fill: color,\n          radius: width * 10,\n        });\n        break;\n      case Shape.triangle:\n        shape_object = new global.fabric.Triangle({\n          left: this.canvas.getWidth() / 2 - width * 5 + this.shape_offset,\n          top: this.canvas.getHeight() / 2 - width * 5 + this.shape_offset,\n          fill: color,\n          width: width * 10,\n          height: width * 10,\n        });\n        break;\n      case Shape.text:\n        const text = '~';\n        shape_object = new global.fabric.Text(text, {\n          left: this.canvas.getWidth() / 2 + this.shape_offset,\n          top: this.canvas.getHeight() / 2 + this.shape_offset,\n          fontFamily: 'Microsoft YaHei',\n          angle: 0,\n          fill: color,\n          scaleX: 1,\n          scaleY: 1,\n          fontWeight: '',\n          originX: 'center',\n          originY: 'center',\n          hasRotatingPoint: true,\n          centerTransform: true,\n        });\n        break;\n      default:\n        throw(new Error('Shape not found!'));\n    }\n    this.canvas.add(shape_object);\n    this.canvas.setActiveObject(shape_object);\n    this.canvas.fire('path:created', {path: shape_object});\n\n    this.last_shape = shape;\n  }\n\n  add_image(url:string, x:number, y:number) {\n    let image = global.fabric.Image.fromURL(url, (image:any) => {\n      image.set({\n        left: x || 0,\n        top: y || 0,\n        angle: 0,\n      }).scale(1).setCoords();\n      this.canvas.add(image);\n      this.canvas.renderAll();\n    },{crossOrigin:'*'});\n  }\n\n  set_rotate_center(point:Point) {\n    this.canvas.rotationPoint = point;\n  }\n\n  get_rotate_center():Point {\n    return this.canvas.rotationPoint;\n  }\n\n  clear() {\n    this.canvas.clear();\n  }\n\n  get_canvas_width() {\n    return this.canvas.width;\n  }\n\n  get_canvas_height() {\n    return this.canvas.height;\n  }\n\n  get_base64_data_url():string {\n    const param = {};\n    this.canvas.setDrawingMode(false);\n    this.canvas.layerManager.combineAllLayers();\n    const activeObj = this.canvas.getActiveObject();\n    const activeGroup = this.canvas.getActiveGroup();\n    if (activeGroup) {\n      const objectsInGroup = activeGroup.getObjects();\n      this.canvas.discardActiveGroup();\n      objectsInGroup.forEach((obj:any) => {\n        obj.active = false;\n      });\n    }\n    if (activeObj) {\n      activeObj.active = false;\n    }\n    this.canvas.renderAll();\n    this.canvas.setZoom(1);\n\n    const data = document.createElement('canvas');\n    data.width = this.canvas.lowerCanvasEl.width;\n    data.height = this.canvas.lowerCanvasEl.height;\n    (data.getContext('2d') as any).imageSmoothingEnabled = false;\n    data.getContext('2d').drawImage(this.canvas.lowerCanvasEl, 0, 0);\n    return data.toDataURL();\n  }\n}\n\nexport let fabric_canvas = new FabricCanvas();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/fabric_canvas.ts\n **/","(() => {\n  if (!fabric) {\n    return;\n  }\n\n  fabric.StaticCanvas.prototype._setBackstoreDimension =\n    function _setBackstoreDimension(prop, value) {\n      this.lowerCanvasEl[prop] = value;\n\n      if (this.upperCanvasEl) {\n        this.upperCanvasEl[prop] = value;\n      }\n      if (this.cursorCanvasEl) {\n        this.cursorCanvasEl[prop] = value;\n      }\n      if (this.cacheCanvasEl) {\n        this.cacheCanvasEl[prop] = value;\n      }\n\n      this[prop] = value;\n\n      return this;\n    };\n\n  fabric.StaticCanvas.prototype._setCssDimension = function _setCssDimension(prop, value) {\n    this.lowerCanvasEl.style[prop] = value;\n\n    if (this.upperCanvasEl) {\n      this.upperCanvasEl.style[prop] = value;\n    }\n\n    if (this.cursorCanvasEl) {\n      this.cursorCanvasEl.style[prop] = value;\n    }\n\n    if (this.wrapperEl) {\n      this.wrapperEl.style[prop] = value;\n    }\n\n    return this;\n  };\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/override/static-canvas.js\n **/","((fabric) => {\n  if (!fabric) {\n    return;\n  }\n  function isBrushType(brush, type) {\n    return brush.constructor === type.constructor;\n  }\n\n  fabric.Canvas.prototype.initialize = function (el, options) {\n    options || (options = {});\n\n    this._initStatic(el, options);\n    this._initInteractive();\n    this._createCacheCanvas();\n\n    this.layerManager = new fabric.LayerManager(this);\n  };\n\n  fabric.Canvas.prototype._initInteractive = function () {\n    this._currentTransform = null;\n    this._groupSelector = null;\n    this._initWrapperElement();\n    this._createUpperCanvas();\n    this._initEventListeners();\n\n    //todo: fix it for iPad\n    //this._initRetinaScaling();\n\n    this._createCursorCanvas();\n\n    this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this);\n\n    this.calcOffset();\n  };\n\n  fabric.Canvas.prototype.renderAll = function () {\n    var canvasToDrawOn = this.contextContainer, objsToRender;\n\n    if (this.contextTop && this.selection && !this._groupSelector) {\n      this.clearContext(this.contextTop);\n    }\n\n    this.clearContext(canvasToDrawOn);\n\n    this.fire('before:render');\n\n    if (this.clipTo) {\n      fabric.util.clipContext(this, canvasToDrawOn);\n    }\n    this._renderBackground(canvasToDrawOn);\n\n    canvasToDrawOn.save();\n    objsToRender = this._chooseObjectsToRender();\n    //apply viewport transform once for all rendering process\n    canvasToDrawOn.transform.apply(canvasToDrawOn, this.viewportTransform);\n    this._renderObjects(canvasToDrawOn, objsToRender);\n    this.preserveObjectStacking || this._renderObjects(canvasToDrawOn, [this.getActiveGroup()]);\n    canvasToDrawOn.restore();\n\n    if (!this.controlsAboveOverlay && this.interactive) {\n      this.drawControls(canvasToDrawOn);\n    }\n    if (this.clipTo) {\n      canvasToDrawOn.restore();\n    }\n    this._renderOverlay(canvasToDrawOn);\n    if (this.controlsAboveOverlay && this.interactive) {\n      this.drawControls(canvasToDrawOn);\n    }\n\n    this.fire('after:render');\n    return this;\n  };\n\n  fabric.Canvas.prototype.clear = function () {\n    const objects = this._objects.slice();\n    if (this.layerManager) {\n      this.layerManager.clearLayers();\n    }\n    this._objects.length = 0;\n    if (this.discardActiveGroup) {\n      this.discardActiveGroup();\n    }\n    if (this.discardActiveObject) {\n      this.discardActiveObject();\n    }\n    this.clearContext(this.contextContainer);\n    if (this.contextTop) {\n      this.clearContext(this.contextTop);\n    }\n    this.fire('canvas:cleared', { objects });\n    this.renderAll();\n    return this;\n  };\n\n  fabric.Canvas.prototype._createCursorCanvas = function () {\n    this.cursorCanvasEl = this._createCanvasElement();\n    //this.cursorCanvasEl.setAttribute('width', this.width);\n    //this.cursorCanvasEl.setAttribute('height', this.height);\n\n    this.wrapperEl.appendChild(this.cursorCanvasEl);\n\n    this._copyCanvasStyle(this.lowerCanvasEl, this.cursorCanvasEl);\n    this._applyCanvasStyle(this.cursorCanvasEl);\n    this.cursorCanvasEl.style.pointerEvents = 'none';\n\n    this.contextCursor = this.cursorCanvasEl.getContext('2d');\n  };\n\n  fabric.Canvas.prototype._onMouseMoveInDrawingMode = function (e) {\n    var ivt = fabric.util.invertTransform(this.viewportTransform),\n      pointer = fabric.util.transformPoint(this.getPointer(e, true), ivt);\n    if (this._isCurrentlyDrawing) {\n      this.freeDrawingBrush.onMouseMove(pointer);\n    }\n    if (this.freeDrawingBrush.cursorRenderer) {\n      this.freeDrawingBrush.cursorRender(pointer);\n    }\n\n    this.setCursor(this.freeDrawingCursor);\n    this.fire('mouse:move', { e: e });\n\n    var target = this.findTarget(e);\n    if (typeof target !== 'undefined') {\n      target.fire('mousemove', { e: e, target: target });\n    }\n  };\n\n  fabric.Canvas.prototype.setFreeDrawingBrush = function (brush, options) {\n    var myself = this;\n    this.clearContext(this.contextTop);\n    switch (brush) {\n      case 'round':\n        if (this.freeDrawingBrush && isBrushType(this.freeDrawingBrush, fabric.RoundBrush)) {\n          this.freeDrawingBrush.setOptions(options);\n        } else {\n          this.freeDrawingBrush = new fabric.RoundBrush(this, options);\n        }\n        break;\n      case 'line':\n        if (this.freeDrawingBrush && isBrushType(this.freeDrawingBrush, fabric.LineBrush)) {\n          this.freeDrawingBrush.setOptions(options);\n        } else {\n          this.freeDrawingBrush = new fabric.LineBrush(this, options);\n        }\n        break;\n      case 'rect':\n        if (this.freeDrawingBrush && isBrushType(this.freeDrawingBrush, fabric.RectBrush)) {\n          this.freeDrawingBrush.setOptions(options);\n        } else {\n          this.freeDrawingBrush = new fabric.RectBrush(this, options);\n        }\n        break;\n      case 'eraser':\n        if (this.freeDrawingBrush\n          && this.freeDrawingBrush instanceof fabric.EraserBrush) {\n          this.freeDrawingBrush.setOptions(options);\n        } else {\n          this.freeDrawingBrush = new fabric.EraserBrush(this, options);\n        }\n        break;\n      case 'rotate_center':\n        if (this.rotationPoint) {\n          options.point = {\n            x: this.rotationPoint.x,\n            y: this.rotationPoint.y\n          };\n        }\n        if (this.freeDrawingBrush\n          && this.freeDrawingBrush instanceof fabric.PointBrush) {\n          this.freeDrawingBrush.setOptions(options);\n        } else {\n          this.freeDrawingBrush = new fabric.PointBrush(this, function (point) {\n            myself.rotationPoint = {\n              x: point.x,\n              y: point.y\n            }\n          }, options);\n        }\n        if (this.rotationPoint) {\n          this.freeDrawingBrush.renderPoint();\n        }\n        break;\n      case 'pencil':\n      default :\n        if (!(this.freeDrawingBrush\n          && isBrushType(this.freeDrawingBrush, fabric.PencilBrush))) {\n          this.freeDrawingBrush = new fabric.PencilBrush(myself);\n        }\n        for (var prop in options) {\n          if (options.hasOwnProperty(prop)) {\n            this.freeDrawingBrush[prop] = options[prop];\n          }\n        }\n    }\n  };\n\n  fabric.Canvas.prototype.setDrawingMode = function (flag) {\n    if (!this.freeDrawingBrush || this.isDrawingMode === flag) {\n      return;\n    }\n\n    this.clearContext(this.contextTop);\n    if (flag) {\n      this.isDrawingMode = true;\n      this.upperCanvasEl.addEventListener('mouseout', this._onMouseOut);\n    } else {\n      this.isDrawingMode = false;\n      this.upperCanvasEl.removeEventListener('mouseout', this._onMouseOut);\n    }\n  };\n\n  /**\n   * @private\n   * @param {Event} e Event object\n   * @param {fabric.Object} target\n   */\n  fabric.Canvas.prototype._setupCurrentTransform = function (e, target) {\n    if (!target) {\n      return;\n    }\n\n    var pointer = this.getPointer(e),\n      corner = target._findTargetCorner(this.getPointer(e, true)),\n      action = this._getActionFromCorner(target, corner, e),\n      origin = this._getOriginFromCorner(target, corner);\n\n    this._currentTransform = {\n      target: target,\n      action: action,\n      corner: corner,\n      scaleX: target.scaleX,\n      scaleY: target.scaleY,\n      skewX: target.skewX,\n      skewY: target.skewY,\n      offsetX: pointer.x - target.left,\n      offsetY: pointer.y - target.top,\n      originX: origin.x,\n      originY: origin.y,\n      ex: pointer.x,\n      ey: pointer.y,\n      lastX: pointer.x,\n      lastY: pointer.y,\n      left: target.left,\n      top: target.top,\n      theta: fabric.util.radiansToDegrees(target.angle),\n      width: target.width * target.scaleX,\n      mouseXSign: 1,\n      mouseYSign: 1,\n      shiftKey: e.shiftKey,\n      altKey: e.altKey\n    };\n\n    this._currentTransform.original = {\n      angle: target.angle,\n      left: target.left,\n      top: target.top,\n      scaleX: target.scaleX,\n      scaleY: target.scaleY,\n      skewX: target.skewX,\n      skewY: target.skewY,\n      originX: origin.x,\n      originY: origin.y,\n    };\n\n    this._resetCurrentTransform();\n  };\n\n\n})(fabric);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/override/canvas.js\n **/","/**\n * Created by GreenDou on 16/4/11.\n * Canvas Events Functions\n */\n\n(function () {\n  \"use strict;\"\n  if (!fabric) {\n    return;\n  }\n\n  fabric.Canvas.prototype._bindEvents = function () {\n    this._onMouseDown = this._onMouseDown.bind(this);\n    this._onMouseMove = this._onMouseMove.bind(this);\n    this._onMouseUp = this._onMouseUp.bind(this);\n    this._onMouseOut = this._onMouseOut.bind(this);\n    this._onResize = this._onResize.bind(this);\n    this._onGesture = this._onGesture.bind(this);\n    this._onDrag = this._onDrag.bind(this);\n    this._onShake = this._onShake.bind(this);\n    this._onLongPress = this._onLongPress.bind(this);\n    this._onOrientationChange = this._onOrientationChange.bind(this);\n    this._onMouseWheel = this._onMouseWheel.bind(this);\n  };\n\n  fabric.Canvas.prototype._onMouseOut = function (e) {\n    if (this.isDrawingMode) {\n      this.clearContext(this.contextCursor);\n    }\n  };\n\n  fabric.Canvas.prototype._finalizeCurrentTransform = function () {\n    const transform = this._currentTransform;\n    const target = transform.target;\n    // const oldTop = target.top;\n    // const oldLeft = target.left;\n\n    if (target._scaling) {\n      target._scaling = false;\n    }\n\n    target.setCoords();\n\n    // only fire :modified event if target coordinates were changed during mousedown-mouseup\n    if (this.stateful && target.hasStateChanged()) {\n      this.fire('object:modified', {\n        target,\n        newTop: target.top,\n        newLeft: target.left,\n        newAngle: target.angle,\n        newScaleX: target.scaleX,\n        newScaleY: target.scaleY,\n        oldTop: transform.original.top,\n        oldLeft: transform.original.left,\n        oldAngle: transform.original.angle,\n        oldScaleX: transform.original.scaleX,\n        oldScaleY: transform.original.scaleY,\n        action: transform.action,\n      });\n      target.fire('modified');\n    }\n\n    this._restoreOriginXY(target);\n  };\n})();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/override/canvas-events.js\n **/","(() => {\n  if (!fabric) {\n    return;\n  }\n  fabric.BaseBrush.prototype.opacity = 1;\n\n  fabric.BaseBrush.prototype.setOptions = function setOptions(options) {\n    // for (var prop in options) {\n    //   if (options.hasOwnProperty(prop)) {\n    //     this[prop] = options[prop];\n    //   }\n    // }\n    Object.assign(this, options);\n  };\n  fabric.BaseBrush.prototype._setBrushStyles = function _setBrushStyles() {\n    const ctx = this.canvas.contextTop;\n\n    ctx.strokeStyle = this.color;\n    ctx.lineWidth = this.width;\n    ctx.lineCap = this.strokeLineCap;\n    ctx.lineJoin = this.strokeLineJoin;\n    // ctx.globalAlpha = this.opacity;\n    if (this.strokeDashArray && fabric.StaticCanvas.supports('setLineDash')) {\n      ctx.setLineDash(this.strokeDashArray);\n    }\n  };\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/override/base-brush.js\n **/","(() => {\n  if (!fabric) {\n    return;\n  }\n\n  fabric.PencilBrush.prototype.initialize = function initialize(canvas) {\n    this.canvas = canvas;\n    this._points = [];\n\n    //  cursor\n    this.canvas.freeDrawingCursor = 'none';\n    this.cursorRenderer = new fabric.CursorRenderer(this.canvas.cursorCanvasEl, this);\n  };\n\n  fabric.PencilBrush.prototype._prepareForDrawing = function _prepareForDrawing(pointer) {\n    const p = new fabric.Point(pointer.x, pointer.y);\n\n    this._reset();\n    this._addPoint(p);\n\n    this.canvas.contextTop.moveTo(p.x, p.y);\n\n    if (this.cursorRenderer) {\n      this.cursorRenderer.prepareForRender();\n    }\n  };\n\n  fabric.PencilBrush.prototype.cursorRender = function cursorRender(pointer) {\n    this.canvas.clearContext(this.canvas.contextCursor);\n    this.cursorRenderer.renderCircle(pointer.x, pointer.y);\n  };\n\n  /**\n   * Creates fabric.Path object to add on canvas\n   * @param {String} pathData Path data\n   * @return {fabric.Path} Path to add on canvas\n   */\n  fabric.PencilBrush.prototype.createPath = function createPath(pathData) {\n    const path = new fabric.Path(pathData, {\n      fill: null,\n      stroke: this.color,\n      strokeWidth: this.width,\n      strokeLineCap: this.strokeLineCap,\n      strokeLineJoin: this.strokeLineJoin,\n      strokeDashArray: this.strokeDashArray,\n      originX: 'center',\n      originY: 'center',\n      // opacity: this.opacity,\n    });\n\n    if (this.shadow) {\n      this.shadow.affectStroke = true;\n      path.setShadow(this.shadow);\n    }\n\n    return path;\n  };\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/override/pencil-brush.js\n **/","((fabric) => {\n  if (!fabric) {\n    return;\n  }\n\n  class Layer {\n    constructor(canvasEl, name) {\n      this.canvasEl = canvasEl;\n      this.context = canvasEl.getContext('2d');\n      this.name = name || `${Layer.count++}`;\n      this.parent = null;\n      this.objects = [];\n      //  Use show&hideLayer to set this value,otherwise it won't work\n      this.visible = true;\n      // this.opacity = 1;\n      this.backgroundColor = null;\n      this.backgroundImageURL = null;\n      // this.thumbnail = null;\n      this.undoStack = [];\n      this.redoStack = [];\n    }\n\n    static resetCount() {\n      Layer.count = 1;\n    }\n\n    set opacity(newValue) {\n      this.context.globalAlpha = newValue;\n      this.parent.parentCanvas.contextTop.globalAlpha = newValue;\n      this.parent.parentCanvas.renderAll();\n    }\n\n    get opacity() {\n      return this.context.globalAlpha;\n    }\n\n    get thumbnail() {\n      return this.canvasEl.toDataURL();\n    }\n  }\n  Layer.count = 1; // Static prop\n  Object.assign(fabric, {\n    Layer,\n  });\n  // fabric.Layer = Layer;\n})(fabric);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layer.js\n **/","((fabric) => {\n  if (!fabric) {\n    return;\n  }\n\n  class LayerManager {\n    constructor(parentCanvas) {\n      this.layerList = [];\n      this.currentLayer = null;\n      this.parentCanvas = parentCanvas;\n\n      if (parentCanvas) {\n        this.currentLayer = new fabric.Layer(parentCanvas.lowerCanvasEl);\n        this.currentLayer.objects = parentCanvas._objects;\n        this.addLayer(this.currentLayer);\n      }\n    }\n\n    /**\n     * Add a new layer into fabric-canvas and layer-manager\n     * @param lyr layer to add (if have one)\n     */\n    addLayer(lyr) {\n      const upperCanvasEl = this.parentCanvas.upperCanvasEl;\n      let layer = lyr;\n      if (!layer) {\n        const canvasEl = this.parentCanvas._createCanvasElement();\n        layer = new fabric.Layer(canvasEl);\n      } else if (!layer.canvasEl) {\n        layer.canvasEl = new this.parentCanvas._createCanvasElement();\n      }\n      this.layerList.push(layer);\n      layer.parent = this;\n      this.parentCanvas.wrapperEl.insertBefore(layer.canvasEl, upperCanvasEl);\n\n      this.parentCanvas._copyCanvasStyle(upperCanvasEl, layer.canvasEl);\n      this.parentCanvas._applyCanvasStyle(layer.canvasEl);\n\n      this.selectLayer(this.layerList.length - 1);\n    }\n\n    /**\n     * Remove a layer\n     * @param index :layer's index\n     */\n    removeLayer(index) {\n      if (index < this.layerList.length && this.layerList.length > 1) {\n        if (this.layerList[index] === this.currentLayer) {\n          if (index === 0) {\n            this.selectLayer(1);\n          } else {\n            this.selectLayer(index - 1);\n          }\n        }\n        this.parentCanvas.wrapperEl.removeChild(this.layerList[index].canvasEl);\n        this.layerList.splice(index, 1);\n      }\n    }\n\n    /**\n     * Up a layer's order in layer manager\n     * @param index\n     */\n    upLayer(index) {\n      if (index !== this.layerList.length - 1) {\n        this.moveLayer(index + 1, index);\n      }\n    }\n\n    /**\n     * Move a layer to dest position in layer manager\n     * @param dest\n     * @param src\n     */\n    moveLayer(dest, src) {\n      if (dest === src) {\n        return;\n      }\n      if (dest === this.layerList.length - 1) {\n        this.parentCanvas.wrapperEl.insertBefore(this.layerList[src].canvasEl,\n          this.parentCanvas.upperCanvasEl);\n      } else {\n        this.parentCanvas.wrapperEl.insertBefore(this.layerList[src].canvasEl,\n          this.layerList[dest].canvasEl);\n      }\n      if (dest > src) {\n        this.layerList.splice(dest + 1, 0, this.layerList[src]);\n        this.layerList.splice(src, 1);\n      } else {\n        this.layerList.splice(dest, 0, this.layerList[src]);\n        this.layerList.splice(src + 1, 1);\n      }\n    }\n\n    /**\n     * Down a layer in layer manager\n     * @param index\n     */\n    downLayer(index) {\n      if (index !== 0) {\n        this.moveLayer(index - 1, index);\n      }\n    }\n\n    /**\n     * Show a layer\n     * @param index\n     */\n    showLayer(index) {\n      if (index < this.layerList.length) {\n        this.layerList[index].canvasEl.style.display = null;\n        for (let i = 0; i < this.layerList[index].objects.length; ++i) {\n          this.layerList[index].objects[i].visible = true;\n        }\n        this.layerList[index].visible = true;\n        this.parentCanvas.renderAll();\n      }\n    }\n\n    /**\n     * Hide a layer\n     * @param index\n     */\n    hideLayer(index) {\n      if (index < this.layerList.length) {\n        this.layerList[index].canvasEl.style.display = 'none';\n        for (let i = 0; i < this.layerList[index].objects.length; ++i) {\n          this.layerList[index].objects[i].visible = false;\n        }\n        this.layerList[index].visible = false;\n        this.parentCanvas.renderAll();\n        //  todo: will cause error in trim-canvas for width is 0\n      }\n    }\n\n    /**\n     * Toggle a layer's visibility\n     * @param index\n     */\n    toggleLayerVisible(index) {\n      if (this.layerList[index].visible) {\n        this.hideLayer(index);\n      } else {\n        this.showLayer(index);\n      }\n    }\n\n    /**\n     * Select Layer\n     * @param index\n     */\n    selectLayer(index) {\n      if (index < this.layerList.length) {\n        this.parentCanvas.deactivateAllWithDispatch();\n        this.parentCanvas.renderAll();\n        this.currentLayer = this.layerList[index];\n        this.parentCanvas.lowerCanvasEl = this.currentLayer.canvasEl;\n        this.parentCanvas.contextContainer = this.currentLayer.canvasEl.getContext('2d');\n        this.parentCanvas._objects = this.currentLayer.objects;\n        this.setBackgroundColor();\n        this.setBackgroundImageURL();\n      }\n    }\n\n    /**\n     * Get the position of the layer in layer manager\n     * @param layer\n     * @returns {number|Number}\n     */\n    getIndex(layer) {\n      return this.layerList.indexOf(layer);\n    }\n\n    /**\n     *  Reset layers\n     */\n    clearLayers() {\n      this.selectLayer(0);\n      this.showLayer(0);\n      while (this.layerList.length > 1) {\n        this.removeLayer(1);\n      }\n    }\n\n    /**\n     * Make everything into one layer and kill others\n     */\n    combineAllLayers() {\n      this.selectLayer(0);\n      while (this.layerList.length > 1) {\n        this.currentLayer.objects = this.currentLayer.objects.concat(this.layerList[1].objects);\n        this.parentCanvas._objects = this.currentLayer.objects;\n        this.removeLayer(1);\n      }\n    }\n\n    /**\n     * Combine layers\n     * @param layers:Array<Number> index of layers\n     */\n    combineLayers(layers) {\n      this.selectLayer(layers[0]);\n      while (layers.length > 1) {\n        if (layers[1] < this.layerList.length) {\n          this.currentLayer.objects =\n            this.currentLayer.objects.concat(this.layerList[layers[1]].objects);\n          this.parentCanvas._objects = this.currentLayer.objects;\n          this.removeLayer(layers[1]);\n        }\n      }\n    }\n\n    setBackgroundColor(color) {\n      if (color) {\n        this.currentLayer.backgroundColor = color;\n      }\n      this.parentCanvas.setBackgroundColor(this.currentLayer.backgroundColor,\n        this.parentCanvas.renderAll.bind(this.parentCanvas));\n    }\n\n    setBackgroundImageURL(url) {\n      if (url !== undefined) {\n        this.currentLayer.backgroundImageURL = url;\n      }\n      if (this.currentLayer.backgroundImageURL) {\n        this.parentCanvas.setBackgroundImage(this.currentLayer.backgroundImageURL,\n          this.parentCanvas.renderAll.bind(this.parentCanvas),\n          {\n            left: this.parentCanvas.width / 2,\n            top: this.parentCanvas.height / 2,\n            originX: 'center',\n            originY: 'center',\n            crossOrigin: 'anonymous',\n          }\n        );\n      } else {\n        this.parentCanvas.backgroundImage = null;\n        this.parentCanvas.renderAll();\n      }\n    }\n  }\n  Object.assign(fabric, {\n    LayerManager,\n  });\n})(fabric);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layer-manager.js\n **/","(() => {\n  if (!fabric) {\n    return;\n  }\n\n  class CursorRenderer {\n    constructor(canvas, brush, options) {\n      this.canvas = canvas;\n      this.brush = brush;\n      this.ctx = canvas.getContext('2d');\n\n      if (options) {\n        this.width = options.width || 1;\n        this.color = options.color || 'black';\n      } else {\n        this.width = 1;\n        this.color = 'black';\n      }\n    }\n\n    prepareForRender() {\n      const ctx = this.ctx;\n      ctx.lineWidth = this.width;\n      ctx.strokeStyle = this.color;\n    }\n    renderCircle(x, y) {\n      const ctx = this.ctx;\n      const width = this.brush.width;\n      ctx.fillStyle = 'rgba(255,255,255,0.5)';\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = 'black';\n      ctx.beginPath();\n      ctx.arc(x, y, width / 2, 0, Math.PI * 2, true);\n      ctx.stroke();\n      ctx.fill();\n    }\n\n    renderPoint(x, y) {\n      const ctx = this.ctx;\n      ctx.fillStyle = 'rgba(255,255,255,0.5)';\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = 'black';\n      for (let i = 0; i < 20; i = i + 2) {\n        ctx.beginPath();\n        ctx.arc(x, y, 20, Math.PI * 2 * i / 20, Math.PI * 2 * (i + 1) / 20, false);\n        ctx.stroke();\n      }\n      ctx.beginPath();\n      ctx.arc(x, y, 20, 0, Math.PI * 2, true);\n      ctx.fill();\n\n      ctx.beginPath();\n      ctx.moveTo(x, y - 1);\n      ctx.lineTo(x, y + 1);\n      ctx.stroke();\n      ctx.moveTo(x - 1, y);\n      ctx.lineTo(x + 1, y);\n      ctx.stroke();\n    }\n  }\n\n  Object.assign(fabric, {\n    CursorRenderer,\n  });\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/cursor-render.js\n **/","/**\n * Created by GreenDou on 16/4/9.\n * Eraser Brush\n */\n\nimport './trim-canvas.js';\n\n(() => {\n  /**\n   * EraserBrush class\n   * @class fabric.EraserBrush\n   * @extends fabric.BaseBrush\n   */\n  fabric.EraserBrush = fabric.util.createClass(\n    fabric.BaseBrush, /** @lends fabric.PencilBrush.prototype */ {\n\n      /**\n       * Constructor\n       * @param {fabric.Canvas} canvas\n       * @param options\n       * @return {fabric.PencilBrush} Instance of a pencil brush\n       */\n      initialize: function (canvas, options) {\n        this.canvas = canvas;\n        this.backupCanvasEl = this.canvas._createCanvasElement();\n        this.backupContext = this.backupCanvasEl.getContext('2d');\n        this.canvas._copyCanvasStyle(this.canvas.upperCanvasEl, this.backupCanvasEl);\n        this.canvas._applyCanvasStyle(this.backupCanvasEl);\n        this.backupContext.imageSmoothingEnabled = false;\n        this.canvas.freeDrawingCursor = 'none';\n        this._points = [];\n        this.strokeStyle = 'rgb(255,255,255)';\n        this.width = 10;\n        //  init options\n\n        //  Dynamic events\n        //  this.onMouseOut = this.onMouseOut.bind(this);\n        //  this.events = {\n        //    mouseout: this.canvas._onMouseOut\n        //  };\n\n        for (let prop in options) {\n          if (options.hasOwnProperty(prop)) {\n            this[prop] = options[prop];\n          }\n        }\n\n        this.cursorRenderer = new fabric.CursorRenderer(this.canvas.cursorCanvasEl, this);\n      },\n\n      /**\n       * Inovoked on mouse down\n       * @param {Object} pointer\n       */\n      onMouseDown: function (pointer) {\n        this._prepareForDrawing(pointer);\n        // capture coordinates immediately\n        // this allows to draw dots (when movement never occurs)\n        this._captureDrawingPath(pointer);\n        this._render();\n      },\n\n      /**\n       * Inovoked on mouse move\n       * @param {Object} pointer\n       */\n      onMouseMove: function (pointer) {\n        this._captureDrawingPath(pointer);\n        // redraw curve\n        // clear top canvas\n        this.canvas.clearContext(this.canvas.contextTop);\n        this._render();\n      },\n\n      /**\n       * Invoked on mouse up\n       */\n      onMouseUp: function () {\n        this._finalizeAndAddPath();\n      },\n\n      onMouseOut: function (options) {\n        this.canvas.clearContext(this.canvas.contextCursor);\n      },\n\n      /**\n       * @private\n       * @param {Object} pointer Actual mouse position related to the canvas.\n       */\n      _prepareForDrawing: function (pointer) {\n\n        let p = new fabric.Point(pointer.x, pointer.y);\n\n        this._reset();\n        this._addPoint(p);\n\n        this.canvas.clearContext(this.backupCanvasEl.getContext('2d'));\n        this.backupContext.drawImage(this.canvas.lowerCanvasEl, 0, 0, this.backupCanvasEl.width, this.backupCanvasEl.height);\n        this.canvas.clearContext(this.canvas.contextContainer);\n        this.canvas.contextTop.moveTo(p.x, p.y);\n\n        this.cursorRenderer.prepareForRender();\n      },\n\n      /**\n       * @private\n       * @param {fabric.Point} point Point to be added to points array\n       */\n      _addPoint: function (point) {\n        this._points.push(point);\n      },\n\n      /**\n       * Clear points array and set contextTop canvas style.\n       * @private\n       */\n      _reset: function () {\n        this._points.length = 0;\n\n        this._setBrushStyles();\n        this._setShadow();\n      },\n\n      _setBrushStyles: function () {\n        let ctx = this.canvas.contextTop;\n        ctx.strokeStyle = `rgba(255,255,255,${this.opacity})`;\n        ctx.lineWidth = this.width;\n        ctx.lineCap = this.strokeLineCap;\n        ctx.lineJoin = this.strokeLineJoin;\n        // ctx.globalAlpha = 1;\n        if (this.strokeDashArray && fabric.StaticCanvas.supports(\"setLineDash\")) {\n          ctx.setLineDash(this.strokeDashArray);\n        }\n      },\n\n      /**\n       * @private\n       * @param {Object} pointer Actual mouse position related to the canvas.\n       */\n      _captureDrawingPath: function (pointer) {\n        let pointerPoint = new fabric.Point(pointer.x, pointer.y);\n        this._addPoint(pointerPoint);\n      },\n\n      /**\n       * Draw a smooth path on the topCanvas using quadraticCurveTo\n       * @private\n       */\n      _render: function () {\n        let ctx = this.canvas.contextTop,\n          v = this.canvas.viewportTransform,\n          p1 = this._points[0],\n          p2 = this._points[1];\n\n        ctx.save();\n        ctx.drawImage(this.backupCanvasEl, 0, 0);\n        ctx.globalCompositeOperation = 'destination-out';\n        ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n        ctx.beginPath();\n\n        //if we only have 2 points in the path and they are the same\n        //it means that the user only clicked the canvas without moving the mouse\n        //then we should be drawing a dot. A path isn't drawn between two identical dots\n        //that's why we set them apart a bit\n        if (this._points.length === 2 && p1.x === p2.x && p1.y === p2.y) {\n          p1.x -= 0.5;\n          p2.x += 0.5;\n        }\n        ctx.moveTo(p1.x, p1.y);\n\n        for (let i = 1, len = this._points.length; i < len; i++) {\n          // we pick the point between pi + 1 & pi + 2 as the\n          // end point and p1 as our control point.\n          let midPoint = p1.midPointFrom(p2);\n          ctx.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n\n          p1 = this._points[i];\n          p2 = this._points[i + 1];\n        }\n        // Draw last line as a straight line while\n        // we wait for the next point to be able to calculate\n        // the bezier control point\n        ctx.lineTo(p1.x, p1.y);\n        ctx.stroke();\n        ctx.restore();\n      },\n\n      /**\n       * Converts points to SVG path\n       * @param {Array} points Array of points\n       * @param {Number} minX\n       * @param {Number} minY\n       * @return {String} SVG path\n       */\n      convertPointsToSVGPath: function (points) {\n        let path = [],\n          p1 = new fabric.Point(points[0].x, points[0].y),\n          p2 = new fabric.Point(points[1].x, points[1].y);\n\n        path.push('M ', points[0].x, ' ', points[0].y, ' ');\n        for (let i = 1, len = points.length; i < len; i++) {\n          let midPoint = p1.midPointFrom(p2);\n          // p1 is our bezier control point\n          // midpoint is our endpoint\n          // start point is p(i-1) value.\n          path.push('Q ', p1.x, ' ', p1.y, ' ', midPoint.x, ' ', midPoint.y, ' ');\n          p1 = new fabric.Point(points[i].x, points[i].y);\n          if ((i + 1) < points.length) {\n            p2 = new fabric.Point(points[i + 1].x, points[i + 1].y);\n          }\n        }\n        path.push('L ', p1.x, ' ', p1.y, ' ');\n        return path;\n      },\n\n      /**\n       * Creates fabric.Path object to add on canvas\n       * @param {String} pathData Path data\n       * @return {fabric.Path} Path to add on canvas\n       */\n      createPath: function (pathData) {\n        let path = new fabric.Path(pathData, {\n          fill: null,\n          stroke: this.color,\n          strokeWidth: this.width,\n          strokeLineCap: this.strokeLineCap,\n          strokeLineJoin: this.strokeLineJoin,\n          strokeDashArray: this.strokeDashArray,\n          originX: 'center',\n          originY: 'center'\n        });\n\n        if (this.shadow) {\n          this.shadow.affectStroke = true;\n          path.setShadow(this.shadow);\n        }\n\n        return path;\n      },\n\n      /**\n       * On mouseup after drawing the path on contextTop canvas\n       * we use the points captured to create an new fabric path object\n       * and add it to the fabric canvas.\n       */\n      _finalizeAndAddPath: function () {\n        let ctx = this.canvas.contextTop,\n          data, trimData, layerObject,\n          myself = this,\n          currentLayer = this.canvas.layerManager.currentLayer;\n        ctx.closePath();\n        trimData = trimCanvasWithPosition(this.canvas.upperCanvasEl);\n        data = trimData.canvas.toDataURL('png');\n\n        fabric.Image.fromURL(data, (image) => {\n          image.set({\n              left: trimData.left,\n              top: trimData.top,\n              angle: 0\n            })\n            .scale(1)\n            .setCoords();\n          // this.canvas.setHeight(this.height);\n          // this.canvas.setWidth(this.width);\n          // this.canvas.renderAll();\n          myself.canvas.fire('eraser:done', {\n            objects: currentLayer.objects.slice(),\n            image,\n          });\n          this.canvas.add(image);\n          myself.canvas.contextTop.imageSmoothingEnabled = false;\n          myself.canvas.clearContext(myself.canvas.contextTop);\n          currentLayer.objects.splice(0, currentLayer.objects.length, image);\n          myself.canvas.renderAll();\n          myself.canvas.contextTop.imageSmoothingEnabled = true;\n        });\n\n      },\n\n      cursorRender: function (pointer) {\n        this.canvas.clearContext(this.canvas.contextCursor);\n        this.cursorRenderer.renderCircle(pointer.x, pointer.y);\n      }\n    });\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/eraser-brush.js\n **/","(function () {\n    window.trim_canvas = function (c) {\n        // open new window with trimmed image:\n        return getCanvas(c).canvas;\n    };\n\n    /**\n     * Trim with Position Info\n     * @param c Canvas Context\n     * @param {{x:number,y:number}} rc Rotation Center\n     * @returns {{canvas: *, left: null, top: null, rc: *}}\n     */\n    window.trimCanvasWithPosition = function (c, rc) {\n        \"use strict\";\n        var result = getCanvas(c, rc);\n        if(rc) {\n            rc.x = rc.x - result.bound.left;\n            rc.y = rc.y - result.bound.top;\n        }\n\n        // open new window with trimmed image:\n        return {\n            canvas: result.canvas,\n            left: result.bound.left,\n            top: result.bound.top,\n            rc: rc\n        };\n    };\n\n    function detectBounds(c, rc) {\n        var ctx = c.getContext('2d'),\n            pixels = ctx.getImageData(0, 0, c.width, c.height),\n            l = pixels.data.length,\n            i,\n            bound = {\n                top: null,\n                left: null,\n                right: null,\n                bottom: null\n            },\n            x, y;\n\n        for (i = 0; i < l; i += 4) {\n            if (pixels.data[i + 3] !== 0) {\n                x = (i / 4) % c.width;\n                y = ~~((i / 4) / c.width);\n\n                if (bound.top === null) {\n                    bound.top = y;\n                }\n\n                if (bound.left === null) {\n                    bound.left = x;\n                } else if (x < bound.left) {\n                    bound.left = x;\n                }\n\n                if (bound.right === null) {\n                    bound.right = x;\n                } else if (bound.right < x) {\n                    bound.right = x;\n                }\n\n                if (bound.bottom === null) {\n                    bound.bottom = y;\n                } else if (bound.bottom < y) {\n                    bound.bottom = y;\n                }\n            }\n        }\n\n        if(rc){\n            if (bound.top > rc.y) {\n                bound.top = rc.y;\n            }\n            if (bound.bottom < rc.y) {\n                bound.bottom = rc.y;\n            }\n            if (bound.left > rc.x) {\n                bound.left = rc.x;\n            }\n            if (bound.right < rc.x) {\n                bound.right = rc.x;\n            }\n        }\n\n        bound.top = Math.max(bound.top - 10, 0);\n        bound.bottom = Math.min(bound.bottom + 10, c.height);\n        bound.left = Math.max(bound.left - 10, 0);\n        bound.right = Math.min(bound.right + 10, c.width);\n\n        return bound;\n    }\n\n    function getCanvas (c, rc) {\n        \"use strict\";\n        var copy = document.createElement('canvas').getContext('2d');\n        var bound = detectBounds(c, rc);\n        var trimHeight = bound.bottom - bound.top,\n            trimWidth = bound.right - bound.left;\n\n        copy.imageSmoothingEnabled = false;\n        copy.canvas.width = trimWidth;\n        copy.canvas.height = trimHeight;\n        copy.drawImage(c, bound.left, bound.top, trimWidth, trimHeight,\n            0, 0, trimWidth, trimHeight);\n        return {\n            canvas: copy.canvas,\n            bound: bound\n        };\n    }\n\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/trim-canvas.js\n **/","/**\n * Created by GreenDou on 16/4/12.\n * Point Brush\n */\n\n(function () {\n\n    /**\n     * PointBrush class\n     * @class fabric.PointBrush\n     * @extends fabric.BaseBrush\n     */\n    fabric.PointBrush = fabric.util.createClass(fabric.BaseBrush,\n        /** @lends fabric.PointBrush.prototype */\n        {\n\n            /**\n             * Constructor\n             * @param {fabric.Canvas} canvas\n             * @param {function} callback\n             * @param options\n             * @return {fabric.PencilBrush} Instance of a pencil brush\n             */\n            initialize: function (canvas, callback, options) {\n                this.canvas = canvas;\n                this.callback = callback;\n                this.canvas.freeDrawingCursor = 'none';\n                this.width = 1;\n\n                for (var prop in options) {\n                    if (options.hasOwnProperty(prop)) {\n                        this[prop] = options[prop];\n                    }\n                }\n                this.cursorRenderer = new fabric.CursorRenderer(this.canvas.cursorCanvasEl, this);\n                this.cursorRenderer.width = this.width;\n            },\n\n            /**\n             * Inovoked on mouse down\n             * @param {Object} pointer\n             */\n            onMouseDown: function (pointer) {\n                this._prepareForDrawing(pointer);\n                this.point = pointer;\n                // capture coordinates immediately\n                // this allows to draw dots (when movement never occurs)\n                //this._captureDrawingPath(pointer);\n                this._render(pointer);\n            },\n\n            /**\n             * Inovoked on mouse move\n             * @param {Object} pointer\n             */\n            onMouseMove: function (pointer) {\n                //this._captureDrawingPath(pointer);\n                // redraw curve\n                // clear top canvas\n                this.canvas.clearContext(this.canvas.contextTop);\n                this.point = pointer;\n                this._render(pointer);\n            },\n\n            /**\n             * Invoked on mouse up\n             */\n            onMouseUp: function () {\n                this._finalizeAndCallback();\n            },\n\n            /**\n             * @private\n             * @param {Object} pointer Actual mouse position related to the canvas.\n             */\n            _prepareForDrawing: function (pointer) {\n\n                this._reset();\n                this.canvas.clearContext(this.canvas.contextTop);\n                this.cursorRenderer.prepareForRender();\n            },\n\n            /**\n             * Clear points array and set contextTop canvas style.\n             * @private\n             */\n            _reset: function () {\n                this._setBrushStyles();\n                this._setShadow();\n            },\n\n            _setBrushStyles: function () {\n                \"use strict\";\n                var ctx = this.canvas.contextTop;\n                ctx.lineWidth = this.width;\n                ctx.lineCap = this.strokeLineCap;\n                ctx.lineJoin = this.strokeLineJoin;\n                if (this.strokeDashArray && fabric.StaticCanvas.supports(\"setLineDash\")) {\n                    ctx.setLineDash(this.strokeDashArray);\n                }\n            },\n\n            /**\n             * Draw a smooth path on the topCanvas using quadraticCurveTo\n             * @private\n             */\n            _render: function (pointer) {\n                var ctx = this.canvas.contextTop,\n                    v = this.canvas.viewportTransform,\n                    x = pointer.x,\n                    y = pointer.y;\n                ctx.lineWidth = 1;\n                ctx.save();\n                ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n                ctx.fillStyle = 'rgba(255,255,255,0.5)';\n                ctx.strokeStyle = 'rgba(0,0,0,0.5)';\n                ctx.beginPath();\n                ctx.arc(x, y, 20, 0, Math.PI * 2);\n                ctx.stroke();\n                ctx.fill();\n                ctx.lineWidth = 1;\n                ctx.moveTo(x, 0);\n                ctx.lineTo(x, this.canvas.height);\n                ctx.stroke();\n                ctx.moveTo(0, y);\n                ctx.lineTo(this.canvas.width, y);\n                ctx.stroke();\n            },\n\n            /**\n             * On mouseup after drawing the path on contextTop canvas\n             * we use the points captured to create an new fabric path object\n             * and add it to the fabric canvas.\n             */\n            _finalizeAndCallback: function () {\n                \"use strict\";\n                if (this.callback) {\n                    this.callback(this.point);\n                }\n            },\n\n            cursorRender: function (pointer) {\n                this.canvas.clearContext(this.canvas.contextCursor);\n                this.cursorRenderer.renderPoint(pointer.x, pointer.y);\n                //this.canvas.contextTop.drawImage(this.canvas.cursorCanvasEl,0,0);\n            },\n\n            renderPoint: function () {\n                \"use strict\";\n                this._render(this.point);\n            }\n\n\n        });\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/point-brush.js\n **/","class LineBrush extends fabric.PencilBrush {\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @param options\n   * @return {fabric.PencilBrush} Instance of a pencil brush\n   */\n  initialize(canvas, options) {\n    this.canvas = canvas;\n    this._points = [];\n\n    //  cursor\n    this.canvas.freeDrawingCursor = 'none';\n    this.cursorRenderer = new fabric.CursorRenderer(this.canvas.cursorCanvasEl, this);\n\n    this.setOptions(options);\n  }\n\n  /**\n   * Inovoked on mouse move\n   * @param {Object} pointer\n   */\n  onMouseMove(pointer) {\n    this._captureDrawingPath(pointer);\n    // redraw curve\n    // clear top canvas\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._render();\n  }\n\n  _addPoint(point) {\n    if (this._points.length < 1) {\n      this._points.push(point);\n    } else {\n      this._points[1] = point;\n    }\n  }\n\n  /**\n   * On mouseup after drawing the path on contextTop canvas\n   * we use the points captured to create an new fabric path object\n   * and add it to the fabric canvas.\n   */\n  _finalizeAndAddPath() {\n    const ctx = this.canvas.contextTop;\n\n    var pathData = this.convertPointsToSVGPath(this._points).join('');\n    if (pathData === 'M 0 0 Q 0 0 0 0 L 0 0') {\n      // do not create 0 width/height paths, as they are\n      // rendered inconsistently across browsers\n      // Firefox 4, for example, renders a dot,\n      // whereas Chrome 10 renders nothing\n      this.canvas.renderAll();\n      return;\n    }\n\n    var path = this.createPath(pathData);\n    \n    \n\n    this.canvas.add(path);\n    path.setCoords();\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._resetShadow();\n    this.canvas.renderAll();\n\n    // fire event 'path' created\n    this.canvas.fire('path:created', { path });\n  }\n}\n\nObject.assign(fabric, {\n  LineBrush,\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/line-brush.js\n **/","class RectBrush extends fabric.LineBrush {\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @param options\n   * @return {fabric.PencilBrush} Instance of a pencil brush\n   */\n  initialize(canvas, options) {\n    this.canvas = canvas;\n    this._points = [];\n\n    //  cursor\n    this.canvas.freeDrawingCursor = 'crosshair';\n\n    this.setOptions(options);\n  }\n\n  /**\n   * Set brush style\n   * @private\n   */\n  _setBrushStyles() {\n    const ctx = this.canvas.contextTop;\n    ctx.fillStyle = this.color;\n  }\n\n  _render() {\n    const ctx = this.canvas.contextTop;\n    const v = this.canvas.viewportTransform;\n    let p1 = this._points[0];\n    let p2 = this._points[1];\n\n    ctx.save();\n    ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n    ctx.fillRect(p1.x, p1.y, p2.x - p1.x, p2.y - p1.y);\n    ctx.restore();\n  }\n\n  /**\n   * On mouseup after drawing the path on contextTop canvas\n   * we use the points captured to create an new fabric path object\n   * and add it to the fabric canvas.\n   */\n  _finalizeAndAddPath() {\n    const point1 = this._points[0];\n    const point2 = this._points[1];\n    const rect = new fabric.Rect({\n      top: Math.min(point1.y, point2.y),\n      left: Math.min(point1.x, point2.x),\n      width: point2.x - point1.x,\n      height: point2.y - point1.y,\n      fill: this.color,\n    });\n    this.canvas.add(rect);\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this.canvas.renderAll();\n\n    // fire event 'path' created\n    this.canvas.fire('path:created', { path: rect });\n  }\n}\n\nObject.assign(fabric, {\n  RectBrush,\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/rect-brush.js\n **/","class RoundBrush extends fabric.RectBrush {\n  _render() {\n    const ctx = this.canvas.contextTop;\n    const v = this.canvas.viewportTransform;\n    const p1 = this._points[0];\n    const p2 = this._points[1];\n    ctx.save();\n    ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n    ctx.beginPath();\n    ctx.arc(\n      (p2.x + p1.x) / 2,\n      (p2.y + p1.y) / 2,\n      Math.min(Math.max(p2.x - p1.x, p1.x - p2.x), Math.max(p2.y - p1.y, p1.y - p2.y)) / 2,\n      0,\n      2 * Math.PI\n    );\n    ctx.fill();\n    ctx.restore();\n  }\n\n  /**\n   * On mouseup after drawing the path on contextTop canvas\n   * we use the points captured to create an new fabric path object\n   * and add it to the fabric canvas.\n   */\n  _finalizeAndAddPath() {\n    const p1 = this._points[0];\n    const p2 = this._points[1];\n    const round = new fabric.Circle({\n      top: (p2.y + p1.y) / 2,\n      left: (p2.x + p1.x) / 2,\n      originX: 'center',\n      originY: 'center',\n      fill: this.color,\n      radius: Math.min(\n        Math.max(p1.x - p2.x, p2.x - p1.x),\n        Math.max(p1.y - p2.y, p2.y - p1.y)\n      ) / 2,\n    });\n    this.canvas.add(round);\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this.canvas.renderAll();\n\n    // fire event 'path' created\n    this.canvas.fire('path:created', { path: round });\n  }\n}\n\nObject.assign(fabric, {\n  RoundBrush,\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/round-brush.js\n **/","export enum Brush {\n  pointer,\n  pencil,\n  line,\n  rotate_center,\n  eraser\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/def/Brush.ts\n **/","export enum Shape {\n  rect,\n  round,\n  triangle,\n  text\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/def/Shape.ts\n **/","import * as React from \"react\";\nimport  '../../css/painter-tools-painting.css';\n\nimport {config} from '../../config';\nimport {ColorButton} from '../buttons/ColorButton';\nimport {PaintingActions} from \"../../actions/PaintingActions\";\nimport {fabric_canvas} from \"../../fabric_canvas\";\nimport {Brush} from \"../../def/Brush\";\nimport {Shape} from \"../../def/Shape\";\n\ninterface PaintingPanelProps {\n  className:string;\n  current_color:string;\n}\n\nexport class PaintingPanel extends React.Component<PaintingPanelProps, {}> {\n  static select_brush(brush = Brush.pointer) {\n    fabric_canvas.set_brush(brush);\n    PaintingActions.select_brush(brush);\n  }\n\n  static add_shape(shape:Shape) {\n    PaintingPanel.select_brush();\n    fabric_canvas.add_shape(shape);\n  }\n\n  render() {\n    let default_colors = config.default_colors.map((value) => {\n      return <ColorButton key={value} color={value} checked={ value === this.props.current_color }/>;\n    });\n    return <div className=\"tools-painting\">\n      <div className=\"tools-buttons-container\">\n        <div title=\"\" className=\"tools-button tools-pencil\"\n             onClick={PaintingPanel.select_brush.bind(this, Brush.pencil)}>\n          <img className=\"button-img\" src=\"//o44j7l4g3.qnssl.com/program/painter/pencil.png\" alt=\"\"/>\n          <img className=\"button-img-on\" src=\"//o44j7l4g3.qnssl.com/program/painter/pencil-on.png\" alt=\"\"/>\n        </div>\n        <div title=\"\" className=\"tools-button tools-line\"\n             onClick={PaintingPanel.select_brush.bind(this,Brush.line)}>\n          <img className=\"button-img\" src=\"//o44j7l4g3.qnssl.com/program/painter/line.png\" alt=\"\"/>\n          <img className=\"button-img-on\" src=\"//o44j7l4g3.qnssl.com/program/painter/line-on.png\" alt=\"\"/>\n        </div>\n        <div title=\"\" className=\"tools-button tools-rect\" onClick={PaintingPanel.add_shape.bind(this, Shape.rect)}>\n          <img className=\"button-img\" src=\"//o44j7l4g3.qnssl.com/program/painter/rect.png\" alt=\"\"/>\n          <img className=\"button-img-on\" src=\"//o44j7l4g3.qnssl.com/program/painter/rect-on.png\" alt=\"\"/>\n        </div>\n        <div title=\"\" className=\"tools-button tools-round\" onClick={PaintingPanel.add_shape.bind(this, Shape.round)}>\n          <img className=\"button-img\" src=\"//o44j7l4g3.qnssl.com/program/painter/round.png\" alt=\"\"/>\n          <img className=\"button-img-on\" src=\"//o44j7l4g3.qnssl.com/program/painter/round-on.png\" alt=\"\"/>\n        </div>\n        <div title=\"\" className=\"tools-button tools-triangle\"\n             onClick={PaintingPanel.add_shape.bind(this, Shape.triangle)}>\n          <img className=\"button-img\" src=\"//o44j7l4g3.qnssl.com/program/painter/triangle-off.png\" alt=\"\"/>\n          <img className=\"button-img-on\" src=\"//o44j7l4g3.qnssl.com/program/painter/triangle-on.png\" alt=\"\"/>\n        </div>\n      </div>\n      <div className=\"tools-buttons-container\">\n        <div title=\"\" className=\"tools-button tools-eraser\"\n             onClick={PaintingPanel.select_brush.bind(this,Brush.eraser)}>\n          <img className=\"button-img\" src=\"//o44j7l4g3.qnssl.com/program/painter/eraser.png\" alt=\"\"/>\n          <img className=\"button-img-on\" src=\"//o44j7l4g3.qnssl.com/program/painter/eraser-on.png\" alt=\"\"/>\n        </div>\n        <div title=\"\" className=\"tools-button tools-select\"\n             onClick={PaintingPanel.select_brush.bind(this, Brush.pointer)}>\n          <img className=\"button-img\" src=\"//o44j7l4g3.qnssl.com/program/painter/select.png\" alt=\"\"/>\n          <img className=\"button-img-on\" src=\"//o44j7l4g3.qnssl.com/program/painter/select-on.png\" alt=\"\"/>\n        </div>\n        <div title=\"\" className=\"tools-button tools-text\"\n             onClick={PaintingPanel.add_shape.bind(this, Shape.text)}>\n          <img className=\"button-img\" src=\"//o44j7l4g3.qnssl.com/program/painter/text.png\" alt=\"\"/>\n          <img className=\"button-img-on\" src=\"//o44j7l4g3.qnssl.com/program/painter/text-on.png\" alt=\"\"/>\n        </div>\n        <div title=\"\" className=\"tools-button tools-select\"\n             onClick={PaintingPanel.select_brush.bind(this,Brush.rotate_center)}>\n          <img className=\"button-img\" src=\"//o44j7l4g3.qnssl.com/program/painter/rotation.png\" alt=\"\"/>\n          <img className=\"button-img-on\" src=\"//o44j7l4g3.qnssl.com/program/painter/rotation-on.png\" alt=\"\"/>\n        </div>\n      </div>\n      <div className=\"tools-slider-container\">\n        <span className=\"tools-container-title\"></span>\n        <span className=\"input-minus\">-</span>\n        <input title=\"\" type=\"range\" value=\"7\" min=\"1\" max=\"100\" step=\"1\"/>\n        <span className=\"input-plus\">+</span>\n      </div>\n      <div className=\"tools-item\">\n        <span className=\"item-title\"></span>\n        <input title=\"\" type=\"color\" className=\"color\"/>\n      </div>\n      <div className=\"tools-area\">\n        {default_colors}\n      </div>\n    </div>;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/panels/PaintingPanel.tsx\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./painter-tools-painting.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./painter-tools-painting.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./painter-tools-painting.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/css/painter-tools-painting.css\n ** module id = 31\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".tools-painting {\\n  width: 100%;\\n  height: calc(100% - 2rem);\\n\\n  display: -webkit-box;\\n\\n  display: -ms-flexbox;\\n\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: column;\\n          flex-direction: column;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-pack: start;\\n      -ms-flex-pack: start;\\n          justify-content: flex-start;\\n\\n  padding: 16px 0;\\n  padding: 1rem 0;\\n\\n  background-color: #ECE7DD;\\n}\\n\\n.tools-buttons-container {\\n  width: 90%;\\n  height: 44.8px;\\n  height: 2.8rem;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-pack: start;\\n      -ms-flex-pack: start;\\n          justify-content: flex-start;\\n\\n  margin: 2% 0;\\n  border-radius: 8px;\\n  background: #E2D7BE;;\\n}\\n\\n.tools-button {\\n  height: 40px;\\n  height: 2.5rem;\\n  width: 40px;\\n  width: 2.5rem;\\n\\n  display: -webkit-box;\\n\\n  display: -ms-flexbox;\\n\\n  display: flex;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n\\n  margin: 0 1.6px;\\n  margin: 0 0.1rem;\\n\\n  cursor: pointer;\\n}\\n\\n.tools-button img {\\n  max-height: 100%;\\n  max-width: 100%;\\n  pointer-events: none;\\n}\\n\\n.tools-button.active .button-img {\\n  display: none;\\n}\\n\\n.tools-button.active .button-img-on {\\n  display: block;\\n}\\n\\n.tools-button .button-img-on {\\n  display: none;\\n}\\n\\n.tools-button:active .button-img {\\n  display: none;\\n}\\n\\n.tools-button:active .button-img-on {\\n  display: block;\\n}\\n\\n.tools-slider-container {\\n  width: 90%;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-pack: start;\\n      -ms-flex-pack: start;\\n          justify-content: flex-start;\\n  margin: 8px 0;\\n  margin: 0.5rem 0;\\n\\n  font-family: STHeitiTC-Medium, serif;\\n  font-size: 18px;\\n  color: #645542;\\n}\\n\\n.tools-slider-container .tools-container-title {\\n  margin-right: 8%;\\n\\n  font-family: STHeitiTC-Medium, serif;\\n  font-size: 18px;\\n  color: #645542;\\n}\\n\\n.tools-slider-container input {\\n  width: 40%;\\n\\n  margin: 1.6px;\\n  margin: 0.1rem;\\n  -webkit-box-flex: 1;\\n      -ms-flex-positive: 1;\\n          flex-grow: 1;\\n}\\n\\n.tools-slider-container span {\\n  font-family: STHeitiTC-Medium, serif;\\n  font-size: 18px;\\n  color: #645542;\\n}\\n\\n.tools-slider-container .number-input {\\n  width: 32px;\\n  width: 2rem;\\n\\n  margin-left: 4%;\\n\\n  font-family: STHeitiTC-Medium, serif;\\n  font-size: 14px;\\n  color: #645542;\\n}\\n\\n.input-plus {\\n  margin-bottom: -3%;\\n}\\n\\n.input-minus {\\n  margin-bottom: -1%;\\n}\\n\\n.tools-item {\\n  width: 90%;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n\\n  margin: 8px 0;\\n  margin: 0.5rem 0;\\n}\\n\\n.item-title {\\n  margin-right: 8%;\\n\\n  font-family: STHeitiTC-Medium, serif;\\n  font-size: 18px;\\n  color: #645542;\\n}\\n\\n.tools-item input.color {\\n  width: 60%;\\n\\n  background: #8B572A;\\n  border: 4px solid #FFFFFF;\\n  border: 2px solid #AA9278;\\n  box-shadow: inset 0px -2px 0px 0px rgba(0, 0, 0, 0.30);\\n  border-radius: 4px;\\n\\n  cursor: pointer;\\n}\\n\\n.tools-item input:focus {\\n  outline: none;\\n}\\n\\n.tools-area {\\n  width: calc(90% - 0.2rem);\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-pack: justify;\\n      -ms-flex-pack: justify;\\n          justify-content: space-between;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -ms-flex-wrap: wrap;\\n      flex-wrap: wrap;\\n\\n  margin: 8px 0;\\n  margin: 0.5rem 0;\\n  padding: 16px 1.6px;\\n  padding: 1rem 0.1rem;\\n\\n  background: #E1D6BE;\\n  border-radius: 8px;\\n}\\n\\n.tools-default-color {\\n  height: 32px;\\n  height: 2rem;\\n  width: 32px;\\n  width: 2rem;\\n\\n  margin: 3.2px;\\n  margin: 0.2rem;\\n\\n  border: 1px solid rgba(0, 0, 0, 0.37);\\n  border-radius: 1.1rem;\\n  box-shadow: inset 0 1px 2px 0 rgba(0, 0, 0, 0.50);\\n\\n  cursor: pointer;\\n}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/postcss-loader!./src/css/painter-tools-painting.css\n ** module id = 32\n ** module chunks = 0\n **/","import {Brush} from \"./def/Brush\";\nexport const config = {\n  control_buttons: [\n    {\n      title: '',\n      action: 'undo',\n      className: ['undo'],\n    },\n    {\n      title: '',\n      action: 'redo',\n      className: ['redo'],\n    },\n    {\n      title: '',\n      action: 'clear',\n      className: ['clear'],\n    },\n  ],\n  default_colors: [\n    '#D0021B', '#F5A623', '#8B572A', '#7ED321', '#417505',\n    '#BD10E0', '#9013FE', '#4A90E2', '#50E3C2', '#B8E986',\n    '#000', '#4A4A4A', '#9B9B9B', '#D3D3D3', '#FFF',\n  ],\n  default_states: {\n    panel_type: 'painting',\n    current_color: '#333',\n    current_width: 7,\n    current_brush: Brush.pencil,\n    line_width: {\n      pencil: 7,\n      pointer: 7,\n      line: '#333'\n    },\n    brush_color: {\n      pencil: '#333',\n      pointer: '#333',\n      line: '#333'\n    },\n  },\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/config.ts\n **/","import * as React from \"react\";\nimport '../../css/ControlButton.css';\nimport {colorButtonActions} from '../../actions/ColorButtonActions';\nimport {fabric_canvas} from \"../../fabric_canvas\";\n\ninterface ColorButtonConfig {\n  color: string;\n  checked: boolean;\n  // onClick: (event:any) => void;\n}\n\nexport class ColorButton extends React.Component<ColorButtonConfig, {}> {\n  on_click_color() {\n    fabric_canvas.select_color(this.props.color);\n    colorButtonActions.select_color(this.props.color);\n  }\n  render() {\n    let style = {\n      backgroundColor: this.props.color\n    };\n    return <div className=\"tools-default-color\" style={ style } onClick={this.on_click_color.bind(this)}></div>;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/buttons/ColorButton.tsx\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./ControlButton.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./ControlButton.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./ControlButton.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/css/ControlButton.css\n ** module id = 35\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".control-panel .control-button {\\n  width: 60%;\\n  height: 60%;\\n  max-height: 96px;\\n  max-height: 6rem;\\n\\n  margin: 10%;\\n\\n  background-repeat: no-repeat;\\n  background-size: contain;\\n\\n  cursor: pointer;\\n}\\n\\n.clear {\\n  background-image: url('//o44j7l4g3.qnssl.com/program/painter/clear.png');\\n}\\n\\n.clear:hover {\\n  background-image: url('//o44j7l4g3.qnssl.com/program/painter/clear-hover.png');\\n}\\n\\n.undo {\\n  background-image: url('//o44j7l4g3.qnssl.com/program/painter/undo.png');\\n}\\n\\n.undo:hover {\\n  background-image: url('//o44j7l4g3.qnssl.com/program/painter/undo-hover.png ');\\n}\\n\\n.redo {\\n  background-image: url('//o44j7l4g3.qnssl.com/program/painter/redo.png');\\n}\\n\\n.redo:hover {\\n  background-image: url('//o44j7l4g3.qnssl.com/program/painter/redo-hover.png ');\\n}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/postcss-loader!./src/css/ControlButton.css\n ** module id = 36\n ** module chunks = 0\n **/","import { Actions } from './Actions';\n\nexport class ColorButtonActions extends Actions {\n  select_color(color: string) {\n    Actions.dispatch_action({\n      action_type: 'select_color',\n      color: color,\n    });\n  }\n}\n\nexport const colorButtonActions = new ColorButtonActions();\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/ColorButtonActions.ts\n **/","import { painter_dispatcher, Payload } from '../painter_dispatcher';\n\nexport abstract class Actions {\n\n  protected static dispatch_action(payload: Payload) {\n    painter_dispatcher.dispatch(payload);\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/Actions.ts\n **/","import {Dispatcher} from 'flux';\nimport {painterStore} from \"./painterStore\";\nimport {Brush} from \"./def/Brush\";\n\nexport interface Payload {\n  action_type:string;\n  color?:string;\n  brush?:Brush;\n}\n\ninterface ActionList {\n  [action:string]:any;\n}\n\nconst action_list:ActionList = {\n  'select_color': (payload:Payload) => {\n    painterStore.select_color_handler(payload.color);\n    painterStore.emit_change();\n  },\n  'select_brush': (payload:Payload) => {\n    painterStore.select_brush_handler(payload.brush);\n    painterStore.emit_change();\n  },\n  'add_shape':() => {\n    painterStore.select_brush_handler();\n    painterStore.emit_change();\n  }\n};\n\nconst painter_dispatcher = new Dispatcher();\n\npainter_dispatcher.register((payload:Payload) => {\n  action_list[payload.action_type](payload);\n});\n\nexport {painter_dispatcher};\n\n\n/** WEBPACK FOOTER **\n ** ./src/painter_dispatcher.ts\n **/","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nmodule.exports.Dispatcher = require('./lib/Dispatcher');\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/flux/index.js\n **/","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Dispatcher\n * \n * @preventMunge\n */\n\n'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar _prefix = 'ID_';\n\n/**\n * Dispatcher is used to broadcast payloads to registered callbacks. This is\n * different from generic pub-sub systems in two ways:\n *\n *   1) Callbacks are not subscribed to particular events. Every payload is\n *      dispatched to every registered callback.\n *   2) Callbacks can be deferred in whole or part until other callbacks have\n *      been executed.\n *\n * For example, consider this hypothetical flight destination form, which\n * selects a default city when a country is selected:\n *\n *   var flightDispatcher = new Dispatcher();\n *\n *   // Keeps track of which country is selected\n *   var CountryStore = {country: null};\n *\n *   // Keeps track of which city is selected\n *   var CityStore = {city: null};\n *\n *   // Keeps track of the base flight price of the selected city\n *   var FlightPriceStore = {price: null}\n *\n * When a user changes the selected city, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'city-update',\n *     selectedCity: 'paris'\n *   });\n *\n * This payload is digested by `CityStore`:\n *\n *   flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'city-update') {\n *       CityStore.city = payload.selectedCity;\n *     }\n *   });\n *\n * When the user selects a country, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'country-update',\n *     selectedCountry: 'australia'\n *   });\n *\n * This payload is digested by both stores:\n *\n *   CountryStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       CountryStore.country = payload.selectedCountry;\n *     }\n *   });\n *\n * When the callback to update `CountryStore` is registered, we save a reference\n * to the returned token. Using this token with `waitFor()`, we can guarantee\n * that `CountryStore` is updated before the callback that updates `CityStore`\n * needs to query its data.\n *\n *   CityStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       // `CountryStore.country` may not be updated.\n *       flightDispatcher.waitFor([CountryStore.dispatchToken]);\n *       // `CountryStore.country` is now guaranteed to be updated.\n *\n *       // Select the default city for the new country\n *       CityStore.city = getDefaultCityForCountry(CountryStore.country);\n *     }\n *   });\n *\n * The usage of `waitFor()` can be chained, for example:\n *\n *   FlightPriceStore.dispatchToken =\n *     flightDispatcher.register(function(payload) {\n *       switch (payload.actionType) {\n *         case 'country-update':\n *         case 'city-update':\n *           flightDispatcher.waitFor([CityStore.dispatchToken]);\n *           FlightPriceStore.price =\n *             getFlightPriceStore(CountryStore.country, CityStore.city);\n *           break;\n *     }\n *   });\n *\n * The `country-update` payload will be guaranteed to invoke the stores'\n * registered callbacks in order: `CountryStore`, `CityStore`, then\n * `FlightPriceStore`.\n */\n\nvar Dispatcher = (function () {\n  function Dispatcher() {\n    _classCallCheck(this, Dispatcher);\n\n    this._callbacks = {};\n    this._isDispatching = false;\n    this._isHandled = {};\n    this._isPending = {};\n    this._lastID = 1;\n  }\n\n  /**\n   * Registers a callback to be invoked with every dispatched payload. Returns\n   * a token that can be used with `waitFor()`.\n   */\n\n  Dispatcher.prototype.register = function register(callback) {\n    var id = _prefix + this._lastID++;\n    this._callbacks[id] = callback;\n    return id;\n  };\n\n  /**\n   * Removes a callback based on its token.\n   */\n\n  Dispatcher.prototype.unregister = function unregister(id) {\n    !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.unregister(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n    delete this._callbacks[id];\n  };\n\n  /**\n   * Waits for the callbacks specified to be invoked before continuing execution\n   * of the current callback. This method should only be used by a callback in\n   * response to a dispatched payload.\n   */\n\n  Dispatcher.prototype.waitFor = function waitFor(ids) {\n    !this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Must be invoked while dispatching.') : invariant(false) : undefined;\n    for (var ii = 0; ii < ids.length; ii++) {\n      var id = ids[ii];\n      if (this._isPending[id]) {\n        !this._isHandled[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Circular dependency detected while ' + 'waiting for `%s`.', id) : invariant(false) : undefined;\n        continue;\n      }\n      !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n      this._invokeCallback(id);\n    }\n  };\n\n  /**\n   * Dispatches a payload to all registered callbacks.\n   */\n\n  Dispatcher.prototype.dispatch = function dispatch(payload) {\n    !!this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.') : invariant(false) : undefined;\n    this._startDispatching(payload);\n    try {\n      for (var id in this._callbacks) {\n        if (this._isPending[id]) {\n          continue;\n        }\n        this._invokeCallback(id);\n      }\n    } finally {\n      this._stopDispatching();\n    }\n  };\n\n  /**\n   * Is this Dispatcher currently dispatching.\n   */\n\n  Dispatcher.prototype.isDispatching = function isDispatching() {\n    return this._isDispatching;\n  };\n\n  /**\n   * Call the callback stored with the given id. Also do some internal\n   * bookkeeping.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._invokeCallback = function _invokeCallback(id) {\n    this._isPending[id] = true;\n    this._callbacks[id](this._pendingPayload);\n    this._isHandled[id] = true;\n  };\n\n  /**\n   * Set up bookkeeping needed when dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._startDispatching = function _startDispatching(payload) {\n    for (var id in this._callbacks) {\n      this._isPending[id] = false;\n      this._isHandled[id] = false;\n    }\n    this._pendingPayload = payload;\n    this._isDispatching = true;\n  };\n\n  /**\n   * Clear bookkeeping used for dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._stopDispatching = function _stopDispatching() {\n    delete this._pendingPayload;\n    this._isDispatching = false;\n  };\n\n  return Dispatcher;\n})();\n\nmodule.exports = Dispatcher;\n\n\n/** WEBPACK FOOTER **\n ** ./~/flux/lib/Dispatcher.js\n **/","// shim for using process in browser\n\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\n(function () {\n  try {\n    cachedSetTimeout = setTimeout;\n  } catch (e) {\n    cachedSetTimeout = function () {\n      throw new Error('setTimeout is not defined');\n    }\n  }\n  try {\n    cachedClearTimeout = clearTimeout;\n  } catch (e) {\n    cachedClearTimeout = function () {\n      throw new Error('clearTimeout is not defined');\n    }\n  }\n} ())\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = cachedSetTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    cachedClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        cachedSetTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/process/browser.js\n **/","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule invariant\n */\n\n\"use strict\";\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function (condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error('Invariant Violation: ' + format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n\n\n/** WEBPACK FOOTER **\n ** ./~/fbjs/lib/invariant.js\n **/","import {config} from './config';\nimport {PainterStates} from './PainterStates';\nimport * as EventEmitter from 'eventemitter3';\nimport {Brush} from \"./def/Brush\";\n\n\nclass PainterStore extends EventEmitter {\n  private _states:PainterStates;\n  get states() {\n    return this._states;\n  }\n\n  constructor() {\n    super();\n    this._states = config.default_states;\n  }\n\n  select_color_handler(color:string) {\n    this._states.current_color = color;\n  }\n\n  select_brush_handler(brush:Brush = Brush.pointer) {\n    this._states.current_brush = brush;\n  }\n\n  // emit_select_color() {\n  //   this.emit('select_color');\n  // }\n\n\n  emit_change() {\n    this.emit('change');\n  }\n\n  add_change_listener(callback:() => void) {\n    this.on('change', callback);\n  }\n\n  remove_change_listener(callback:() => void) {\n    this.removeListener('change', callback);\n  }\n}\n\nexport const painterStore = new PainterStore();\n\n\n/** WEBPACK FOOTER **\n ** ./src/painterStore.ts\n **/","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n//\n// We store our EE objects in a plain object whose properties are event names.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// `~` to make sure that the built-in object properties are not overridden or\n// used as an attack vector.\n// We also assume that `Object.create(null)` is available when the event name\n// is an ES6 Symbol.\n//\nvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} [once=false] Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Hold the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var events = this._events\n    , names = []\n    , name;\n\n  if (!events) return names;\n\n  for (name in events) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @param {Boolean} exists We only need to know if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events && this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Mixed} context Only remove listeners matching this context.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return this;\n\n  var listeners = this._events[evt]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn) {\n      if (\n           listeners.fn !== fn\n        || (once && !listeners.once)\n        || (context && listeners.context !== context)\n      ) {\n        events.push(listeners);\n      }\n    } else {\n      for (var i = 0, length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[evt] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[prefix ? prefix + event : event];\n  else this._events = prefix ? {} : Object.create(null);\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eventemitter3/index.js\n **/","import {Actions} from './Actions';\nimport {Brush} from \"../def/Brush\";\n\nexport class PaintingActions extends Actions {\n  static select_brush(brush:Brush) {\n    Actions.dispatch_action({\n      action_type: 'select_brush',\n      brush: brush,\n    });\n  }\n\n  static add_shape() {\n    Actions.dispatch_action({\n      action_type: 'add_shape'\n    })\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/PaintingActions.ts\n **/","import * as React from \"react\";\nimport  '../../css/ObjectPanel.css';\n\nexport class ObjectPanel extends React.Component<{}, {}> {\n  render() {\n    //  todo: will use this panel soon\n    // return <div className=\"painter-object-panel\">\n    //   <input title=\"\" className=\"color object-color\"/>\n    //   <label className=\"object-opacity\">  -\n    //     <input title=\" \" type=\"range\" min=\"0\" max=\"1\" step=\"0.01\"/>+\n    //     <span>Opacity</span>\n    //   </label>\n    //   <input title=\"\" type=\"number\" className=\"font-size\"/>\n    //   <textarea className=\"object-text\" title=\"\"/>\n    //   <div title=\"\" className=\"remove-button\">\n    //     <img src=\"//o44j7l4g3.qnssl.com/program/painter/delete.png\" alt=\"\"/>\n    //   </div>\n    // </div>;\n    return <div className=\"painter-object-panel\">\n    </div>;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/panels/ObjectPanel.tsx\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./ObjectPanel.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./ObjectPanel.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js!./ObjectPanel.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/css/ObjectPanel.css\n ** module id = 48\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".painter-object-panel {\\n  width: 85%;\\n  height: calc(10% - 1rem);\\n  padding: 8px;\\n  padding: 0.5rem;\\n  background-color: #F8F8F8;\\n\\n  display: -webkit-box;\\n\\n  display: -ms-flexbox;\\n\\n  display: flex;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n\\n  -ms-flex-negative: 0;\\n\\n      flex-shrink: 0;\\n}\\n\\n.painter-object-panel .object-color {\\n  width: 32px;\\n  width: 2rem;\\n  height: 24px;\\n  height: 1.5rem;\\n  color: transparent;\\n\\n  background: #8B572A;\\n  border: 4px solid #FFFFFF;\\n  border: 2px solid #DDD0C3;\\n  box-shadow: inset 0 -2px 0 0 rgba(0, 0, 0, 0.30);\\n  border-radius: 4px;\\n\\n  cursor: pointer;\\n}\\n\\n.painter-object-panel .object-opacity {\\n  /*width: 14rem;*/\\n  margin: 0 8px;\\n  margin: 0 0.5rem;\\n\\n  font-family: STHeitiTC-Medium, serif;\\n  font-size: 18px;\\n  color: #645542;\\n}\\n\\n.painter-object-panel .object-opacity input {\\n  width: 100px;\\n  width: 6.25rem;\\n}\\n\\n.painter-object-panel .object-opacity span {\\n  display: inline-block;\\n\\n  width: 35.2px;\\n  width: 2.2rem;\\n  margin-left: 8px;\\n  margin-left: 0.5rem;\\n  text-align: center;\\n}\\n\\n.painter-object-panel .font-size {\\n  width: 51.2px;\\n  width: 3.2rem;\\n  height: 24px;\\n  height: 1.5rem;\\n\\n  margin: 0 8px;\\n  margin: 0 0.5rem;\\n\\n  background: #FFFFFF;\\n  border: 4px solid #FFFFFF;\\n  border: 2px solid #DDD0C3;\\n  border-radius: 4px;\\n\\n  font-family: STHeitiTC-Medium, serif;\\n  font-size: 18px;\\n  color: #645542;\\n\\n  text-align: center;\\n}\\n\\n.painter-object-panel .font-size:focus {\\n  outline: none;\\n}\\n\\n.painter-object-panel .object-text {\\n  width: 240px;\\n  width: 15rem;\\n  height: 48px;\\n  height: 3rem;\\n  max-width: 320px;\\n  max-width: 20rem;\\n  max-height: 56px;\\n  max-height: 3.5rem;\\n\\n  margin: 0 8px;\\n  margin: 0 0.5rem;\\n}\\n\\n.painter-object-panel .remove-button {\\n  float: right;\\n\\n  font-family: STHeitiTC-Medium, serif;\\n  font-size: 18px;\\n  color: #645542;\\n\\n  cursor: pointer;\\n}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/postcss-loader!./src/css/ObjectPanel.css\n ** module id = 49\n ** module chunks = 0\n **/"],"sourceRoot":""}